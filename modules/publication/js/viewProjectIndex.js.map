{"version":3,"sources":["webpack:///modules/publication/js/viewProjectIndex.js","webpack:///webpack/bootstrap b00c1a08211112abecb8?b5a5*******************************************","webpack:///./modules/publication/jsx/viewProjectIndex.js","webpack:///./modules/publication/jsx/projectFields.js?4bd3","webpack:///./modules/publication/jsx/viewProject.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","0","_interopRequireDefault","obj","__esModule","default","_viewProject","_viewProject2","args","QueryString","get","document","currentScript","src","$","viewProject","React","createElement","className","DataURL","loris","BaseURL","action","ReactDOM","render","getElementById","26","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","EmailElement","_React$Component","this","_this","getPrototypeOf","handleChange","bind","handleBlur","e","onUserInput","name","onUserBlur","disabled","required","errorMessage","requiredHTML","elementClass","htmlFor","label","type","onChange","onBlur","toggleEmailNotify","addressee","Component","defaultProps","console","warn","ProjectFormFields","_React$Component2","_this2","createCollabEmailFields","deleteUpload","createFileFields","addCollaborator","removeCollaborator","setCollaboratorEmail","uploadID","swal","title","text","showCancelButton","confirmButtonText","cancelButtonText","willDelete","url","ajax","method","success","fetchData","fileFields","files","forEach","f","_this3","downloadURL","encodeURIComponent","URL","link","href","style","cursor","onClick","PublicationUploadID","existFileFlag","pubType","pubCit","pubVer","pubTypeStr","uploadTypes","formData","push","StaticElement","TextboxElement","setFormData","numFiles","fileName","FileElement","setFileData","publicationType","publicationCitation","publicationVersion","SelectElement","options","collabEmails","collaborators","slice","validateEmail","formErrors","email","formElement","pendingValKey","notify","filter","collabName","split","findIndex","indexOf","currNotify","notifyLead","voiHelp","collabNames","map","voiTypeOptions","All","Behavioral","Imaging","allVOIs","voiOptions","voiType","bvlCopy","assign","TextareaElement","description","leadInvestigator","leadInvestigatorEmail","TagsElement","users","useSearch","strictSearch","onUserAdd","addListItem","onUserRemove","removeListItem","pendingUWEP","items","usersWithEditPerm","btnLabel","allCollabs","pendingCollab","allKWs","pendingKWItem","keywords","emptyOption","pendingItemVF","voiFields","ButtonElement","editMode","_React$Component3","_this4","handleKeyPress","handleAdd","handleRemove","getKeyFromValue","canAddItem","keyCode","which","preventDefault","values","getAttribute","keys","find","o","result","allowDupl","emptyOptionHTML","input","list","onKeyPress","option","item","itmTxt","undefined","data-item","propTypes","PropTypes","string","isRequired","object","array","class","multiple","bool","func","hasError","28","_projectFields","_projectFields2","ViewProject","state","isLoaded","handleSubmit","createFileDownloadLinks","createMenuFilterLinks","createStaticComponents","createEditableComponents","field","test","setState","formObj","FormData","hasOwnProperty","formVal","Array","isArray","JSON","stringify","append","data","cache","contentType","processData","error","jqXHR","resp","parse","responseText","message","dataType","status","voi","rejectedReason","PublicationUploadTypeID","Citation","Version","statusOpts","userCanEdit","errorCode","errorMsg","toReturn","download","uploadType","stringArr","filterVar","links","vois","collabLinks","keywordLinks","voiLinks","listItems","index","splice","statusElement","rejectReason","reviewBtn","statusID","userHasPermission","statClassMap","Pending","Approved","Rejected","statusText","formElements","FormElement","onSubmit","ref"],"mappings":"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","file":"./modules/publication/js/viewProjectIndex.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _viewProject = __webpack_require__(28);\n\t\n\tvar _viewProject2 = _interopRequireDefault(_viewProject);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar args = QueryString.get(document.currentScript.src);\n\t\n\t$(function () {\n\t  var viewProject = React.createElement(\n\t    \"div\",\n\t    { className: \"page-edit-form\" },\n\t    React.createElement(\n\t      \"div\",\n\t      { className: \"row\" },\n\t      React.createElement(\n\t        \"div\",\n\t        { className: \"col-md-9 col-lg-7\" },\n\t        React.createElement(_viewProject2.default, {\n\t          DataURL: loris.BaseURL + \"/publication/ajax/getData.php?action=getProjectData&id=\" + args.id,\n\t          action: loris.BaseURL + \"/publication/ajax/FileUpload.php?action=editProject&id=\" + args.id\n\t        })\n\t      )\n\t    )\n\t  );\n\t\n\t  ReactDOM.render(viewProject, document.getElementById(\"lorisworkspace\"));\n\t});\n\n/***/ },\n\n/***/ 26:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar EmailElement = function (_React$Component) {\n\t  _inherits(EmailElement, _React$Component);\n\t\n\t  function EmailElement() {\n\t    _classCallCheck(this, EmailElement);\n\t\n\t    var _this = _possibleConstructorReturn(this, (EmailElement.__proto__ || Object.getPrototypeOf(EmailElement)).call(this));\n\t\n\t    _this.handleChange = _this.handleChange.bind(_this);\n\t    _this.handleBlur = _this.handleBlur.bind(_this);\n\t    return _this;\n\t  }\n\t\n\t  _createClass(EmailElement, [{\n\t    key: 'handleChange',\n\t    value: function handleChange(e) {\n\t      this.props.onUserInput(this.props.name, e.target.value);\n\t    }\n\t  }, {\n\t    key: 'handleBlur',\n\t    value: function handleBlur(e) {\n\t      this.props.onUserBlur(this.props.name, e.target.value);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var disabled = this.props.disabled ? 'disabled' : null;\n\t      var required = this.props.required ? 'required' : null;\n\t      var errorMessage = null;\n\t      var requiredHTML = null;\n\t      var elementClass = 'row form-group';\n\t\n\t      // Add required asterix\n\t      if (required) {\n\t        requiredHTML = React.createElement(\n\t          'span',\n\t          { className: 'text-danger' },\n\t          '*'\n\t        );\n\t      }\n\t\n\t      // Add error message\n\t      if (this.props.errorMessage) {\n\t        errorMessage = React.createElement(\n\t          'span',\n\t          null,\n\t          this.props.errorMessage\n\t        );\n\t        elementClass = 'row form-group has-error';\n\t      }\n\t\n\t      return React.createElement(\n\t        'div',\n\t        { className: elementClass },\n\t        React.createElement(\n\t          'label',\n\t          { className: 'col-sm-3 control-label', htmlFor: this.props.id },\n\t          this.props.label,\n\t          requiredHTML\n\t        ),\n\t        React.createElement(\n\t          'div',\n\t          { className: 'col-sm-7' },\n\t          React.createElement('input', {\n\t            type: 'text',\n\t            className: 'form-control',\n\t            name: this.props.name,\n\t            id: this.props.id,\n\t            value: this.props.value || \"\",\n\t            required: required,\n\t            disabled: disabled,\n\t            onChange: this.handleChange,\n\t            onBlur: this.handleBlur\n\t          }),\n\t          errorMessage\n\t        ),\n\t        React.createElement(\n\t          'div',\n\t          { className: 'col-sm-2' },\n\t          React.createElement(\n\t            'span',\n\t            null,\n\t            React.createElement('input', {\n\t              name: this.props.name + '_notify',\n\t              type: 'checkbox',\n\t              onChange: this.props.toggleEmailNotify,\n\t              value: this.props.addressee\n\t            }),\n\t            React.createElement(\n\t              'span',\n\t              null,\n\t              'Send email notification?'\n\t            )\n\t          )\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return EmailElement;\n\t}(React.Component);\n\t\n\tEmailElement.defaultProps = {\n\t  name: '',\n\t  label: '',\n\t  value: '',\n\t  addressee: '',\n\t  id: null,\n\t  disabled: false,\n\t  required: false,\n\t  errorMessage: '',\n\t  onUserInput: function onUserInput() {\n\t    console.warn('onUserInput() callback is not set');\n\t  },\n\t  onUserBlur: function onUserBlur() {}\n\t};\n\t\n\t// This class combines the common form elements between\n\t// Edit mode and initial Project Proposal/Creation mode\n\t\n\tvar ProjectFormFields = function (_React$Component2) {\n\t  _inherits(ProjectFormFields, _React$Component2);\n\t\n\t  function ProjectFormFields() {\n\t    _classCallCheck(this, ProjectFormFields);\n\t\n\t    var _this2 = _possibleConstructorReturn(this, (ProjectFormFields.__proto__ || Object.getPrototypeOf(ProjectFormFields)).call(this));\n\t\n\t    _this2.createCollabEmailFields = _this2.createCollabEmailFields.bind(_this2);\n\t    _this2.deleteUpload = _this2.deleteUpload.bind(_this2);\n\t    _this2.createFileFields = _this2.createFileFields.bind(_this2);\n\t    _this2.addCollaborator = _this2.addCollaborator.bind(_this2);\n\t    _this2.removeCollaborator = _this2.removeCollaborator.bind(_this2);\n\t    _this2.setCollaboratorEmail = _this2.setCollaboratorEmail.bind(_this2);\n\t    _this2.toggleEmailNotify = _this2.toggleEmailNotify.bind(_this2);\n\t    return _this2;\n\t  }\n\t\n\t  _createClass(ProjectFormFields, [{\n\t    key: 'deleteUpload',\n\t    value: function deleteUpload(uploadID) {\n\t      var self = this;\n\t      swal({\n\t        title: \"Are you sure?\",\n\t        text: \"Are you sure you want to delete this file?\",\n\t        type: \"warning\",\n\t        showCancelButton: true,\n\t        confirmButtonText: 'Yes, I am sure!',\n\t        cancelButtonText: \"No, cancel it!\"\n\t      }, function (willDelete) {\n\t        if (willDelete) {\n\t          var url = loris.BaseURL + '/publication/ajax/FileDelete.php?uploadID=' + uploadID;\n\t          $.ajax(url, {\n\t            method: 'DELETE',\n\t            success: function success() {\n\t              self.props.fetchData();\n\t            }\n\t          });\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'createFileFields',\n\t    value: function createFileFields() {\n\t      var fileFields = [];\n\t      // Create download link & edit fields for existing files\n\t      if (this.props.files) {\n\t        this.props.files.forEach(function (f) {\n\t          var _this3 = this;\n\t\n\t          var downloadURL = loris.BaseURL + '/publication/ajax/FileDownload.php?File=' + encodeURIComponent(f.URL);\n\t          var link = React.createElement(\n\t            'span',\n\t            null,\n\t            React.createElement(\n\t              'a',\n\t              { href: downloadURL },\n\t              f.URL\n\t            ),\n\t            '\\xA0\\xA0',\n\t            React.createElement('span', {\n\t              className: 'glyphicon glyphicon-remove',\n\t              style: { cursor: 'pointer' },\n\t              onClick: function onClick() {\n\t                return _this3.deleteUpload(f.PublicationUploadID);\n\t              }\n\t            })\n\t          );\n\t          var existFileFlag = 'existingUpload_';\n\t          var pubType = existFileFlag + 'publicationType_' + f.PublicationUploadID;\n\t          var pubCit = existFileFlag + 'publicationCitation_' + f.PublicationUploadID;\n\t          var pubVer = existFileFlag + 'publicationVersion_' + f.PublicationUploadID;\n\t          var pubTypeStr = this.props.uploadTypes[this.props.formData[pubType]];\n\t          fileFields.push(React.createElement(\n\t            'div',\n\t            null,\n\t            React.createElement(StaticElement, {\n\t              label: pubTypeStr,\n\t              text: link\n\t            }),\n\t            React.createElement(TextboxElement, {\n\t              name: pubCit,\n\t              label: 'Citation',\n\t              onUserInput: this.props.setFormData,\n\t              value: this.props.formData[pubCit]\n\t            }),\n\t            React.createElement(TextboxElement, {\n\t              name: pubVer,\n\t              label: 'Publication Version',\n\t              onUserInput: this.props.setFormData,\n\t              value: this.props.formData[pubVer]\n\t            })\n\t          ));\n\t        }, this);\n\t      }\n\t      // create fields for new files\n\t      for (var i = 0; i <= this.props.numFiles; i++) {\n\t        var fileName = \"file_\" + i;\n\t        fileFields.push(React.createElement(FileElement, {\n\t          name: fileName,\n\t          id: \"publicationUploadEl_\" + i,\n\t          onUserInput: this.props.setFileData,\n\t          label: 'File to upload',\n\t          value: this.props.formData[fileName]\n\t        }));\n\t        if (this.props.formData[fileName]) {\n\t          var publicationType = \"publicationType_\" + i;\n\t          var publicationCitation = \"publicationCitation_\" + i;\n\t          var publicationVersion = \"publicationVersion_\" + i;\n\t          fileFields.push(React.createElement(\n\t            'div',\n\t            null,\n\t            React.createElement(SelectElement, {\n\t              name: publicationType,\n\t              label: 'Publication Type',\n\t              onUserInput: this.props.setFormData,\n\t              value: this.props.formData[publicationType],\n\t              options: this.props.uploadTypes,\n\t              required: true\n\t            }),\n\t            React.createElement(TextboxElement, {\n\t              name: publicationCitation,\n\t              label: 'Citation',\n\t              onUserInput: this.props.setFormData,\n\t              value: this.props.formData[publicationCitation]\n\t            }),\n\t            React.createElement(TextboxElement, {\n\t              name: publicationVersion,\n\t              label: 'Publication Version',\n\t              onUserInput: this.props.setFormData,\n\t              value: this.props.formData[publicationVersion]\n\t            })\n\t          ));\n\t        }\n\t      }\n\t\n\t      return fileFields;\n\t    }\n\t  }, {\n\t    key: 'createCollabEmailFields',\n\t    value: function createCollabEmailFields() {\n\t      var collabEmails = [];\n\t      if (this.props.formData.collaborators) {\n\t        this.props.formData.collaborators.forEach(function (c, i) {\n\t          var name = 'collabEmail_' + c.name;\n\t          collabEmails.push(React.createElement(EmailElement, {\n\t            name: name,\n\t            label: c.name + (c.name.slice(-1) === 's' ? \"'\" : \"'s\") + \" Email\",\n\t            onUserInput: this.setCollaboratorEmail,\n\t            onUserBlur: this.props.validateEmail,\n\t            toggleEmailNotify: this.toggleEmailNotify,\n\t            errorMessage: this.props.formErrors[name],\n\t            required: false,\n\t            value: this.props.formData.collaborators[i].email,\n\t            addressee: c.name\n\t          }));\n\t        }, this);\n\t      }\n\t      return collabEmails;\n\t    }\n\t  }, {\n\t    key: 'addCollaborator',\n\t    value: function addCollaborator(formElement, value, pendingValKey) {\n\t      var collaborators = this.props.formData.collaborators || [];\n\t      collaborators.push({\n\t        name: value,\n\t        email: null,\n\t        notify: false\n\t      });\n\t\n\t      this.props.setFormData('collaborators', collaborators);\n\t      this.props.setFormData(pendingValKey, null);\n\t    }\n\t  }, {\n\t    key: 'removeCollaborator',\n\t    value: function removeCollaborator(formElement, value) {\n\t      var collaborators = this.props.formData.collaborators || [];\n\t      collaborators = collaborators.filter(function (c) {\n\t        return c.name !== value;\n\t      });\n\t      this.props.setFormData('collaborators', collaborators);\n\t    }\n\t  }, {\n\t    key: 'setCollaboratorEmail',\n\t    value: function setCollaboratorEmail(formElement, value) {\n\t      var collabName = formElement.split('_')[1];\n\t      var collaborators = this.props.formData.collaborators;\n\t      var i = collaborators.findIndex(function (c) {\n\t        return c.name === collabName;\n\t      });\n\t      collaborators[i].email = value;\n\t      this.props.setFormData('collaborators', collaborators);\n\t    }\n\t  }, {\n\t    key: 'toggleEmailNotify',\n\t    value: function toggleEmailNotify(e) {\n\t      if (e.target.name.indexOf('collabEmail') > -1) {\n\t        var collaborators = this.props.formData.collaborators;\n\t        var collabName = e.target.value;\n\t        var i = collaborators.findIndex(function (c) {\n\t          return c.name === collabName;\n\t        });\n\t        collaborators[i].notify = !collaborators[i].notify;\n\t        this.props.setFormData('collaborators', collaborators);\n\t      } else if (e.target.name === 'leadInvestigatorEmail_notify') {\n\t        var currNotify = this.props.formData.notifyLead || false;\n\t        this.props.setFormData('notifyLead', !currNotify);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var collabEmails = this.createCollabEmailFields();\n\t      var fileFields = this.createFileFields();\n\t\n\t      var voiHelp = React.createElement(\n\t        'div',\n\t        null,\n\t        'For help finding variables of interest, consult the ',\n\t        React.createElement(\n\t          'a',\n\t          { href: loris.BaseURL + '/datadict/' },\n\t          'Data Dictionary'\n\t        )\n\t      );\n\t      var collabNames = [];\n\t      if (this.props.formData.collaborators) {\n\t        collabNames = this.props.formData.collaborators.map(function (c) {\n\t          return c.name;\n\t        });\n\t      }\n\t\n\t      var voiTypeOptions = {\n\t        All: 'All',\n\t        Behavioral: 'Behavioral',\n\t        Imaging: 'Imaging'\n\t      };\n\t\n\t      var allVOIs = this.props.allVOIs;\n\t      var voiOptions = {};\n\t      var type = this.props.formData.voiType;\n\t      if (type && type !== 'All') {\n\t        voiOptions = this.props.allVOIs[type];\n\t      } else {\n\t        // maintain behavioral VoIs by creating an object copy\n\t        var bvlCopy = Object.assign({}, allVOIs.Behavioral);\n\t        voiOptions = Object.assign(bvlCopy, allVOIs.Imaging);\n\t      }\n\t\n\t      return React.createElement(\n\t        'div',\n\t        null,\n\t        React.createElement(TextareaElement, {\n\t          name: 'description',\n\t          label: 'Description',\n\t          onUserInput: this.props.setFormData,\n\t          required: true,\n\t          value: this.props.formData.description\n\t        }),\n\t        React.createElement(TextboxElement, {\n\t          name: 'leadInvestigator',\n\t          label: 'Lead Investigator',\n\t          onUserInput: this.props.setFormData,\n\t          required: true,\n\t          value: this.props.formData.leadInvestigator\n\t        }),\n\t        React.createElement(EmailElement, {\n\t          name: 'leadInvestigatorEmail',\n\t          label: 'Lead Investigator Email',\n\t          onUserInput: this.props.setFormData,\n\t          onUserBlur: this.props.validateEmail,\n\t          toggleEmailNotify: this.toggleEmailNotify,\n\t          errorMessage: this.props.formErrors.leadInvestigatorEmail,\n\t          required: true,\n\t          value: this.props.formData.leadInvestigatorEmail,\n\t          addressee: 'leadInvestigator'\n\t        }),\n\t        React.createElement(TagsElement, {\n\t          name: 'usersWithEditPerm',\n\t          id: 'usersWithEditPerm',\n\t          label: 'LORIS Users with Edit Permission',\n\t          options: this.props.users,\n\t          useSearch: true,\n\t          strictSearch: true,\n\t          onUserInput: this.props.setFormData,\n\t          onUserAdd: this.props.addListItem,\n\t          onUserRemove: this.props.removeListItem,\n\t          value: this.props.formData.pendingUWEP,\n\t          pendingValKey: 'pendingUWEP',\n\t          items: this.props.formData.usersWithEditPerm,\n\t          btnLabel: 'Add User'\n\t        }),\n\t        React.createElement(TagsElement, {\n\t          name: 'collaborators',\n\t          id: 'collaborators',\n\t          label: 'Collaborators',\n\t          options: this.props.allCollabs,\n\t          useSearch: true,\n\t          strictSearch: false,\n\t          onUserInput: this.props.setFormData,\n\t          onUserAdd: this.addCollaborator,\n\t          onUserRemove: this.removeCollaborator,\n\t          value: this.props.formData.pendingCollab,\n\t          pendingValKey: 'pendingCollab',\n\t          items: collabNames,\n\t          btnLabel: 'Add Collaborator'\n\t        }),\n\t        collabEmails,\n\t        React.createElement(TagsElement, {\n\t          name: 'keywords',\n\t          id: 'keywords',\n\t          label: 'Keywords',\n\t          options: this.props.allKWs,\n\t          useSearch: true,\n\t          strictSearch: false,\n\t          onUserInput: this.props.setFormData,\n\t          onUserAdd: this.props.addListItem,\n\t          onUserRemove: this.props.removeListItem,\n\t          value: this.props.formData.pendingKWItem,\n\t          pendingValKey: 'pendingKWItem',\n\t          items: this.props.formData.keywords,\n\t          btnLabel: 'Add Keyword'\n\t        }),\n\t        React.createElement(SelectElement, {\n\t          name: 'voiType',\n\t          label: 'Type of Variables of Interest',\n\t          options: voiTypeOptions,\n\t          onUserInput: this.props.setFormData,\n\t          value: this.props.formData.voiType,\n\t          emptyOption: false\n\t        }),\n\t        React.createElement(TagsElement, {\n\t          name: 'voiFields',\n\t          id: 'voiFields',\n\t          label: 'Variables of Interest',\n\t          useSearch: true,\n\t          strictSearch: true,\n\t          onUserInput: this.props.setFormData,\n\t          onUserAdd: this.props.addListItem,\n\t          onUserRemove: this.props.removeListItem,\n\t          required: false,\n\t          value: this.props.formData.pendingItemVF,\n\t          options: voiOptions,\n\t          pendingValKey: 'pendingItemVF',\n\t          items: this.props.formData.voiFields,\n\t          btnLabel: 'Add Variable of Interest'\n\t        }),\n\t        React.createElement(StaticElement, {\n\t          text: voiHelp\n\t        }),\n\t        fileFields,\n\t        React.createElement(ButtonElement, { label: this.props.editMode ? \"Submit\" : \"Propose Project\" })\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return ProjectFormFields;\n\t}(React.Component);\n\t/**\n\t * Tags Component\n\t * Allows for multiple values to be entered for a single field\n\t *\n\t * Comes in 3 flavors:\n\t * 1: If options are passed and useSearch = true\n\t *    input field is rendered as a searchable dropdown\n\t * 2: If only options are passed, input is rendered as\n\t *    a normal dropdown select\n\t * 3: Without options, input is a normal, free text input\n\t */\n\t\n\tvar TagsElement = function (_React$Component3) {\n\t  _inherits(TagsElement, _React$Component3);\n\t\n\t  function TagsElement() {\n\t    _classCallCheck(this, TagsElement);\n\t\n\t    var _this4 = _possibleConstructorReturn(this, (TagsElement.__proto__ || Object.getPrototypeOf(TagsElement)).call(this));\n\t\n\t    _this4.handleChange = _this4.handleChange.bind(_this4);\n\t    _this4.handleKeyPress = _this4.handleKeyPress.bind(_this4);\n\t    _this4.handleAdd = _this4.handleAdd.bind(_this4);\n\t    _this4.handleRemove = _this4.handleRemove.bind(_this4);\n\t    _this4.getKeyFromValue = _this4.getKeyFromValue.bind(_this4);\n\t    _this4.canAddItem = _this4.canAddItem.bind(_this4);\n\t    return _this4;\n\t  }\n\t\n\t  // pendingValKey is the placeholder variable for temporarily storing\n\t  // typed or selected items before adding them to the Tags\n\t\n\t\n\t  _createClass(TagsElement, [{\n\t    key: 'handleChange',\n\t    value: function handleChange(e) {\n\t      this.props.onUserInput(this.props.pendingValKey, e.target.value);\n\t    }\n\t    // also add tags if enter key is hit within input field\n\t\n\t  }, {\n\t    key: 'handleKeyPress',\n\t    value: function handleKeyPress(e) {\n\t      if (e.keyCode === 13 || e.which === 13) {\n\t        e.preventDefault();\n\t        this.handleAdd();\n\t      }\n\t    }\n\t\n\t    // send pendingValKey as an argument in order to null out entered item\n\t\n\t  }, {\n\t    key: 'handleAdd',\n\t    value: function handleAdd() {\n\t      var options = this.props.options;\n\t      var value = this.props.value;\n\t      // if using a datalist (search), set value to be the key in options\n\t      if (this.props.useSearch && Object.values(options).indexOf(value) > -1) {\n\t        value = this.getKeyFromValue(value);\n\t      }\n\t      if (this.canAddItem(value)) {\n\t        this.props.onUserAdd(this.props.name, value, this.props.pendingValKey);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'handleRemove',\n\t    value: function handleRemove(e) {\n\t      var value = e.target.getAttribute('data-item');\n\t      this.props.onUserRemove(this.props.name, value);\n\t    }\n\t  }, {\n\t    key: 'getKeyFromValue',\n\t    value: function getKeyFromValue(value) {\n\t      var options = this.props.options;\n\t      return Object.keys(options).find(function (o) {\n\t        return options[o] === value;\n\t      });\n\t    }\n\t\n\t    // helper function to detect if item should be added to Tags\n\t\n\t  }, {\n\t    key: 'canAddItem',\n\t    value: function canAddItem(value) {\n\t      var result = true;\n\t      // reject empty values\n\t      if (!value) {\n\t        result = false;\n\t        // reject if allowDupl is false and item is already in array\n\t      } else if (!this.props.allowDupl && this.props.items.indexOf(value) > -1) {\n\t        result = false;\n\t        // reject if using a strict datalist and value is not in options\n\t      } else if (this.props.useSearch && this.props.strictSearch && Object.keys(this.props.options).indexOf(value) === -1) {\n\t        result = false;\n\t      }\n\t\n\t      return result;\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var disabled = this.props.disabled ? 'disabled' : null;\n\t      var requiredHTML = null;\n\t      var emptyOptionHTML = null;\n\t      var errorMessage = null;\n\t      var elementClass = \"row form-group\";\n\t      // Add required asterix\n\t      if (this.props.required) {\n\t        requiredHTML = React.createElement(\n\t          'span',\n\t          { className: 'text-danger' },\n\t          '*'\n\t        );\n\t      }\n\t\n\t      // Add empty option\n\t      if (this.props.emptyOption) {\n\t        emptyOptionHTML = React.createElement('option', null);\n\t      }\n\t\n\t      if (this.props.errorMessage) {\n\t        errorMessage = React.createElement(\n\t          'span',\n\t          null,\n\t          this.props.errorMessage\n\t        );\n\t        elementClass = 'row form-group has-error';\n\t      }\n\t\n\t      var input = void 0;\n\t      var options = this.props.options;\n\t      // if options are given and useSearch is specified\n\t      if (Object.keys(options).length > 0 && this.props.useSearch) {\n\t        input = React.createElement(\n\t          'div',\n\t          null,\n\t          React.createElement('input', {\n\t            type: 'text',\n\t            name: this.props.name,\n\t            id: this.props.id,\n\t            list: this.props.id + '_list',\n\t            className: 'form-control',\n\t            value: this.props.value || \"\",\n\t            disabled: disabled,\n\t            onChange: this.handleChange,\n\t            onKeyPress: this.handleKeyPress\n\t          }),\n\t          React.createElement(\n\t            'datalist',\n\t            { id: this.props.id + '_list' },\n\t            Object.keys(options).map(function (option) {\n\t              return React.createElement(\n\t                'option',\n\t                { value: options[option], key: option },\n\t                options[option]\n\t              );\n\t            })\n\t          )\n\t        );\n\t        // if options are present but useSearch is false, use normal dropdown\n\t      } else if (Object.keys(options).length > 0) {\n\t        input = React.createElement(\n\t          'select',\n\t          {\n\t            name: this.props.name,\n\t            className: 'form-control',\n\t            id: this.props.id,\n\t            value: this.props.value,\n\t            disabled: disabled,\n\t            onChange: this.handleChange,\n\t            onKeyPress: this.handleKeyPress\n\t          },\n\t          emptyOptionHTML,\n\t          Object.keys(options).map(function (option) {\n\t            return React.createElement(\n\t              'option',\n\t              { value: option, key: option },\n\t              options[option]\n\t            );\n\t          })\n\t        );\n\t        // else, use a text input by default\n\t      } else {\n\t        input = React.createElement('input', {\n\t          type: 'text',\n\t          name: this.props.name,\n\t          id: this.props.id,\n\t          className: 'form-control',\n\t          value: this.props.value || \"\",\n\t          disabled: disabled,\n\t          onChange: this.handleChange,\n\t          onKeyPress: this.handleKeyPress\n\t        });\n\t      }\n\t\n\t      // iterate through added Tags items and render them\n\t      // with deletion button\n\t      var items = this.props.items.map(function (item) {\n\t        var itmTxt = void 0;\n\t        // in event that the passed item is a key of options,\n\t        // render option value\n\t        if (Object.keys(options).length > 0 && options[item] !== undefined) {\n\t          itmTxt = options[item];\n\t          // otherwise just render item as is\n\t        } else {\n\t          itmTxt = item;\n\t        }\n\t        return React.createElement(\n\t          'button',\n\t          {\n\t            className: 'btn btn-info btn-inline',\n\t            type: 'button',\n\t            onClick: this.handleRemove,\n\t            'data-item': item\n\t          },\n\t          itmTxt,\n\t          '\\xA0',\n\t          React.createElement('span', {\n\t            className: 'glyphicon glyphicon-remove',\n\t            'data-item': item\n\t          })\n\t        );\n\t      }, this);\n\t      return React.createElement(\n\t        'div',\n\t        { className: elementClass },\n\t        React.createElement(\n\t          'label',\n\t          { className: 'col-sm-3 control-label', htmlFor: this.props.id },\n\t          this.props.label,\n\t          requiredHTML\n\t        ),\n\t        React.createElement(\n\t          'div',\n\t          { className: 'col-sm-9' },\n\t          items,\n\t          input,\n\t          errorMessage,\n\t          React.createElement(\n\t            'button',\n\t            {\n\t              className: 'btn btn-success btn-add-tag',\n\t              id: this.props.id + 'Add',\n\t              type: 'button',\n\t              onClick: this.handleAdd\n\t            },\n\t            React.createElement('span', { className: 'glyphicon glyphicon-plus' }),\n\t            this.props.btnLabel\n\t          )\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return TagsElement;\n\t}(React.Component);\n\t\n\tTagsElement.propTypes = {\n\t  name: React.PropTypes.string.isRequired,\n\t  id: React.PropTypes.string.isRequired,\n\t  pendingValKey: React.PropTypes.string.isRequired,\n\t  options: React.PropTypes.object,\n\t  items: React.PropTypes.array,\n\t  label: React.PropTypes.string,\n\t  value: React.PropTypes.string,\n\t  class: React.PropTypes.string,\n\t  multiple: React.PropTypes.bool,\n\t  required: React.PropTypes.bool,\n\t  disabled: React.PropTypes.bool,\n\t  emptyOption: React.PropTypes.bool,\n\t  errorMessage: React.PropTypes.string,\n\t  btnLabel: React.PropTypes.string,\n\t  allowDupl: React.PropTypes.bool,\n\t  useSearch: React.PropTypes.bool,\n\t  strictSearch: React.PropTypes.bool,\n\t  onUserInput: React.PropTypes.func,\n\t  onUserAdd: React.PropTypes.func,\n\t  onUserRemove: React.PropTypes.func\n\t};\n\t\n\tTagsElement.defaultProps = {\n\t  name: '',\n\t  options: {},\n\t  items: [],\n\t  label: '',\n\t  value: undefined,\n\t  id: '',\n\t  class: '',\n\t  required: false,\n\t  disabled: false,\n\t  emptyOption: true,\n\t  hasError: false,\n\t  allowDupl: false,\n\t  useSearch: false,\n\t  strictSearch: false, // only accept items specified in options\n\t  errorMessage: '',\n\t  pendingValKey: '',\n\t  btnLabel: 'Add Tag',\n\t  onUserInput: function onUserInput() {\n\t    console.warn('onUserInput() callback is not set');\n\t  },\n\t  onUserAdd: function onUserAdd() {\n\t    console.warn('onUserAdd() callback is not set');\n\t  },\n\t  onUserRemove: function onUserRemove() {\n\t    console.warn('onUserRemove() callback is not set');\n\t  }\n\t};\n\t\n\texports.default = ProjectFormFields;\n\n/***/ },\n\n/***/ 28:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _projectFields = __webpack_require__(26);\n\t\n\tvar _projectFields2 = _interopRequireDefault(_projectFields);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar ViewProject = function (_React$Component) {\n\t  _inherits(ViewProject, _React$Component);\n\t\n\t  function ViewProject(props) {\n\t    _classCallCheck(this, ViewProject);\n\t\n\t    var _this = _possibleConstructorReturn(this, (ViewProject.__proto__ || Object.getPrototypeOf(ViewProject)).call(this, props));\n\t\n\t    _this.state = {\n\t      formData: {},\n\t      formErrors: {},\n\t      numFiles: 0,\n\t      isLoaded: false\n\t    };\n\t    _this.handleSubmit = _this.handleSubmit.bind(_this);\n\t    _this.setFormData = _this.setFormData.bind(_this);\n\t    _this.setFileData = _this.setFileData.bind(_this);\n\t    _this.createFileDownloadLinks = _this.createFileDownloadLinks.bind(_this);\n\t    _this.createMenuFilterLinks = _this.createMenuFilterLinks.bind(_this);\n\t    _this.createStaticComponents = _this.createStaticComponents.bind(_this);\n\t    _this.createEditableComponents = _this.createEditableComponents.bind(_this);\n\t    _this.addListItem = _this.addListItem.bind(_this);\n\t    _this.removeListItem = _this.removeListItem.bind(_this);\n\t    _this.validateEmail = _this.validateEmail.bind(_this);\n\t    _this.fetchData = _this.fetchData.bind(_this);\n\t    return _this;\n\t  }\n\t\n\t  _createClass(ViewProject, [{\n\t    key: 'validateEmail',\n\t    value: function validateEmail(field, email) {\n\t      var formErrors = this.state.formErrors;\n\t\n\t      // don't supply error if email is blank\n\t      if (email === '' || email === null || email === undefined) {\n\t        delete formErrors[field];\n\t        // if email is invalid, set error, else nullify error\n\t      } else if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(email) === false) {\n\t        formErrors[field] = 'Invalid email';\n\t      } else {\n\t        delete formErrors[field];\n\t      }\n\t      this.setState({ formErrors: formErrors });\n\t    }\n\t  }, {\n\t    key: 'handleSubmit',\n\t    value: function handleSubmit(e) {\n\t      e.preventDefault();\n\t\n\t      if (Object.keys(this.state.formErrors).length > 0) {\n\t        swal('Please fix any remaining form errors before submission', '', 'error');\n\t        return;\n\t      }\n\t      var formData = this.state.formData;\n\t      var formObj = new FormData();\n\t      for (var key in formData) {\n\t        if (formData.hasOwnProperty(key) && formData[key] !== \"\") {\n\t          var formVal = void 0;\n\t          if (Array.isArray(formData[key])) {\n\t            formVal = JSON.stringify(formData[key]);\n\t          } else {\n\t            formVal = formData[key];\n\t          }\n\t          formObj.append(key, formVal);\n\t        }\n\t      }\n\t\n\t      $.ajax({\n\t        type: 'POST',\n\t        url: this.props.action,\n\t        data: formObj,\n\t        cache: false,\n\t        contentType: false,\n\t        processData: false,\n\t        success: function success() {\n\t          swal(\"Edit Successful!\", \"\", \"success\");\n\t        },\n\t        error: function error(jqXHR) {\n\t          console.error(jqXHR);\n\t          var resp = \"Something went wrong!\";\n\t          try {\n\t            resp = JSON.parse(jqXHR.responseText).message;\n\t          } catch (e) {\n\t            console.error(e);\n\t          }\n\t          swal(\"Edit failed!\", resp, \"error\");\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'fetchData',\n\t    value: function fetchData() {\n\t      var self = this;\n\t      $.ajax(this.props.DataURL, {\n\t        dataType: 'json',\n\t        success: function success(data) {\n\t          var formData = {\n\t            title: data.title,\n\t            description: data.description,\n\t            leadInvestigator: data.leadInvestigator,\n\t            leadInvestigatorEmail: data.leadInvestigatorEmail,\n\t            notifyLead: false,\n\t            status: data.status,\n\t            voiFields: data.voi,\n\t            keywords: data.keywords,\n\t            collaborators: data.collaborators,\n\t            usersWithEditPerm: data.usersWithEditPerm,\n\t            rejectedReason: data.rejectedReason\n\t          };\n\t          // set formdata for file meta data\n\t          if (data.files) {\n\t            data.files.forEach(function (f) {\n\t              var existFileFlag = 'existingUpload_';\n\t              var pubType = existFileFlag + 'publicationType_' + f.PublicationUploadID;\n\t              var pubCit = existFileFlag + 'publicationCitation_' + f.PublicationUploadID;\n\t              var pubVer = existFileFlag + 'publicationVersion_' + f.PublicationUploadID;\n\t              formData[pubType] = f.PublicationUploadTypeID;\n\t              formData[pubCit] = f.Citation;\n\t              formData[pubVer] = f.Version;\n\t            });\n\t          }\n\t\n\t          self.setState({\n\t            formData: formData,\n\t            users: data.users,\n\t            statusOpts: data.statusOpts,\n\t            userCanEdit: data.userCanEdit,\n\t            allVOIs: data.allVOIs,\n\t            allKWs: data.allKWs,\n\t            allCollabs: data.allCollabs,\n\t            uploadTypes: data.uploadTypes,\n\t            files: data.files,\n\t            isLoaded: true\n\t          });\n\t        },\n\t        error: function error(_error, errorCode, errorMsg) {\n\t          console.error(_error, errorCode, errorMsg);\n\t          self.setState({\n\t            error: 'An error occurred when loading the form!'\n\t          });\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      this.fetchData();\n\t    }\n\t  }, {\n\t    key: 'createFileDownloadLinks',\n\t    value: function createFileDownloadLinks() {\n\t      var files = this.state.files;\n\t      var toReturn = [];\n\t      files.forEach(function (f) {\n\t        var download = loris.BaseURL + '/publication/ajax/FileDownload.php?File=' + f.URL;\n\t        var link = React.createElement(\n\t          'a',\n\t          { href: download },\n\t          f.URL\n\t        );\n\t        var uploadType = this.state.uploadTypes[f.PublicationUploadTypeID];\n\t        toReturn.push(React.createElement(StaticElement, {\n\t          label: 'Download ' + uploadType,\n\t          text: link\n\t        }));\n\t        if (f.Citation) {\n\t          toReturn.push(React.createElement(StaticElement, {\n\t            label: 'Citation',\n\t            text: f.Citation\n\t          }));\n\t        }\n\t        if (f.Version) {\n\t          toReturn.push(React.createElement(StaticElement, {\n\t            label: 'Version',\n\t            text: f.Version\n\t          }));\n\t        }\n\t      }, this);\n\t\n\t      return toReturn;\n\t    }\n\t  }, {\n\t    key: 'createMenuFilterLinks',\n\t    value: function createMenuFilterLinks(stringArr, filterVar) {\n\t      var links = [];\n\t      stringArr.forEach(function (value) {\n\t        links.push(React.createElement(\n\t          'span',\n\t          null,\n\t          React.createElement(\n\t            'a',\n\t            {\n\t              href: loris.BaseURL + \"/publication/?\" + filterVar + \"=\" + value\n\t            },\n\t            value\n\t          ),\n\t          '; \\xA0'\n\t        ));\n\t      });\n\t\n\t      return links;\n\t    }\n\t  }, {\n\t    key: 'createStaticComponents',\n\t    value: function createStaticComponents() {\n\t      var collaborators = void 0;\n\t      var keywords = void 0;\n\t      var vois = void 0;\n\t      var collabLinks = void 0;\n\t      var keywordLinks = void 0;\n\t      var voiLinks = void 0;\n\t      var files = void 0;\n\t\n\t      if (this.state.formData.collaborators.length > 0) {\n\t        collabLinks = this.createMenuFilterLinks(this.state.formData.collaborators.map(function (c) {\n\t          return c.name;\n\t        }), 'collaborators');\n\t        collaborators = React.createElement(StaticElement, {\n\t          name: 'collaborators',\n\t          label: 'Collaborators',\n\t          text: collabLinks\n\t        });\n\t      }\n\t\n\t      if (this.state.formData.keywords.length > 0) {\n\t        keywordLinks = this.createMenuFilterLinks(this.state.formData.keywords, 'keywords');\n\t        keywords = React.createElement(StaticElement, {\n\t          name: 'keywords',\n\t          label: 'Keywords',\n\t          text: keywordLinks\n\t        });\n\t      }\n\t\n\t      if (this.state.formData.voiFields.length > 0) {\n\t        voiLinks = this.createMenuFilterLinks(this.state.formData.voiFields, 'voi');\n\t        vois = React.createElement(StaticElement, {\n\t          name: 'variablesOfInterest',\n\t          label: 'Variables of Interest',\n\t          text: voiLinks\n\t        });\n\t      }\n\t\n\t      if (this.state.files.length > 0) {\n\t        files = this.createFileDownloadLinks();\n\t      }\n\t      return React.createElement(\n\t        'div',\n\t        null,\n\t        React.createElement(StaticElement, {\n\t          name: 'description',\n\t          label: 'Description',\n\t          text: this.state.formData.description\n\t        }),\n\t        React.createElement(StaticElement, {\n\t          name: 'leadInvestigator',\n\t          label: 'Lead Investigator',\n\t          text: this.state.formData.leadInvestigator\n\t        }),\n\t        React.createElement(StaticElement, {\n\t          name: 'leadInvestigatorEmail',\n\t          label: 'Lead Investigator Email',\n\t          text: this.state.formData.leadInvestigatorEmail\n\t        }),\n\t        collaborators,\n\t        keywords,\n\t        vois,\n\t        files\n\t      );\n\t    }\n\t  }, {\n\t    key: 'createEditableComponents',\n\t    value: function createEditableComponents() {\n\t      return React.createElement(\n\t        'div',\n\t        null,\n\t        React.createElement(_projectFields2.default, {\n\t          files: this.state.files,\n\t          numFiles: this.state.numFiles,\n\t          formData: this.state.formData,\n\t          formErrors: this.state.formErrors,\n\t          setFormData: this.setFormData,\n\t          setFileData: this.setFileData,\n\t          addListItem: this.addListItem,\n\t          removeListItem: this.removeListItem,\n\t          validateEmail: this.validateEmail,\n\t          toggleEmailNotify: this.toggleEmailNotify,\n\t          uploadTypes: this.state.uploadTypes,\n\t          users: this.state.users,\n\t          allVOIs: this.state.allVOIs,\n\t          allKWs: this.state.allKWs,\n\t          allCollabs: this.state.allCollabs,\n\t          editMode: true,\n\t          fetchData: this.fetchData\n\t        })\n\t      );\n\t    }\n\t  }, {\n\t    key: 'addListItem',\n\t    value: function addListItem(formElement, value, pendingValKey) {\n\t      var formData = this.state.formData;\n\t      var listItems = formData[formElement] || [];\n\t      listItems.push(value);\n\t      formData[formElement] = listItems;\n\t      formData[pendingValKey] = null;\n\t      this.setState({\n\t        formData: formData\n\t      });\n\t    }\n\t  }, {\n\t    key: 'removeListItem',\n\t    value: function removeListItem(formElement, value) {\n\t      var formData = this.state.formData;\n\t      var listItems = formData[formElement];\n\t      var index = listItems.indexOf(value);\n\t\n\t      if (index > -1) {\n\t        listItems.splice(index, 1);\n\t\n\t        formData[formElement] = listItems;\n\t        this.setState({\n\t          formData: formData\n\t        });\n\t      }\n\t    }\n\t  }, {\n\t    key: 'setFormData',\n\t    value: function setFormData(formElement, value) {\n\t      var formData = this.state.formData;\n\t      formData[formElement] = value;\n\t      this.setState({\n\t        formData: formData\n\t      });\n\t    }\n\t  }, {\n\t    key: 'setFileData',\n\t    value: function setFileData(formElement, value) {\n\t      var numFiles = this.state.numFiles;\n\t      if (!this.state.formData[formElement]) {\n\t        numFiles += 1;\n\t        this.setState({ numFiles: numFiles });\n\t      }\n\t      this.setFormData(formElement, value);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      if (!this.state.isLoaded) {\n\t        return React.createElement(\n\t          'button',\n\t          { className: 'btn-info has-spinner' },\n\t          'Loading',\n\t          React.createElement('span', {\n\t            className: 'glyphicon glyphicon-refresh glyphicon-refresh-animate' })\n\t        );\n\t      }\n\t      var statusElement = void 0;\n\t      var rejectReason = void 0;\n\t      var reviewBtn = void 0;\n\t      var statusID = this.state.formData.status;\n\t      var status = this.state.statusOpts[statusID];\n\t      if (loris.userHasPermission('publication_approve')) {\n\t        // if user has publication_approve permission, this means that status\n\t        // in formData reflects the ID, not the description\n\t        statusElement = React.createElement(SelectElement, {\n\t          name: 'status',\n\t          label: 'Status',\n\t          id: 'status',\n\t          value: this.state.formData.status,\n\t          onUserInput: this.setFormData,\n\t          required: true,\n\t          options: this.state.statusOpts,\n\t          emptyOption: false\n\t        });\n\t\n\t        if (status === 'Rejected') {\n\t          rejectReason = React.createElement(TextboxElement, {\n\t            name: 'rejectedReason',\n\t            label: 'Reason for rejection',\n\t            value: this.state.formData.rejectedReason,\n\t            onUserInput: this.setFormData,\n\t            required: true\n\t          });\n\t        }\n\t        // Set review button only if user does not have edit permission\n\t        // to avoid having 2 submit buttons\n\t        reviewBtn = this.state.userCanEdit ? undefined : React.createElement(ButtonElement, { label: 'Submit' });\n\t      } else {\n\t        var statClassMap = {\n\t          Pending: 'text-warning',\n\t          Approved: 'text-success',\n\t          Rejected: 'text-danger'\n\t        };\n\t        var statusText = React.createElement(\n\t          'span',\n\t          { className: statClassMap[status] },\n\t          React.createElement(\n\t            'strong',\n\t            null,\n\t            status\n\t          )\n\t        );\n\t        statusElement = React.createElement(StaticElement, {\n\t          label: 'Status',\n\t          text: statusText\n\t        });\n\t        if (status === 'Rejected') {\n\t          rejectReason = React.createElement(StaticElement, {\n\t            label: 'Reason for rejection',\n\t            text: this.state.formData.rejectedReason\n\t          });\n\t        }\n\t      }\n\t\n\t      var formElements = void 0;\n\t      if (this.state.userCanEdit) {\n\t        formElements = this.createEditableComponents();\n\t      } else {\n\t        formElements = this.createStaticComponents();\n\t      }\n\t\n\t      // only allow the title to be editable if user has editing access\n\t      // and proposal is still unreviewed\n\t      var title = void 0;\n\t      if (this.state.userCanEdit && status === 'Pending') {\n\t        title = React.createElement(TextboxElement, {\n\t          name: 'title',\n\t          label: 'Title',\n\t          onUserInput: this.setFormData,\n\t          required: true,\n\t          value: this.state.formData.title\n\t        });\n\t      } else {\n\t        title = React.createElement(\n\t          'div',\n\t          { className: 'row' },\n\t          React.createElement('div', { className: 'col-md-3' }),\n\t          React.createElement(\n\t            'h3',\n\t            { className: 'col-md-9' },\n\t            this.state.formData.title\n\t          )\n\t        );\n\t      }\n\t\n\t      return React.createElement(\n\t        'div',\n\t        { className: 'row' },\n\t        React.createElement(\n\t          'div',\n\t          { className: 'col-md-12 col-lg-12' },\n\t          React.createElement(\n\t            FormElement,\n\t            {\n\t              name: 'viewProject',\n\t              onSubmit: this.handleSubmit,\n\t              ref: 'form'\n\t            },\n\t            title,\n\t            statusElement,\n\t            rejectReason,\n\t            formElements,\n\t            reviewBtn\n\t          )\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return ViewProject;\n\t}(React.Component);\n\t\n\texports.default = ViewProject;\n\n/***/ }\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// modules/publication/js/viewProjectIndex.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b00c1a08211112abecb8","import ViewProject from './viewProject';\n\nconst args = QueryString.get(document.currentScript.src);\n\n$(function() {\n  const viewProject = (\n    <div className=\"page-edit-form\">\n      <div className=\"row\">\n        <div className=\"col-md-9 col-lg-7\">\n          <ViewProject\n            DataURL={`${loris.BaseURL}/publication/ajax/getData.php?action=getProjectData&id=${args.id}`}\n            action={`${loris.BaseURL}/publication/ajax/FileUpload.php?action=editProject&id=${args.id}`}\n          />\n        </div>\n      </div>\n    </div>\n  );\n\n  ReactDOM.render(viewProject, document.getElementById(\"lorisworkspace\"));\n});\n\n\n\n// WEBPACK FOOTER //\n// ./modules/publication/jsx/viewProjectIndex.js","class EmailElement extends React.Component {\n  constructor() {\n    super();\n    this.handleChange = this.handleChange.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n  }\n\n  handleChange(e) {\n    this.props.onUserInput(this.props.name, e.target.value);\n  }\n\n  handleBlur(e) {\n    this.props.onUserBlur(this.props.name, e.target.value);\n  }\n\n  render() {\n    let disabled = this.props.disabled ? 'disabled' : null;\n    let required = this.props.required ? 'required' : null;\n    let errorMessage = null;\n    let requiredHTML = null;\n    let elementClass = 'row form-group';\n\n    // Add required asterix\n    if (required) {\n      requiredHTML = <span className=\"text-danger\">*</span>;\n    }\n\n    // Add error message\n    if (this.props.errorMessage) {\n      errorMessage = <span>{this.props.errorMessage}</span>;\n      elementClass = 'row form-group has-error';\n    }\n\n    return (\n      <div className={elementClass}>\n        <label className=\"col-sm-3 control-label\" htmlFor={this.props.id}>\n          {this.props.label}\n          {requiredHTML}\n        </label>\n        <div className=\"col-sm-7\">\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            name={this.props.name}\n            id={this.props.id}\n            value={this.props.value || \"\"}\n            required={required}\n            disabled={disabled}\n            onChange={this.handleChange}\n            onBlur={this.handleBlur}\n          />\n          {errorMessage}\n        </div>\n        <div className=\"col-sm-2\">\n        <span>\n          <input\n            name={this.props.name + '_notify'}\n            type=\"checkbox\"\n            onChange={this.props.toggleEmailNotify}\n            value={this.props.addressee}\n          />\n          <span>Send email notification?</span>\n        </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nEmailElement.defaultProps = {\n  name: '',\n  label: '',\n  value: '',\n  addressee: '',\n  id: null,\n  disabled: false,\n  required: false,\n  errorMessage: '',\n  onUserInput: function() {\n    console.warn('onUserInput() callback is not set');\n  },\n  onUserBlur: function() {\n  }\n};\n\n// This class combines the common form elements between\n// Edit mode and initial Project Proposal/Creation mode\nclass ProjectFormFields extends React.Component {\n  constructor() {\n    super();\n    this.createCollabEmailFields = this.createCollabEmailFields.bind(this);\n    this.deleteUpload = this.deleteUpload.bind(this);\n    this.createFileFields = this.createFileFields.bind(this);\n    this.addCollaborator = this.addCollaborator.bind(this);\n    this.removeCollaborator = this.removeCollaborator.bind(this);\n    this.setCollaboratorEmail = this.setCollaboratorEmail.bind(this);\n    this.toggleEmailNotify = this.toggleEmailNotify.bind(this);\n  }\n\n  deleteUpload(uploadID) {\n    let self = this;\n    swal({\n      title: \"Are you sure?\",\n      text: \"Are you sure you want to delete this file?\",\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: 'Yes, I am sure!',\n      cancelButtonText: \"No, cancel it!\"\n    },\n      function(willDelete) {\n        if (willDelete) {\n          let url = loris.BaseURL + '/publication/ajax/FileDelete.php?uploadID=' + uploadID;\n          $.ajax(\n            url,\n            {\n              method: 'DELETE',\n              success: function() {\n                self.props.fetchData();\n              }\n            });\n        }\n      });\n  }\n\n  createFileFields() {\n    let fileFields = [];\n    // Create download link & edit fields for existing files\n    if (this.props.files) {\n      this.props.files.forEach(function(f) {\n        let downloadURL = loris.BaseURL + '/publication/ajax/FileDownload.php?File=' + encodeURIComponent(f.URL);\n        let link = (\n          <span>\n            <a href={downloadURL}>{f.URL}</a>\n            &nbsp;&nbsp;\n            <span\n              className=\"glyphicon glyphicon-remove\"\n              style={{cursor: 'pointer'}}\n              onClick={() => this.deleteUpload(f.PublicationUploadID)}\n            />\n          </span>\n        );\n        let existFileFlag = 'existingUpload_';\n        let pubType = existFileFlag + 'publicationType_' + f.PublicationUploadID;\n        let pubCit = existFileFlag + 'publicationCitation_' + f.PublicationUploadID;\n        let pubVer = existFileFlag + 'publicationVersion_' + f.PublicationUploadID;\n        let pubTypeStr = this.props.uploadTypes[this.props.formData[pubType]];\n        fileFields.push(\n          <div>\n            <StaticElement\n              label={pubTypeStr}\n              text={link}\n            />\n            <TextboxElement\n              name={pubCit}\n              label=\"Citation\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[pubCit]}\n            />\n            <TextboxElement\n              name={pubVer}\n              label=\"Publication Version\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[pubVer]}\n            />\n          </div>\n        );\n      }, this);\n    }\n    // create fields for new files\n    for (let i = 0; i <= this.props.numFiles; i++) {\n      let fileName = \"file_\" + i;\n      fileFields.push(\n        <FileElement\n          name={fileName}\n          id={\"publicationUploadEl_\" + i}\n          onUserInput={this.props.setFileData}\n          label=\"File to upload\"\n          value={this.props.formData[fileName]}\n        />\n      );\n      if (this.props.formData[fileName]) {\n        let publicationType = \"publicationType_\" + i;\n        let publicationCitation = \"publicationCitation_\" + i;\n        let publicationVersion = \"publicationVersion_\" + i;\n        fileFields.push(\n          <div>\n            <SelectElement\n              name={publicationType}\n              label=\"Publication Type\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[publicationType]}\n              options={this.props.uploadTypes}\n              required={true}\n            />\n            <TextboxElement\n              name={publicationCitation}\n              label=\"Citation\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[publicationCitation]}\n            />\n            <TextboxElement\n              name={publicationVersion}\n              label=\"Publication Version\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[publicationVersion]}\n            />\n          </div>\n        );\n      }\n    }\n\n    return fileFields;\n  }\n\n  createCollabEmailFields() {\n    let collabEmails = [];\n    if (this.props.formData.collaborators) {\n      this.props.formData.collaborators.forEach(\n        function(c, i) {\n          let name = 'collabEmail_' + c.name;\n          collabEmails.push(\n            <EmailElement\n              name={name}\n              label={c.name + (c.name.slice(-1) === 's' ? \"'\" : \"'s\") + \" Email\"}\n              onUserInput={this.setCollaboratorEmail}\n              onUserBlur={this.props.validateEmail}\n              toggleEmailNotify={this.toggleEmailNotify}\n              errorMessage={this.props.formErrors[name]}\n              required={false}\n              value={this.props.formData.collaborators[i].email}\n              addressee={c.name}\n            />\n          );\n        }, this);\n    }\n    return collabEmails;\n  }\n\n  addCollaborator(formElement, value, pendingValKey) {\n    let collaborators = this.props.formData.collaborators || [];\n    collaborators.push(\n      {\n        name: value,\n        email: null,\n        notify: false\n      }\n    );\n\n    this.props.setFormData('collaborators', collaborators);\n    this.props.setFormData(pendingValKey, null);\n  }\n\n  removeCollaborator(formElement, value) {\n    let collaborators = this.props.formData.collaborators || [];\n    collaborators = collaborators.filter(c => c.name !== value);\n    this.props.setFormData('collaborators', collaborators);\n  }\n\n  setCollaboratorEmail(formElement, value) {\n    let collabName = formElement.split('_')[1];\n    let collaborators = this.props.formData.collaborators;\n    let i = collaborators.findIndex(c => c.name === collabName);\n    collaborators[i].email = value;\n    this.props.setFormData('collaborators', collaborators);\n  }\n\n  toggleEmailNotify(e) {\n    if (e.target.name.indexOf('collabEmail') > -1) {\n      let collaborators = this.props.formData.collaborators;\n      let collabName = e.target.value;\n      let i = collaborators.findIndex(c => c.name === collabName);\n      collaborators[i].notify = !collaborators[i].notify;\n      this.props.setFormData('collaborators', collaborators);\n    } else if (e.target.name === 'leadInvestigatorEmail_notify') {\n      let currNotify = this.props.formData.notifyLead || false;\n      this.props.setFormData('notifyLead', !currNotify);\n    }\n  }\n\n  render() {\n    let collabEmails = this.createCollabEmailFields();\n    let fileFields = this.createFileFields();\n\n    let voiHelp = (<div>For help finding variables of interest, consult\n      the <a href={loris.BaseURL + '/datadict/'}>Data Dictionary</a>\n      </div>);\n    let collabNames = [];\n    if (this.props.formData.collaborators) {\n      collabNames = this.props.formData.collaborators.map(c => c.name);\n    }\n\n    let voiTypeOptions = {\n      All: 'All',\n      Behavioral: 'Behavioral',\n      Imaging: 'Imaging'\n    };\n\n    const allVOIs = this.props.allVOIs;\n    let voiOptions = {};\n    let type = this.props.formData.voiType;\n    if (type && type !== 'All') {\n      voiOptions = this.props.allVOIs[type];\n    } else {\n      // maintain behavioral VoIs by creating an object copy\n      const bvlCopy = Object.assign({}, allVOIs.Behavioral);\n      voiOptions = Object.assign(bvlCopy, allVOIs.Imaging);\n    }\n\n    return (\n      <div>\n        <TextareaElement\n          name=\"description\"\n          label=\"Description\"\n          onUserInput={this.props.setFormData}\n          required={true}\n          value={this.props.formData.description}\n        />\n        <TextboxElement\n          name=\"leadInvestigator\"\n          label=\"Lead Investigator\"\n          onUserInput={this.props.setFormData}\n          required={true}\n          value={this.props.formData.leadInvestigator}\n        />\n        <EmailElement\n          name=\"leadInvestigatorEmail\"\n          label=\"Lead Investigator Email\"\n          onUserInput={this.props.setFormData}\n          onUserBlur={this.props.validateEmail}\n          toggleEmailNotify={this.toggleEmailNotify}\n          errorMessage={this.props.formErrors.leadInvestigatorEmail}\n          required={true}\n          value={this.props.formData.leadInvestigatorEmail}\n          addressee=\"leadInvestigator\"\n        />\n        <TagsElement\n          name=\"usersWithEditPerm\"\n          id=\"usersWithEditPerm\"\n          label=\"LORIS Users with Edit Permission\"\n          options={this.props.users}\n          useSearch={true}\n          strictSearch={true}\n          onUserInput={this.props.setFormData}\n          onUserAdd={this.props.addListItem}\n          onUserRemove={this.props.removeListItem}\n          value={this.props.formData.pendingUWEP}\n          pendingValKey=\"pendingUWEP\"\n          items={this.props.formData.usersWithEditPerm}\n          btnLabel=\"Add User\"\n        />\n        <TagsElement\n          name=\"collaborators\"\n          id=\"collaborators\"\n          label=\"Collaborators\"\n          options={this.props.allCollabs}\n          useSearch={true}\n          strictSearch={false}\n          onUserInput={this.props.setFormData}\n          onUserAdd={this.addCollaborator}\n          onUserRemove={this.removeCollaborator}\n          value={this.props.formData.pendingCollab}\n          pendingValKey=\"pendingCollab\"\n          items={collabNames}\n          btnLabel=\"Add Collaborator\"\n        />\n        {collabEmails}\n        <TagsElement\n          name=\"keywords\"\n          id=\"keywords\"\n          label=\"Keywords\"\n          options={this.props.allKWs}\n          useSearch={true}\n          strictSearch={false}\n          onUserInput={this.props.setFormData}\n          onUserAdd={this.props.addListItem}\n          onUserRemove={this.props.removeListItem}\n          value={this.props.formData.pendingKWItem}\n          pendingValKey=\"pendingKWItem\"\n          items={this.props.formData.keywords}\n          btnLabel=\"Add Keyword\"\n        />\n        <SelectElement\n          name=\"voiType\"\n          label=\"Type of Variables of Interest\"\n          options={voiTypeOptions}\n          onUserInput={this.props.setFormData}\n          value={this.props.formData.voiType}\n          emptyOption={false}\n        />\n        <TagsElement\n          name=\"voiFields\"\n          id=\"voiFields\"\n          label=\"Variables of Interest\"\n          useSearch={true}\n          strictSearch={true}\n          onUserInput={this.props.setFormData}\n          onUserAdd={this.props.addListItem}\n          onUserRemove={this.props.removeListItem}\n          required={false}\n          value={this.props.formData.pendingItemVF}\n          options={voiOptions}\n          pendingValKey=\"pendingItemVF\"\n          items={this.props.formData.voiFields}\n          btnLabel=\"Add Variable of Interest\"\n        />\n        <StaticElement\n          text={voiHelp}\n        />\n        {fileFields}\n        <ButtonElement label={this.props.editMode ? \"Submit\" : \"Propose Project\"}/>\n      </div>\n    );\n  }\n}\n/**\n * Tags Component\n * Allows for multiple values to be entered for a single field\n *\n * Comes in 3 flavors:\n * 1: If options are passed and useSearch = true\n *    input field is rendered as a searchable dropdown\n * 2: If only options are passed, input is rendered as\n *    a normal dropdown select\n * 3: Without options, input is a normal, free text input\n */\n\nclass TagsElement extends React.Component {\n    constructor() {\n        super();\n        this.handleChange = this.handleChange.bind(this);\n        this.handleKeyPress = this.handleKeyPress.bind(this);\n        this.handleAdd = this.handleAdd.bind(this);\n        this.handleRemove = this.handleRemove.bind(this);\n        this.getKeyFromValue = this.getKeyFromValue.bind(this);\n        this.canAddItem = this.canAddItem.bind(this);\n    }\n\n    // pendingValKey is the placeholder variable for temporarily storing\n    // typed or selected items before adding them to the Tags\n    handleChange(e) {\n        this.props.onUserInput(this.props.pendingValKey, e.target.value);\n    }\n    // also add tags if enter key is hit within input field\n    handleKeyPress(e) {\n        if (e.keyCode === 13 || e.which === 13) {\n            e.preventDefault();\n            this.handleAdd();\n        }\n    }\n\n    // send pendingValKey as an argument in order to null out entered item\n    handleAdd() {\n        let options = this.props.options;\n        let value = this.props.value;\n        // if using a datalist (search), set value to be the key in options\n        if (this.props.useSearch && Object.values(options).indexOf(value) > -1) {\n            value = this.getKeyFromValue(value);\n        }\n        if (this.canAddItem(value)) {\n            this.props.onUserAdd(this.props.name, value, this.props.pendingValKey);\n        }\n    }\n\n    handleRemove(e) {\n        let value = e.target.getAttribute('data-item');\n        this.props.onUserRemove(this.props.name, value);\n    }\n\n    getKeyFromValue(value) {\n        let options = this.props.options;\n        return Object.keys(options).find(function(o) {\n            return options[o] === value;\n        });\n    }\n\n    // helper function to detect if item should be added to Tags\n    canAddItem(value) {\n        let result = true;\n        // reject empty values\n        if (!value) {\n            result = false;\n            // reject if allowDupl is false and item is already in array\n        } else if (!this.props.allowDupl && this.props.items.indexOf(value) > -1) {\n            result = false;\n            // reject if using a strict datalist and value is not in options\n        } else if (this.props.useSearch &&\n            this.props.strictSearch &&\n            Object.keys(this.props.options).indexOf(value) === -1\n        ) {\n            result = false;\n        }\n\n        return result;\n    }\n\n    render() {\n        let disabled = this.props.disabled ? 'disabled' : null;\n        let requiredHTML = null;\n        let emptyOptionHTML = null;\n        let errorMessage = null;\n        let elementClass = \"row form-group\";\n        // Add required asterix\n        if (this.props.required) {\n            requiredHTML = <span className=\"text-danger\">*</span>;\n        }\n\n        // Add empty option\n        if (this.props.emptyOption) {\n            emptyOptionHTML = <option></option>;\n        }\n\n        if (this.props.errorMessage) {\n            errorMessage = <span>{this.props.errorMessage}</span>;\n            elementClass = 'row form-group has-error';\n        }\n\n        let input;\n        let options = this.props.options;\n        // if options are given and useSearch is specified\n        if (Object.keys(options).length > 0 && this.props.useSearch) {\n            input = (\n                <div>\n                    <input\n                        type=\"text\"\n                        name={this.props.name}\n                        id={this.props.id}\n                        list={this.props.id + '_list'}\n                        className=\"form-control\"\n                        value={this.props.value || \"\"}\n                        disabled={disabled}\n                        onChange={this.handleChange}\n                        onKeyPress={this.handleKeyPress}\n                    />\n                    <datalist id={this.props.id + '_list'}>\n                        {Object.keys(options).map(function(option) {\n                            return (\n                                <option value={options[option]} key={option}>{options[option]}</option>\n                            );\n                        })}\n                    </datalist>\n                </div>\n            );\n            // if options are present but useSearch is false, use normal dropdown\n        } else if (Object.keys(options).length > 0) {\n            input = <select\n                name={this.props.name}\n                className=\"form-control\"\n                id={this.props.id}\n                value={this.props.value}\n                disabled={disabled}\n                onChange={this.handleChange}\n                onKeyPress={this.handleKeyPress}\n            >\n                {emptyOptionHTML}\n                {Object.keys(options).map(function(option) {\n                    return (\n                        <option value={option} key={option}>{options[option]}</option>\n                    );\n                })}\n            </select>;\n            // else, use a text input by default\n        } else {\n            input = <input\n                type=\"text\"\n                name={this.props.name}\n                id={this.props.id}\n                className=\"form-control\"\n                value={this.props.value || \"\"}\n                disabled={disabled}\n                onChange={this.handleChange}\n                onKeyPress={this.handleKeyPress}\n            />;\n        }\n\n        // iterate through added Tags items and render them\n        // with deletion button\n        let items = this.props.items.map(function(item) {\n            let itmTxt;\n            // in event that the passed item is a key of options,\n            // render option value\n            if (Object.keys(options).length > 0 && options[item] !== undefined) {\n                itmTxt = options[item];\n                // otherwise just render item as is\n            } else {\n                itmTxt = item;\n            }\n            return (\n                <button\n                    className=\"btn btn-info btn-inline\"\n                    type=\"button\"\n                    onClick={this.handleRemove}\n                    data-item={item}\n                >\n                    {itmTxt}\n                    &nbsp;\n                    <span\n                        className=\"glyphicon glyphicon-remove\"\n                        data-item={item}\n                    />\n                </button>\n            );\n        }, this);\n        return (\n            <div className={elementClass}>\n                <label className=\"col-sm-3 control-label\" htmlFor={this.props.id}>\n                    {this.props.label}\n                    {requiredHTML}\n                </label>\n                <div className=\"col-sm-9\">\n                    {items}\n                    {input}\n                    {errorMessage}\n                    <button\n                        className=\"btn btn-success btn-add-tag\"\n                        id={this.props.id + 'Add'}\n                        type=\"button\"\n                        onClick={this.handleAdd}\n                    >\n                        <span className=\"glyphicon glyphicon-plus\"/>\n                        {this.props.btnLabel}\n                    </button>\n                </div>\n            </div>\n        );\n    }\n}\n\nTagsElement.propTypes = {\n    name: React.PropTypes.string.isRequired,\n    id: React.PropTypes.string.isRequired,\n    pendingValKey: React.PropTypes.string.isRequired,\n    options: React.PropTypes.object,\n    items: React.PropTypes.array,\n    label: React.PropTypes.string,\n    value: React.PropTypes.string,\n    class: React.PropTypes.string,\n    multiple: React.PropTypes.bool,\n    required: React.PropTypes.bool,\n    disabled: React.PropTypes.bool,\n    emptyOption: React.PropTypes.bool,\n    errorMessage: React.PropTypes.string,\n    btnLabel: React.PropTypes.string,\n    allowDupl: React.PropTypes.bool,\n    useSearch: React.PropTypes.bool,\n    strictSearch: React.PropTypes.bool,\n    onUserInput: React.PropTypes.func,\n    onUserAdd: React.PropTypes.func,\n    onUserRemove: React.PropTypes.func\n};\n\nTagsElement.defaultProps = {\n    name: '',\n    options: {},\n    items: [],\n    label: '',\n    value: undefined,\n    id: '',\n    class: '',\n    required: false,\n    disabled: false,\n    emptyOption: true,\n    hasError: false,\n    allowDupl: false,\n    useSearch: false,\n    strictSearch: false, // only accept items specified in options\n    errorMessage: '',\n    pendingValKey: '',\n    btnLabel: 'Add Tag',\n    onUserInput: function() {\n        console.warn('onUserInput() callback is not set');\n    },\n    onUserAdd: function() {\n        console.warn('onUserAdd() callback is not set');\n    },\n    onUserRemove: function() {\n        console.warn('onUserRemove() callback is not set');\n    }\n};\n\n\nexport default ProjectFormFields;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/publication/jsx/projectFields.js","import ProjectFormFields from './projectFields';\n\nclass ViewProject extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      formData: {},\n      formErrors: {},\n      numFiles: 0,\n      isLoaded: false\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.setFormData = this.setFormData.bind(this);\n    this.setFileData = this.setFileData.bind(this);\n    this.createFileDownloadLinks = this.createFileDownloadLinks.bind(this);\n    this.createMenuFilterLinks = this.createMenuFilterLinks.bind(this);\n    this.createStaticComponents = this.createStaticComponents.bind(this);\n    this.createEditableComponents = this.createEditableComponents.bind(this);\n    this.addListItem = this.addListItem.bind(this);\n    this.removeListItem = this.removeListItem.bind(this);\n    this.validateEmail = this.validateEmail.bind(this);\n    this.fetchData = this.fetchData.bind(this);\n  }\n\n  validateEmail(field, email) {\n    let formErrors = this.state.formErrors;\n\n    // don't supply error if email is blank\n    if (email === '' || email === null || email === undefined) {\n      delete formErrors[field];\n      // if email is invalid, set error, else nullify error\n    } else if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(email) === false) {\n      formErrors[field] = 'Invalid email';\n    } else {\n      delete formErrors[field];\n    }\n    this.setState({formErrors});\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    if (Object.keys(this.state.formErrors).length > 0) {\n      swal(\n        'Please fix any remaining form errors before submission',\n        '',\n        'error'\n      );\n      return;\n    }\n    let formData = this.state.formData;\n    let formObj = new FormData();\n    for (let key in formData) {\n      if (formData.hasOwnProperty(key) && formData[key] !== \"\") {\n        let formVal;\n        if (Array.isArray(formData[key])) {\n          formVal = JSON.stringify(formData[key]);\n        } else {\n          formVal = formData[key];\n        }\n        formObj.append(key, formVal);\n      }\n    }\n\n    $.ajax({\n      type: 'POST',\n      url: this.props.action,\n      data: formObj,\n      cache: false,\n      contentType: false,\n      processData: false,\n      success: function() {\n        swal(\"Edit Successful!\", \"\", \"success\");\n      },\n      error: function(jqXHR) {\n        console.error(jqXHR);\n        let resp = \"Something went wrong!\";\n        try {\n          resp = JSON.parse(jqXHR.responseText).message;\n        } catch (e) {\n          console.error(e);\n        }\n        swal(\"Edit failed!\", resp, \"error\");\n      }\n    });\n  }\n\n  fetchData() {\n    let self = this;\n    $.ajax(this.props.DataURL, {\n      dataType: 'json',\n      success: function(data) {\n        let formData = {\n          title: data.title,\n          description: data.description,\n          leadInvestigator: data.leadInvestigator,\n          leadInvestigatorEmail: data.leadInvestigatorEmail,\n          notifyLead: false,\n          status: data.status,\n          voiFields: data.voi,\n          keywords: data.keywords,\n          collaborators: data.collaborators,\n          usersWithEditPerm: data.usersWithEditPerm,\n          rejectedReason: data.rejectedReason\n        };\n        // set formdata for file meta data\n        if (data.files) {\n          data.files.forEach(function(f) {\n            let existFileFlag = 'existingUpload_';\n            let pubType = existFileFlag + 'publicationType_' + f.PublicationUploadID;\n            let pubCit = existFileFlag + 'publicationCitation_' + f.PublicationUploadID;\n            let pubVer = existFileFlag + 'publicationVersion_' + f.PublicationUploadID;\n            formData[pubType] = f.PublicationUploadTypeID;\n            formData[pubCit] = f.Citation;\n            formData[pubVer] = f.Version;\n          });\n        }\n\n        self.setState({\n          formData: formData,\n          users: data.users,\n          statusOpts: data.statusOpts,\n          userCanEdit: data.userCanEdit,\n          allVOIs: data.allVOIs,\n          allKWs: data.allKWs,\n          allCollabs: data.allCollabs,\n          uploadTypes: data.uploadTypes,\n          files: data.files,\n          isLoaded: true\n        });\n      },\n      error: function(error, errorCode, errorMsg) {\n        console.error(error, errorCode, errorMsg);\n        self.setState({\n          error: 'An error occurred when loading the form!'\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  createFileDownloadLinks() {\n    let files = this.state.files;\n    let toReturn = [];\n    files.forEach(function(f) {\n      let download = loris.BaseURL + '/publication/ajax/FileDownload.php?File=' + f.URL;\n      let link = <a href={download}>{f.URL}</a>;\n      let uploadType = this.state.uploadTypes[f.PublicationUploadTypeID];\n      toReturn.push(\n          <StaticElement\n            label={'Download ' + uploadType}\n            text={link}\n          />\n      );\n      if (f.Citation) {\n        toReturn.push(\n          <StaticElement\n            label=\"Citation\"\n            text={f.Citation}\n          />\n        );\n      }\n      if (f.Version) {\n        toReturn.push(\n          <StaticElement\n            label=\"Version\"\n            text={f.Version}\n          />\n        );\n      }\n    }, this);\n\n    return toReturn;\n  }\n\n  createMenuFilterLinks(stringArr, filterVar) {\n    let links = [];\n    stringArr.forEach(\n      function(value) {\n        links.push(\n          <span>\n            <a\n              href={loris.BaseURL + \"/publication/?\" + filterVar + \"=\" + value}\n            >\n              {value}\n            </a>\n            ; &nbsp;\n          </span>\n        );\n      }\n    );\n\n    return links;\n  }\n\n  createStaticComponents() {\n    let collaborators;\n    let keywords;\n    let vois;\n    let collabLinks;\n    let keywordLinks;\n    let voiLinks;\n    let files;\n\n    if (this.state.formData.collaborators.length > 0) {\n      collabLinks = this.createMenuFilterLinks(\n        this.state.formData.collaborators.map(c => c.name),\n        'collaborators'\n      );\n      collaborators = <StaticElement\n        name=\"collaborators\"\n        label=\"Collaborators\"\n        text={collabLinks}\n      />;\n    }\n\n    if (this.state.formData.keywords.length > 0) {\n      keywordLinks = this.createMenuFilterLinks(\n        this.state.formData.keywords,\n        'keywords'\n      );\n      keywords = <StaticElement\n        name=\"keywords\"\n        label=\"Keywords\"\n        text={keywordLinks}\n      />;\n    }\n\n    if (this.state.formData.voiFields.length > 0) {\n      voiLinks = this.createMenuFilterLinks(\n        this.state.formData.voiFields,\n        'voi'\n      );\n      vois = <StaticElement\n        name=\"variablesOfInterest\"\n        label=\"Variables of Interest\"\n        text={voiLinks}\n      />;\n    }\n\n    if (this.state.files.length > 0) {\n      files = this.createFileDownloadLinks();\n    }\n    return (\n      <div>\n        <StaticElement\n          name=\"description\"\n          label=\"Description\"\n          text={this.state.formData.description}\n        />\n        <StaticElement\n          name=\"leadInvestigator\"\n          label=\"Lead Investigator\"\n          text={this.state.formData.leadInvestigator}\n        />\n        <StaticElement\n         name=\"leadInvestigatorEmail\"\n         label=\"Lead Investigator Email\"\n         text={this.state.formData.leadInvestigatorEmail}\n        />\n        {collaborators}\n        {keywords}\n        {vois}\n        {files}\n      </div>\n   );\n  }\n\n  createEditableComponents() {\n    return (\n      <div>\n        <ProjectFormFields\n          files={this.state.files}\n          numFiles={this.state.numFiles}\n          formData={this.state.formData}\n          formErrors={this.state.formErrors}\n          setFormData={this.setFormData}\n          setFileData={this.setFileData}\n          addListItem={this.addListItem}\n          removeListItem={this.removeListItem}\n          validateEmail={this.validateEmail}\n          toggleEmailNotify={this.toggleEmailNotify}\n          uploadTypes={this.state.uploadTypes}\n          users={this.state.users}\n          allVOIs={this.state.allVOIs}\n          allKWs={this.state.allKWs}\n          allCollabs={this.state.allCollabs}\n          editMode={true}\n          fetchData={this.fetchData}\n        />\n      </div>\n    );\n  }\n\n  addListItem(formElement, value, pendingValKey) {\n    let formData = this.state.formData;\n    let listItems = formData[formElement] || [];\n    listItems.push(value);\n    formData[formElement] = listItems;\n    formData[pendingValKey] = null;\n    this.setState({\n      formData: formData\n    });\n  }\n\n  removeListItem(formElement, value) {\n    let formData = this.state.formData;\n    let listItems = formData[formElement];\n    let index = listItems.indexOf(value);\n\n    if (index > -1) {\n      listItems.splice(index, 1);\n\n      formData[formElement] = listItems;\n      this.setState({\n        formData: formData\n      });\n    }\n  }\n\n  setFormData(formElement, value) {\n    let formData = this.state.formData;\n    formData[formElement] = value;\n    this.setState({\n      formData: formData\n    });\n  }\n\n  setFileData(formElement, value) {\n    let numFiles = this.state.numFiles;\n    if (!this.state.formData[formElement]) {\n      numFiles += 1;\n      this.setState({numFiles: numFiles});\n    }\n    this.setFormData(formElement, value);\n  }\n\n  render() {\n    if (!this.state.isLoaded) {\n      return (\n        <button className=\"btn-info has-spinner\">\n          Loading\n          <span\n            className=\"glyphicon glyphicon-refresh glyphicon-refresh-animate\">\n          </span>\n        </button>\n      );\n    }\n    let statusElement;\n    let rejectReason;\n    let reviewBtn;\n    let statusID = this.state.formData.status;\n    let status = this.state.statusOpts[statusID];\n    if (loris.userHasPermission('publication_approve')) {\n      // if user has publication_approve permission, this means that status\n      // in formData reflects the ID, not the description\n      statusElement = <SelectElement\n        name=\"status\"\n        label=\"Status\"\n        id=\"status\"\n        value={this.state.formData.status}\n        onUserInput={this.setFormData}\n        required={true}\n        options={this.state.statusOpts}\n        emptyOption={false}\n      />;\n\n      if (status === 'Rejected') {\n        rejectReason = <TextboxElement\n          name=\"rejectedReason\"\n          label=\"Reason for rejection\"\n          value={this.state.formData.rejectedReason}\n          onUserInput={this.setFormData}\n          required={true}\n        />;\n      }\n      // Set review button only if user does not have edit permission\n      // to avoid having 2 submit buttons\n      reviewBtn = this.state.userCanEdit ? undefined : <ButtonElement label=\"Submit\" />;\n    } else {\n      const statClassMap = {\n        Pending: 'text-warning',\n        Approved: 'text-success',\n        Rejected: 'text-danger'\n      };\n      let statusText = (\n        <span className={statClassMap[status]}>\n          <strong>{status}</strong>\n        </span>\n      );\n      statusElement = <StaticElement\n        label=\"Status\"\n        text={statusText}\n      />;\n      if (status === 'Rejected') {\n        rejectReason = <StaticElement\n          label=\"Reason for rejection\"\n          text={this.state.formData.rejectedReason}\n        />;\n      }\n    }\n\n    let formElements;\n    if (this.state.userCanEdit) {\n      formElements = this.createEditableComponents();\n    } else {\n      formElements = this.createStaticComponents();\n    }\n\n    // only allow the title to be editable if user has editing access\n    // and proposal is still unreviewed\n    let title;\n    if (this.state.userCanEdit && status === 'Pending') {\n      title = (\n        <TextboxElement\n          name=\"title\"\n          label=\"Title\"\n          onUserInput={this.setFormData}\n          required={true}\n          value={this.state.formData.title}\n        />\n      );\n    } else {\n      title = (\n        <div className=\"row\">\n          <div className=\"col-md-3\"/>\n          <h3 className=\"col-md-9\">\n            {this.state.formData.title}\n          </h3>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"row\">\n        <div className=\"col-md-12 col-lg-12\">\n          <FormElement\n            name=\"viewProject\"\n            onSubmit={this.handleSubmit}\n            ref=\"form\"\n          >\n            {title}\n            {statusElement}\n            {rejectReason}\n            {formElements}\n            {reviewBtn}\n          </FormElement>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ViewProject;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/publication/jsx/viewProject.js"],"sourceRoot":""}