{"version":3,"sources":["webpack:///modules/publication/js/publicationIndex.js","webpack:///webpack/bootstrap b00c1a08211112abecb8?b5a5******************************************","webpack:///./modules/publication/jsx/publicationIndex.js","webpack:///./jsx/Panel.js?b4c8****","webpack:///./jsx/Tabs.js?82f5****","webpack:///./jsx/FilterForm.js?52c5***","webpack:///./modules/publication/jsx/uploadForm.js","webpack:///./modules/publication/jsx/projectFields.js","webpack:///./modules/publication/jsx/columnFormatter.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","0","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","_FilterForm","_FilterForm2","_Tabs","_uploadForm","_uploadForm2","_columnFormatter","_columnFormatter2","PublicationIndex","_React$Component","this","_this","getPrototypeOf","loris","hiddenHeaders","state","isLoaded","filter","fetchData","bind","updateFilter","resetFilters","$","ajax","DataURL","method","dataType","success","data","setState","Data","error","console","publicationsFilter","clearFilter","React","createElement","className","tabList","label","proposalTab","userHasPermission","push","TabPane","TabId","BaseURL","action","editMode","filterRef","f","Tabs","tabs","defaultTab","updateURL","Module","name","ref","columns","formElements","form","onUpdate","ButtonElement","type","onUserInput","StaticDataTable","Headers","Filter","getFormattedCell","Component","publicationIndex","ReactDOM","render","document","getElementById","2","Panel","collapsed","initCollapsed","panelClass","toggleCollapsed","glyphClass","panelHeading","title","onClick","data-toggle","data-target","style","cursor","role","height","children","propTypes","PropTypes","string","defaultProps","9","hash","window","location","activeTab","substr","handleClick","getTabs","getTabPanes","tabId","e","onTabChange","scrollDistance","scrollTop","map","tab","tabClass","href","tabID","tabPanes","Children","child","cloneElement","tabStyle","marginLeft","marginBottom","array","isRequired","bool","_React$Component2","apply","arguments","classList","Title","13","_Panel","_Panel2","FilterForm","getFormChildren","setFilter","onElementUpdate","queryString","QueryString","get","keys","forEach","filterKey","exactMatch","clear","formChildren","isValidElement","callbackFunc","callbackName","elementName","displayName","queryFieldName","filterValue","JSON","parse","stringify","fieldName","fieldValue","set","FormElement","warn","object","func","25","_projectFields","_projectFields2","PublicationUploadForm","formData","numFiles","uploadResult","loadError","undefined","formErrors","loadedData","uploadProgress","setFormData","handleSubmit","addListItem","removeListItem","validateEmail","setFileData","field","email","test","errorCode","errorMsg","formElement","pendingValKey","listItems","index","indexOf","splice","preventDefault","swal","formObj","FormData","hasOwnProperty","formVal","Array","isArray","append","url","cache","contentType","processData","replace","jqXHR","resp","responseText","message","createElements","formClass","TextboxElement","required","onSubmit","fileUpload","toggleEmailNotify","uploadTypes","users","allVOIs","allKWs","allCollabs","26","EmailElement","handleChange","handleBlur","onUserBlur","disabled","errorMessage","requiredHTML","elementClass","htmlFor","onChange","onBlur","addressee","ProjectFormFields","_this2","createCollabEmailFields","deleteUpload","createFileFields","addCollaborator","removeCollaborator","setCollaboratorEmail","uploadID","text","showCancelButton","confirmButtonText","cancelButtonText","willDelete","fileFields","files","_this3","downloadURL","encodeURIComponent","URL","link","PublicationUploadID","existFileFlag","pubType","pubCit","pubVer","pubTypeStr","StaticElement","fileName","FileElement","publicationType","publicationCitation","publicationVersion","SelectElement","options","collabEmails","collaborators","slice","notify","collabName","split","findIndex","currNotify","notifyLead","voiHelp","collabNames","voiTypeOptions","All","Behavioral","Imaging","voiOptions","voiType","bvlCopy","assign","TextareaElement","description","leadInvestigator","leadInvestigatorEmail","TagsElement","useSearch","strictSearch","onUserAdd","onUserRemove","pendingUWEP","items","usersWithEditPerm","btnLabel","pendingCollab","pendingKWItem","keywords","emptyOption","pendingItemVF","voiFields","_React$Component3","_this4","handleKeyPress","handleAdd","handleRemove","getKeyFromValue","canAddItem","keyCode","which","values","getAttribute","find","o","result","allowDupl","emptyOptionHTML","input","list","onKeyPress","option","item","itmTxt","data-item","class","multiple","hasError","27","formatColumn","column","cell","rowData","rowHeaders","row","header","classes","pubID","viewURL"],"mappings":"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","file":"./modules/publication/js/publicationIndex.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _FilterForm = __webpack_require__(13);\n\t\n\tvar _FilterForm2 = _interopRequireDefault(_FilterForm);\n\t\n\tvar _Tabs = __webpack_require__(9);\n\t\n\tvar _uploadForm = __webpack_require__(25);\n\t\n\tvar _uploadForm2 = _interopRequireDefault(_uploadForm);\n\t\n\tvar _columnFormatter = __webpack_require__(27);\n\t\n\tvar _columnFormatter2 = _interopRequireDefault(_columnFormatter);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PublicationIndex = function (_React$Component) {\n\t  _inherits(PublicationIndex, _React$Component);\n\t\n\t  function PublicationIndex() {\n\t    _classCallCheck(this, PublicationIndex);\n\t\n\t    var _this = _possibleConstructorReturn(this, (PublicationIndex.__proto__ || Object.getPrototypeOf(PublicationIndex)).call(this));\n\t\n\t    loris.hiddenHeaders = ['Description', 'Keywords', 'Variables Of Interest', 'Publication ID', 'Collaborators'];\n\t    _this.state = {\n\t      isLoaded: false,\n\t      filter: {}\n\t    };\n\t\n\t    // Bind component instance to custom methods\n\t    _this.fetchData = _this.fetchData.bind(_this);\n\t    _this.updateFilter = _this.updateFilter.bind(_this);\n\t    _this.resetFilters = _this.resetFilters.bind(_this);\n\t    return _this;\n\t  }\n\t\n\t  _createClass(PublicationIndex, [{\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      this.fetchData();\n\t    }\n\t  }, {\n\t    key: 'fetchData',\n\t    value: function fetchData() {\n\t      $.ajax(this.props.DataURL, {\n\t        method: \"GET\",\n\t        dataType: 'json',\n\t        success: function (data) {\n\t          this.setState({\n\t            Data: data,\n\t            isLoaded: true\n\t          });\n\t        }.bind(this),\n\t        error: function error(_error) {\n\t          console.error(_error);\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'updateFilter',\n\t    value: function updateFilter(filter) {\n\t      this.setState({ filter: filter });\n\t    }\n\t  }, {\n\t    key: 'resetFilters',\n\t    value: function resetFilters() {\n\t      this.publicationsFilter.clearFilter();\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      if (!this.state.isLoaded) {\n\t        return React.createElement(\n\t          'button',\n\t          { className: 'btn-info has-spinner' },\n\t          'Loading',\n\t          React.createElement('span', {\n\t            className: 'glyphicon glyphicon-refresh glyphicon-refresh-animate' })\n\t        );\n\t      }\n\t      var tabList = [{\n\t        id: \"browse\",\n\t        label: \"Browse\"\n\t      }];\n\t      var proposalTab = void 0;\n\t      if (loris.userHasPermission('publication_propose')) {\n\t        tabList.push({\n\t          id: \"propose\",\n\t          label: \"Propose a Project\"\n\t        });\n\t\n\t        proposalTab = React.createElement(\n\t          _Tabs.TabPane,\n\t          { TabId: tabList[1].id },\n\t          React.createElement(_uploadForm2.default, {\n\t            DataURL: loris.BaseURL + '/publication/ajax/getData.php?action=getData',\n\t            action: loris.BaseURL + '/publication/ajax/FileUpload.php?action=upload',\n\t            editMode: false\n\t          })\n\t        );\n\t      }\n\t\n\t      var filterRef = function (f) {\n\t        this.publicationsFilter = f;\n\t      }.bind(this);\n\t\n\t      return React.createElement(\n\t        _Tabs.Tabs,\n\t        { tabs: tabList, defaultTab: 'browse', updateURL: true },\n\t        React.createElement(\n\t          _Tabs.TabPane,\n\t          { TabId: tabList[0].id },\n\t          React.createElement(\n\t            _FilterForm2.default,\n\t            {\n\t              Module: 'publication',\n\t              name: 'publications_filter',\n\t              id: 'publications_filter_form',\n\t              ref: filterRef,\n\t              columns: 3,\n\t              formElements: this.state.Data.form,\n\t              onUpdate: this.updateFilter,\n\t              filter: this.state.filter\n\t            },\n\t            React.createElement('br', null),\n\t            React.createElement(ButtonElement, {\n\t              label: 'Clear Filters',\n\t              type: 'reset',\n\t              onUserInput: this.resetFilters\n\t            })\n\t          ),\n\t          React.createElement(StaticDataTable, {\n\t            Data: this.state.Data.Data,\n\t            Headers: this.state.Data.Headers,\n\t            Filter: this.state.filter,\n\t            getFormattedCell: _columnFormatter2.default\n\t          })\n\t        ),\n\t        proposalTab\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return PublicationIndex;\n\t}(React.Component);\n\t\n\t$(function () {\n\t  var publicationIndex = React.createElement(\n\t    'div',\n\t    { className: 'page-publications' },\n\t    React.createElement(PublicationIndex, { DataURL: loris.BaseURL + '/publication/?format=json' })\n\t  );\n\t\n\t  ReactDOM.render(publicationIndex, document.getElementById('lorisworkspace'));\n\t});\n\n/***/ },\n\n/***/ 2:\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * This file contains React component for Panel\n\t *\n\t * @author Alex I.\n\t * @version 1.0.0\n\t *\n\t */\n\t\n\t/**\n\t * Panel component\n\t * Wraps children in a collapsible bootstrap panel\n\t */\n\tvar Panel = function (_React$Component) {\n\t  _inherits(Panel, _React$Component);\n\t\n\t  function Panel(props) {\n\t    _classCallCheck(this, Panel);\n\t\n\t    var _this = _possibleConstructorReturn(this, (Panel.__proto__ || Object.getPrototypeOf(Panel)).call(this, props));\n\t\n\t    _this.state = {\n\t      collapsed: _this.props.initCollapsed\n\t    };\n\t\n\t    // Initialize panel class based on collapsed status\n\t    _this.panelClass = _this.props.initCollapsed ? \"panel-collapse collapse\" : \"panel-collapse collapse in\";\n\t\n\t    _this.toggleCollapsed = _this.toggleCollapsed.bind(_this);\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Panel, [{\n\t    key: \"toggleCollapsed\",\n\t    value: function toggleCollapsed() {\n\t      this.setState({ collapsed: !this.state.collapsed });\n\t    }\n\t  }, {\n\t    key: \"render\",\n\t    value: function render() {\n\t      // Change arrow direction based on collapse status\n\t      var glyphClass = this.state.collapsed ? \"glyphicon pull-right glyphicon-chevron-down\" : \"glyphicon pull-right glyphicon-chevron-up\";\n\t\n\t      // Add panel header, if title is set\n\t      var panelHeading = this.props.title ? React.createElement(\n\t        \"div\",\n\t        {\n\t          className: \"panel-heading\",\n\t          onClick: this.toggleCollapsed,\n\t          \"data-toggle\": \"collapse\",\n\t          \"data-target\": '#' + this.props.id,\n\t          style: { cursor: 'pointer' }\n\t        },\n\t        this.props.title,\n\t        React.createElement(\"span\", { className: glyphClass })\n\t      ) : '';\n\t\n\t      return React.createElement(\n\t        \"div\",\n\t        { className: \"panel panel-primary\" },\n\t        panelHeading,\n\t        React.createElement(\n\t          \"div\",\n\t          { id: this.props.id, className: this.panelClass, role: \"tabpanel\" },\n\t          React.createElement(\n\t            \"div\",\n\t            { className: \"panel-body\", style: { height: this.props.height } },\n\t            this.props.children\n\t          )\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return Panel;\n\t}(React.Component);\n\t\n\tPanel.propTypes = {\n\t  id: React.PropTypes.string,\n\t  height: React.PropTypes.string,\n\t  title: React.PropTypes.string\n\t};\n\tPanel.defaultProps = {\n\t  initCollapsed: false,\n\t  id: 'default-panel',\n\t  height: '100%'\n\t};\n\t\n\texports.default = Panel;\n\n/***/ },\n\n/***/ 9:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * This file contains React components for Tabs component.\n\t *\n\t * @author Loris Team\n\t * @version 1.1.0\n\t *\n\t */\n\t\n\t/**\n\t * Tabs Component.\n\t * React wrapper for Bootstrap tabs. Allows to dynamically render tabs\n\t * and corresponding tab panes.\n\t *\n\t * ================================================\n\t * Usage:\n\t *\n\t * 1. Define an array of tabs with IDs and labels\n\t *\n\t * `let tabList = [{id: \"tab1\", label: \"This is tab title\"}];`\n\t *\n\t * 2. Pass tabList as <Tab> property and <TabPane> as child\n\t *  ```\n\t * <Tabs tabs={tabList} defaultTab=\"tab1\">\n\t *   <TabPane TabId={tabList[0].id}>\n\t *     // Tab content goes here\n\t *   </TabPane>\n\t * </Tabs>\n\t * ```\n\t * =================================================\n\t *\n\t */\n\tvar Tabs = function (_React$Component) {\n\t  _inherits(Tabs, _React$Component);\n\t\n\t  function Tabs(props) {\n\t    _classCallCheck(this, Tabs);\n\t\n\t    var _this = _possibleConstructorReturn(this, (Tabs.__proto__ || Object.getPrototypeOf(Tabs)).call(this, props));\n\t\n\t    var hash = window.location.hash;\n\t    var activeTab = \"\";\n\t\n\t    /**\n\t     * Determine the initial active tab in this order\n\t     * 1. Try to infer from the URL, otherwise\n\t     * 2. Try to infer from the defaultTab prop, otherwise\n\t     * 3. Set to be the first tab of the list\n\t     */\n\t    if (_this.props.updateURL && hash) {\n\t      activeTab = hash.substr(1);\n\t    } else if (_this.props.defaultTab) {\n\t      activeTab = _this.props.defaultTab;\n\t    } else if (_this.props.tabs.length > 0) {\n\t      activeTab = _this.props.tabs[0].id;\n\t    }\n\t\n\t    _this.state = {\n\t      activeTab: activeTab\n\t    };\n\t\n\t    _this.handleClick = _this.handleClick.bind(_this);\n\t    _this.getTabs = _this.getTabs.bind(_this);\n\t    _this.getTabPanes = _this.getTabPanes.bind(_this);\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Tabs, [{\n\t    key: 'handleClick',\n\t    value: function handleClick(tabId, e) {\n\t      this.setState({ activeTab: tabId });\n\t      this.props.onTabChange(tabId);\n\t\n\t      // Add tab href to URL querystring and scroll the page to top\n\t      if (this.props.updateURL) {\n\t        var scrollDistance = $('body').scrollTop() || $('html').scrollTop();\n\t        window.location.hash = e.target.hash;\n\t        $('html,body').scrollTop(scrollDistance);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'getTabs',\n\t    value: function getTabs() {\n\t      var tabs = this.props.tabs.map(function (tab) {\n\t        var tabClass = this.state.activeTab === tab.id ? 'active' : null;\n\t        var href = \"#\" + tab.id;\n\t        var tabID = \"tab-\" + tab.id;\n\t        return React.createElement(\n\t          'li',\n\t          {\n\t            role: 'presentation',\n\t            className: tabClass,\n\t            key: tab.id\n\t          },\n\t          React.createElement(\n\t            'a',\n\t            { id: tabID,\n\t              href: href,\n\t              role: 'tab',\n\t              'data-toggle': 'tab',\n\t              onClick: this.handleClick.bind(null, tab.id)\n\t            },\n\t            tab.label\n\t          )\n\t        );\n\t      }.bind(this));\n\t\n\t      return tabs;\n\t    }\n\t  }, {\n\t    key: 'getTabPanes',\n\t    value: function getTabPanes() {\n\t      var tabPanes = React.Children.map(this.props.children, function (child, key) {\n\t        if (child) {\n\t          return React.cloneElement(child, {\n\t            activeTab: this.state.activeTab,\n\t            key: key\n\t          });\n\t        }\n\t      }.bind(this));\n\t\n\t      return tabPanes;\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var tabs = this.getTabs();\n\t      var tabPanes = this.getTabPanes();\n\t      var tabStyle = {\n\t        marginLeft: 0,\n\t        marginBottom: '5px'\n\t      };\n\t\n\t      return React.createElement(\n\t        'div',\n\t        null,\n\t        React.createElement(\n\t          'ul',\n\t          { className: 'nav nav-tabs', role: 'tablist', style: tabStyle },\n\t          tabs\n\t        ),\n\t        React.createElement(\n\t          'div',\n\t          { className: 'tab-content' },\n\t          tabPanes\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return Tabs;\n\t}(React.Component);\n\t\n\tTabs.propTypes = {\n\t  tabs: React.PropTypes.array.isRequired,\n\t  defaultTab: React.PropTypes.string,\n\t  updateURL: React.PropTypes.bool\n\t};\n\tTabs.defaultProps = {\n\t  onTabChange: function onTabChange() {},\n\t  updateURL: false\n\t};\n\t\n\t/*\n\t * TabPane component.\n\t * Used to wrap content for every tab.\n\t */\n\t\n\tvar TabPane = function (_React$Component2) {\n\t  _inherits(TabPane, _React$Component2);\n\t\n\t  function TabPane() {\n\t    _classCallCheck(this, TabPane);\n\t\n\t    return _possibleConstructorReturn(this, (TabPane.__proto__ || Object.getPrototypeOf(TabPane)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(TabPane, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var classList = \"tab-pane\";\n\t      var title = void 0;\n\t\n\t      if (this.props.TabId === this.props.activeTab) {\n\t        classList += \" active\";\n\t      }\n\t      if (this.props.Title) {\n\t        title = React.createElement(\n\t          'h1',\n\t          null,\n\t          this.props.Title\n\t        );\n\t      }\n\t\n\t      return React.createElement(\n\t        'div',\n\t        { role: 'tabpanel', className: classList, id: this.props.TabId },\n\t        title,\n\t        this.props.children\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return TabPane;\n\t}(React.Component);\n\t\n\tTabPane.propTypes = {\n\t  TabId: React.PropTypes.string.isRequired,\n\t  Title: React.PropTypes.string,\n\t  activeTab: React.PropTypes.string\n\t};\n\t\n\texports.Tabs = Tabs;\n\texports.TabPane = TabPane;\n\n/***/ },\n\n/***/ 13:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Panel = __webpack_require__(2);\n\t\n\tvar _Panel2 = _interopRequireDefault(_Panel);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This file contains React component for FilterForm\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author Loris Team\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @version 1.1.0\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * FilterForm component.\n\t * A wrapper for form elements inside a selection filter.\n\t *\n\t * Adds necessary filter callbacks to all children and passes them to FormElement\n\t * for proper rendering.\n\t *\n\t * Keeps track of filter object and sends it to parent on every update.\n\t *\n\t * //HACK/NOTE: Loris has special behaviour for `candID` attribute in the query string,\n\t * making it impossible to use it for selection filters. This components renames\n\t * all `candID` fields to `candidateID` automatically before appending them to URL.\n\t *\n\t */\n\tvar FilterForm = function (_React$Component) {\n\t  _inherits(FilterForm, _React$Component);\n\t\n\t  function FilterForm(props) {\n\t    _classCallCheck(this, FilterForm);\n\t\n\t    // Bind component instance to custom methods\n\t    var _this = _possibleConstructorReturn(this, (FilterForm.__proto__ || Object.getPrototypeOf(FilterForm)).call(this, props));\n\t\n\t    _this.clearFilter = _this.clearFilter.bind(_this);\n\t    _this.getFormChildren = _this.getFormChildren.bind(_this);\n\t    _this.setFilter = _this.setFilter.bind(_this);\n\t    _this.onElementUpdate = _this.onElementUpdate.bind(_this);\n\t\n\t    // Keeps track of querystring values\n\t    // Saved as class variable instead of keeping in state\n\t    _this.queryString = QueryString.get();\n\t    return _this;\n\t  }\n\t\n\t  _createClass(FilterForm, [{\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      var filter = {};\n\t      var queryString = this.queryString;\n\t\n\t      // Initiaze filter using querystring value\n\t      Object.keys(queryString).forEach(function (key) {\n\t        var filterKey = key === 'candidateID' ? 'candID' : key;\n\t        filter[filterKey] = {\n\t          value: queryString[key],\n\t          exactMatch: false\n\t        };\n\t      });\n\t\n\t      // Update parent component\n\t      this.props.onUpdate(filter);\n\t    }\n\t\n\t    /**\n\t     * Clear the filter object, querystring and input fields\n\t     */\n\t\n\t  }, {\n\t    key: 'clearFilter',\n\t    value: function clearFilter() {\n\t      this.queryString = QueryString.clear(this.props.Module);\n\t      this.props.onUpdate({});\n\t    }\n\t\n\t    /**\n\t     * Itterates through FilterForm children, sets necessary callback functions\n\t     * and initializes filterTable\n\t     *\n\t     * @return {Array} formChildren - array of children with necessary props\n\t     */\n\t\n\t  }, {\n\t    key: 'getFormChildren',\n\t    value: function getFormChildren() {\n\t      var formChildren = [];\n\t      React.Children.forEach(this.props.children, function (child, key) {\n\t        // If child is a React component (i.e not a simple DOM element)\n\t        if (React.isValidElement(child) && typeof child.type === \"function\" && child.props.onUserInput) {\n\t          var callbackFunc = child.props.onUserInput;\n\t          var callbackName = callbackFunc.name;\n\t          var elementName = child.type.displayName;\n\t          var queryFieldName = child.props.name === 'candID' ? 'candidateID' : child.props.name;\n\t          var filterValue = this.queryString[queryFieldName];\n\t          // If callback function was not set, set it to onElementUpdate() for form\n\t          // elements and to clearFilter() for <ButtonElement type='reset'/>.\n\t          if (callbackName === \"onUserInput\") {\n\t            if (elementName === \"ButtonElement\" && child.props.type === \"reset\") {\n\t              callbackFunc = this.clearFilter;\n\t            } else {\n\t              callbackFunc = this.onElementUpdate.bind(null, elementName);\n\t            }\n\t          }\n\t          // Pass onUserInput and value props to all children\n\t          formChildren.push(React.cloneElement(child, {\n\t            onUserInput: callbackFunc,\n\t            value: filterValue ? filterValue : '',\n\t            key: key\n\t          }));\n\t          // Initialize filter for StaticDataTable\n\t          this.setFilter(elementName, child.props.name, filterValue);\n\t        } else {\n\t          formChildren.push(React.cloneElement(child, { key: key }));\n\t        }\n\t      }.bind(this));\n\t\n\t      return formChildren;\n\t    }\n\t\n\t    /**\n\t     * Appends entry to filter object or deletes it if value is\n\t     * empty.\n\t     *\n\t     * Sets exactMatch to true for all SelectElements (i.e dropdowns)\n\t     * in order to force StaticDataTable to do exact comparaison\n\t     *\n\t     * @param {string} type - form element type (i.e component name)\n\t     * @param {string} key - the name of the form element\n\t     * @param {string} value - the value of the form element\n\t     *\n\t     * @return {{}} filter - filterData\n\t     */\n\t\n\t  }, {\n\t    key: 'setFilter',\n\t    value: function setFilter(type, key, value) {\n\t      var filter = {};\n\t      if (this.props.filter) {\n\t        filter = JSON.parse(JSON.stringify(this.props.filter));\n\t      }\n\t\n\t      if (key && value) {\n\t        filter[key] = {};\n\t        filter[key].value = value;\n\t        filter[key].exactMatch = type === \"SelectElement\";\n\t      } else if (filter && key && value === '') {\n\t        delete filter[key];\n\t      }\n\t\n\t      return filter;\n\t    }\n\t\n\t    /**\n\t     * Sets filter object and querystring to reflect values of input fields\n\t     *\n\t     * @param {string} type - form element type (i.e component name)\n\t     * @param {string} fieldName - the name of the form element\n\t     * @param {string} fieldValue - the value of the form element\n\t     */\n\t\n\t  }, {\n\t    key: 'onElementUpdate',\n\t    value: function onElementUpdate(type, fieldName, fieldValue) {\n\t      // Make sure both key/value are string before sending them to querystring\n\t      if (typeof fieldName !== \"string\" || typeof fieldValue !== \"string\") {\n\t        return;\n\t      }\n\t\n\t      // Update query string\n\t      var queryFieldName = fieldName === 'candID' ? 'candidateID' : fieldName;\n\t      this.queryString = QueryString.set(this.queryString, queryFieldName, fieldValue);\n\t\n\t      // Update filter and get new filter object\n\t      var filter = this.setFilter(type, fieldName, fieldValue);\n\t      this.props.onUpdate(filter);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      // Get formatted children\n\t      var formChildren = this.getFormChildren();\n\t      var formElements = this.props.formElements;\n\t\n\t      if (formElements) {\n\t        Object.keys(formElements).forEach(function (fieldName) {\n\t          var queryFieldName = fieldName === 'candID' ? 'candidateID' : fieldName;\n\t          formElements[fieldName].onUserInput = this.onElementUpdate.bind(null, fieldName);\n\t          formElements[fieldName].value = this.queryString[queryFieldName];\n\t        }.bind(this));\n\t      }\n\t\n\t      return React.createElement(\n\t        _Panel2.default,\n\t        {\n\t          id: this.props.id,\n\t          height: this.props.height,\n\t          title: this.props.title\n\t        },\n\t        React.createElement(\n\t          FormElement,\n\t          this.props,\n\t          formChildren\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return FilterForm;\n\t}(React.Component);\n\t\n\tFilterForm.defaultProps = {\n\t  id: 'selection-filter',\n\t  height: '100%',\n\t  title: 'Selection Filter',\n\t  onUpdate: function onUpdate() {\n\t    console.warn('onUpdate() callback is not set!');\n\t  }\n\t};\n\tFilterForm.propTypes = {\n\t  Module: React.PropTypes.string.isRequired,\n\t  filter: React.PropTypes.object.isRequired,\n\t  id: React.PropTypes.string,\n\t  height: React.PropTypes.string,\n\t  title: React.PropTypes.string,\n\t  onUpdate: React.PropTypes.func\n\t};\n\t\n\texports.default = FilterForm;\n\n/***/ },\n\n/***/ 25:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _projectFields = __webpack_require__(26);\n\t\n\tvar _projectFields2 = _interopRequireDefault(_projectFields);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PublicationUploadForm = function (_React$Component) {\n\t  _inherits(PublicationUploadForm, _React$Component);\n\t\n\t  function PublicationUploadForm(props) {\n\t    _classCallCheck(this, PublicationUploadForm);\n\t\n\t    var _this = _possibleConstructorReturn(this, (PublicationUploadForm.__proto__ || Object.getPrototypeOf(PublicationUploadForm)).call(this, props));\n\t\n\t    _this.state = {\n\t      Data: {},\n\t      formData: {},\n\t      numFiles: 0,\n\t      uploadResult: null,\n\t      loadError: undefined,\n\t      formErrors: {},\n\t      isLoaded: false,\n\t      loadedData: 0,\n\t      uploadProgress: -1\n\t    };\n\t\n\t    _this.setFormData = _this.setFormData.bind(_this);\n\t    _this.handleSubmit = _this.handleSubmit.bind(_this);\n\t    _this.addListItem = _this.addListItem.bind(_this);\n\t    _this.removeListItem = _this.removeListItem.bind(_this);\n\t    _this.validateEmail = _this.validateEmail.bind(_this);\n\t    _this.setFileData = _this.setFileData.bind(_this);\n\t    _this.fetchData = _this.fetchData.bind(_this);\n\t    return _this;\n\t  }\n\t\n\t  _createClass(PublicationUploadForm, [{\n\t    key: 'validateEmail',\n\t    value: function validateEmail(field, email) {\n\t      var formErrors = this.state.formErrors;\n\t\n\t      // don't supply error if email is blank\n\t      if (email === '' || email === null || email === undefined) {\n\t        delete formErrors[field];\n\t        // if email is invalid, set error, else nullify error\n\t      } else if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(email) === false) {\n\t        formErrors[field] = 'Invalid email';\n\t      } else {\n\t        delete formErrors[field];\n\t      }\n\t      this.setState({ formErrors: formErrors });\n\t    }\n\t  }, {\n\t    key: 'fetchData',\n\t    value: function fetchData() {\n\t      var self = this;\n\t      $.ajax(this.props.DataURL, {\n\t        dataType: 'json',\n\t        success: function success(data) {\n\t          self.setState({\n\t            Data: data,\n\t            isLoaded: true\n\t          });\n\t        },\n\t        error: function error(data, errorCode, errorMsg) {\n\t          console.error(data, errorCode, errorMsg);\n\t          self.setState({\n\t            loadError: 'An error occurred when loading the form!'\n\t          });\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      this.fetchData();\n\t    }\n\t  }, {\n\t    key: 'setFileData',\n\t    value: function setFileData(formElement, value) {\n\t      var numFiles = this.state.numFiles;\n\t      if (!this.state.formData[formElement]) {\n\t        numFiles += 1;\n\t        this.setState({ numFiles: numFiles });\n\t      }\n\t      this.setFormData(formElement, value);\n\t    }\n\t  }, {\n\t    key: 'setFormData',\n\t    value: function setFormData(formElement, value) {\n\t      var formData = this.state.formData;\n\t      formData[formElement] = value;\n\t      this.setState({\n\t        formData: formData\n\t      });\n\t    }\n\t  }, {\n\t    key: 'addListItem',\n\t    value: function addListItem(formElement, value, pendingValKey) {\n\t      var formData = this.state.formData;\n\t      var listItems = formData[formElement] || [];\n\t      listItems.push(value);\n\t      formData[formElement] = listItems;\n\t      formData[pendingValKey] = null;\n\t      this.setState({\n\t        formData: formData\n\t      });\n\t    }\n\t  }, {\n\t    key: 'removeListItem',\n\t    value: function removeListItem(formElement, value) {\n\t      var formData = this.state.formData;\n\t      var listItems = formData[formElement];\n\t      var index = listItems.indexOf(value);\n\t\n\t      if (index > -1) {\n\t        listItems.splice(index, 1);\n\t        formData[formElement] = listItems;\n\t        this.setState({\n\t          formData: formData\n\t        });\n\t      }\n\t    }\n\t  }, {\n\t    key: 'handleSubmit',\n\t    value: function handleSubmit(e) {\n\t      e.preventDefault();\n\t\n\t      if (Object.keys(this.state.formErrors).length > 0) {\n\t        swal('Please fix any remaining form errors before submission', '', 'error');\n\t        return;\n\t      }\n\t      var formData = this.state.formData;\n\t\n\t      var formObj = new FormData();\n\t      for (var key in formData) {\n\t        if (formData.hasOwnProperty(key) && formData[key] !== \"\") {\n\t          var formVal = void 0;\n\t          if (Array.isArray(formData[key])) {\n\t            formVal = JSON.stringify(formData[key]);\n\t          } else {\n\t            formVal = formData[key];\n\t          }\n\t          formObj.append(key, formVal);\n\t        }\n\t      }\n\t\n\t      $.ajax({\n\t        type: 'POST',\n\t        url: this.props.action,\n\t        data: formObj,\n\t        cache: false,\n\t        contentType: false,\n\t        processData: false,\n\t        success: function () {\n\t          // reset form data\n\t          this.setState({\n\t            formData: {},\n\t            numFiles: 0\n\t          });\n\t          swal({\n\t            title: \"Submission Successful!\",\n\t            type: \"success\"\n\t          }, function () {\n\t            window.location.replace(loris.BaseURL + '/publication/');\n\t          });\n\t        }.bind(this),\n\t        error: function error(jqXHR) {\n\t          console.error(jqXHR);\n\t          var resp = \"\";\n\t          try {\n\t            resp = JSON.parse(jqXHR.responseText).message;\n\t          } catch (e) {\n\t            console.error(e);\n\t          }\n\t          swal(\"Something went wrong!\", resp, \"error\");\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      // Data loading error\n\t      if (this.state.loadError !== undefined) {\n\t        return React.createElement(\n\t          'div',\n\t          { className: 'alert alert-danger text-center' },\n\t          React.createElement(\n\t            'strong',\n\t            null,\n\t            this.state.error\n\t          )\n\t        );\n\t      }\n\t\n\t      // Waiting for data to load\n\t      if (!this.state.isLoaded) {\n\t        return React.createElement(\n\t          'button',\n\t          { className: 'btn-info has-spinner' },\n\t          'Loading',\n\t          React.createElement('span', {\n\t            className: 'glyphicon glyphicon-refresh glyphicon-refresh-animate' })\n\t        );\n\t      }\n\t\n\t      var createElements = void 0;\n\t      var formClass = \"col-md-12 col-lg-12\";\n\t      if (!this.props.editMode) {\n\t        createElements = [React.createElement(\n\t          'h3',\n\t          { className: 'col-md-offset-3 col-lg-offset-3' },\n\t          'Propose a new project'\n\t        ), React.createElement(TextboxElement, {\n\t          name: 'title',\n\t          label: 'Title',\n\t          onUserInput: this.setFormData,\n\t          required: true,\n\t          value: this.state.formData.title\n\t        })];\n\t        // if not in edit mode, shrink form for consistent display\n\t        formClass = \"col-md-8 col-lg-7\";\n\t      }\n\t\n\t      return React.createElement(\n\t        'div',\n\t        { className: 'row' },\n\t        React.createElement(\n\t          'div',\n\t          { className: formClass },\n\t          React.createElement(\n\t            FormElement,\n\t            {\n\t              name: 'publicationUpload',\n\t              onSubmit: this.handleSubmit,\n\t              ref: 'form',\n\t              fileUpload: true\n\t            },\n\t            createElements,\n\t            React.createElement(_projectFields2.default, {\n\t              formData: this.state.formData,\n\t              formErrors: this.state.formErrors,\n\t              numFiles: this.state.numFiles,\n\t              setFormData: this.setFormData,\n\t              setFileData: this.setFileData,\n\t              addListItem: this.addListItem,\n\t              removeListItem: this.removeListItem,\n\t              validateEmail: this.validateEmail,\n\t              toggleEmailNotify: this.toggleEmailNotify,\n\t              uploadTypes: this.state.Data.uploadTypes,\n\t              users: this.state.Data.users,\n\t              allVOIs: this.state.Data.allVOIs,\n\t              allKWs: this.state.Data.allKWs,\n\t              allCollabs: this.state.Data.allCollabs,\n\t              editMode: false\n\t            })\n\t          )\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return PublicationUploadForm;\n\t}(React.Component);\n\t\n\texports.default = PublicationUploadForm;\n\n/***/ },\n\n/***/ 26:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar EmailElement = function (_React$Component) {\n\t  _inherits(EmailElement, _React$Component);\n\t\n\t  function EmailElement() {\n\t    _classCallCheck(this, EmailElement);\n\t\n\t    var _this = _possibleConstructorReturn(this, (EmailElement.__proto__ || Object.getPrototypeOf(EmailElement)).call(this));\n\t\n\t    _this.handleChange = _this.handleChange.bind(_this);\n\t    _this.handleBlur = _this.handleBlur.bind(_this);\n\t    return _this;\n\t  }\n\t\n\t  _createClass(EmailElement, [{\n\t    key: 'handleChange',\n\t    value: function handleChange(e) {\n\t      this.props.onUserInput(this.props.name, e.target.value);\n\t    }\n\t  }, {\n\t    key: 'handleBlur',\n\t    value: function handleBlur(e) {\n\t      this.props.onUserBlur(this.props.name, e.target.value);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var disabled = this.props.disabled ? 'disabled' : null;\n\t      var required = this.props.required ? 'required' : null;\n\t      var errorMessage = null;\n\t      var requiredHTML = null;\n\t      var elementClass = 'row form-group';\n\t\n\t      // Add required asterix\n\t      if (required) {\n\t        requiredHTML = React.createElement(\n\t          'span',\n\t          { className: 'text-danger' },\n\t          '*'\n\t        );\n\t      }\n\t\n\t      // Add error message\n\t      if (this.props.errorMessage) {\n\t        errorMessage = React.createElement(\n\t          'span',\n\t          null,\n\t          this.props.errorMessage\n\t        );\n\t        elementClass = 'row form-group has-error';\n\t      }\n\t\n\t      return React.createElement(\n\t        'div',\n\t        { className: elementClass },\n\t        React.createElement(\n\t          'label',\n\t          { className: 'col-sm-3 control-label', htmlFor: this.props.id },\n\t          this.props.label,\n\t          requiredHTML\n\t        ),\n\t        React.createElement(\n\t          'div',\n\t          { className: 'col-sm-7' },\n\t          React.createElement('input', {\n\t            type: 'text',\n\t            className: 'form-control',\n\t            name: this.props.name,\n\t            id: this.props.id,\n\t            value: this.props.value || \"\",\n\t            required: required,\n\t            disabled: disabled,\n\t            onChange: this.handleChange,\n\t            onBlur: this.handleBlur\n\t          }),\n\t          errorMessage\n\t        ),\n\t        React.createElement(\n\t          'div',\n\t          { className: 'col-sm-2' },\n\t          React.createElement(\n\t            'span',\n\t            null,\n\t            React.createElement('input', {\n\t              name: this.props.name + '_notify',\n\t              type: 'checkbox',\n\t              onChange: this.props.toggleEmailNotify,\n\t              value: this.props.addressee\n\t            }),\n\t            React.createElement(\n\t              'span',\n\t              null,\n\t              'Send email notification?'\n\t            )\n\t          )\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return EmailElement;\n\t}(React.Component);\n\t\n\tEmailElement.defaultProps = {\n\t  name: '',\n\t  label: '',\n\t  value: '',\n\t  addressee: '',\n\t  id: null,\n\t  disabled: false,\n\t  required: false,\n\t  errorMessage: '',\n\t  onUserInput: function onUserInput() {\n\t    console.warn('onUserInput() callback is not set');\n\t  },\n\t  onUserBlur: function onUserBlur() {}\n\t};\n\t\n\t// This class combines the common form elements between\n\t// Edit mode and initial Project Proposal/Creation mode\n\t\n\tvar ProjectFormFields = function (_React$Component2) {\n\t  _inherits(ProjectFormFields, _React$Component2);\n\t\n\t  function ProjectFormFields() {\n\t    _classCallCheck(this, ProjectFormFields);\n\t\n\t    var _this2 = _possibleConstructorReturn(this, (ProjectFormFields.__proto__ || Object.getPrototypeOf(ProjectFormFields)).call(this));\n\t\n\t    _this2.createCollabEmailFields = _this2.createCollabEmailFields.bind(_this2);\n\t    _this2.deleteUpload = _this2.deleteUpload.bind(_this2);\n\t    _this2.createFileFields = _this2.createFileFields.bind(_this2);\n\t    _this2.addCollaborator = _this2.addCollaborator.bind(_this2);\n\t    _this2.removeCollaborator = _this2.removeCollaborator.bind(_this2);\n\t    _this2.setCollaboratorEmail = _this2.setCollaboratorEmail.bind(_this2);\n\t    _this2.toggleEmailNotify = _this2.toggleEmailNotify.bind(_this2);\n\t    return _this2;\n\t  }\n\t\n\t  _createClass(ProjectFormFields, [{\n\t    key: 'deleteUpload',\n\t    value: function deleteUpload(uploadID) {\n\t      var self = this;\n\t      swal({\n\t        title: \"Are you sure?\",\n\t        text: \"Are you sure you want to delete this file?\",\n\t        type: \"warning\",\n\t        showCancelButton: true,\n\t        confirmButtonText: 'Yes, I am sure!',\n\t        cancelButtonText: \"No, cancel it!\"\n\t      }, function (willDelete) {\n\t        if (willDelete) {\n\t          var url = loris.BaseURL + '/publication/ajax/FileDelete.php?uploadID=' + uploadID;\n\t          $.ajax(url, {\n\t            method: 'DELETE',\n\t            success: function success() {\n\t              self.props.fetchData();\n\t            }\n\t          });\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'createFileFields',\n\t    value: function createFileFields() {\n\t      var fileFields = [];\n\t      // Create download link & edit fields for existing files\n\t      if (this.props.files) {\n\t        this.props.files.forEach(function (f) {\n\t          var _this3 = this;\n\t\n\t          var downloadURL = loris.BaseURL + '/publication/ajax/FileDownload.php?File=' + encodeURIComponent(f.URL);\n\t          var link = React.createElement(\n\t            'span',\n\t            null,\n\t            React.createElement(\n\t              'a',\n\t              { href: downloadURL },\n\t              f.URL\n\t            ),\n\t            '\\xA0\\xA0',\n\t            React.createElement('span', {\n\t              className: 'glyphicon glyphicon-remove',\n\t              style: { cursor: 'pointer' },\n\t              onClick: function onClick() {\n\t                return _this3.deleteUpload(f.PublicationUploadID);\n\t              }\n\t            })\n\t          );\n\t          var existFileFlag = 'existingUpload_';\n\t          var pubType = existFileFlag + 'publicationType_' + f.PublicationUploadID;\n\t          var pubCit = existFileFlag + 'publicationCitation_' + f.PublicationUploadID;\n\t          var pubVer = existFileFlag + 'publicationVersion_' + f.PublicationUploadID;\n\t          var pubTypeStr = this.props.uploadTypes[this.props.formData[pubType]];\n\t          fileFields.push(React.createElement(\n\t            'div',\n\t            null,\n\t            React.createElement(StaticElement, {\n\t              label: pubTypeStr,\n\t              text: link\n\t            }),\n\t            React.createElement(TextboxElement, {\n\t              name: pubCit,\n\t              label: 'Citation',\n\t              onUserInput: this.props.setFormData,\n\t              value: this.props.formData[pubCit]\n\t            }),\n\t            React.createElement(TextboxElement, {\n\t              name: pubVer,\n\t              label: 'Publication Version',\n\t              onUserInput: this.props.setFormData,\n\t              value: this.props.formData[pubVer]\n\t            })\n\t          ));\n\t        }, this);\n\t      }\n\t      // create fields for new files\n\t      for (var i = 0; i <= this.props.numFiles; i++) {\n\t        var fileName = \"file_\" + i;\n\t        fileFields.push(React.createElement(FileElement, {\n\t          name: fileName,\n\t          id: \"publicationUploadEl_\" + i,\n\t          onUserInput: this.props.setFileData,\n\t          label: 'File to upload',\n\t          value: this.props.formData[fileName]\n\t        }));\n\t        if (this.props.formData[fileName]) {\n\t          var publicationType = \"publicationType_\" + i;\n\t          var publicationCitation = \"publicationCitation_\" + i;\n\t          var publicationVersion = \"publicationVersion_\" + i;\n\t          fileFields.push(React.createElement(\n\t            'div',\n\t            null,\n\t            React.createElement(SelectElement, {\n\t              name: publicationType,\n\t              label: 'Publication Type',\n\t              onUserInput: this.props.setFormData,\n\t              value: this.props.formData[publicationType],\n\t              options: this.props.uploadTypes,\n\t              required: true\n\t            }),\n\t            React.createElement(TextboxElement, {\n\t              name: publicationCitation,\n\t              label: 'Citation',\n\t              onUserInput: this.props.setFormData,\n\t              value: this.props.formData[publicationCitation]\n\t            }),\n\t            React.createElement(TextboxElement, {\n\t              name: publicationVersion,\n\t              label: 'Publication Version',\n\t              onUserInput: this.props.setFormData,\n\t              value: this.props.formData[publicationVersion]\n\t            })\n\t          ));\n\t        }\n\t      }\n\t\n\t      return fileFields;\n\t    }\n\t  }, {\n\t    key: 'createCollabEmailFields',\n\t    value: function createCollabEmailFields() {\n\t      var collabEmails = [];\n\t      if (this.props.formData.collaborators) {\n\t        this.props.formData.collaborators.forEach(function (c, i) {\n\t          var name = 'collabEmail_' + c.name;\n\t          collabEmails.push(React.createElement(EmailElement, {\n\t            name: name,\n\t            label: c.name + (c.name.slice(-1) === 's' ? \"'\" : \"'s\") + \" Email\",\n\t            onUserInput: this.setCollaboratorEmail,\n\t            onUserBlur: this.props.validateEmail,\n\t            toggleEmailNotify: this.toggleEmailNotify,\n\t            errorMessage: this.props.formErrors[name],\n\t            required: false,\n\t            value: this.props.formData.collaborators[i].email,\n\t            addressee: c.name\n\t          }));\n\t        }, this);\n\t      }\n\t      return collabEmails;\n\t    }\n\t  }, {\n\t    key: 'addCollaborator',\n\t    value: function addCollaborator(formElement, value, pendingValKey) {\n\t      var collaborators = this.props.formData.collaborators || [];\n\t      collaborators.push({\n\t        name: value,\n\t        email: null,\n\t        notify: false\n\t      });\n\t\n\t      this.props.setFormData('collaborators', collaborators);\n\t      this.props.setFormData(pendingValKey, null);\n\t    }\n\t  }, {\n\t    key: 'removeCollaborator',\n\t    value: function removeCollaborator(formElement, value) {\n\t      var collaborators = this.props.formData.collaborators || [];\n\t      collaborators = collaborators.filter(function (c) {\n\t        return c.name !== value;\n\t      });\n\t      this.props.setFormData('collaborators', collaborators);\n\t    }\n\t  }, {\n\t    key: 'setCollaboratorEmail',\n\t    value: function setCollaboratorEmail(formElement, value) {\n\t      var collabName = formElement.split('_')[1];\n\t      var collaborators = this.props.formData.collaborators;\n\t      var i = collaborators.findIndex(function (c) {\n\t        return c.name === collabName;\n\t      });\n\t      collaborators[i].email = value;\n\t      this.props.setFormData('collaborators', collaborators);\n\t    }\n\t  }, {\n\t    key: 'toggleEmailNotify',\n\t    value: function toggleEmailNotify(e) {\n\t      if (e.target.name.indexOf('collabEmail') > -1) {\n\t        var collaborators = this.props.formData.collaborators;\n\t        var collabName = e.target.value;\n\t        var i = collaborators.findIndex(function (c) {\n\t          return c.name === collabName;\n\t        });\n\t        collaborators[i].notify = !collaborators[i].notify;\n\t        this.props.setFormData('collaborators', collaborators);\n\t      } else if (e.target.name === 'leadInvestigatorEmail_notify') {\n\t        var currNotify = this.props.formData.notifyLead || false;\n\t        this.props.setFormData('notifyLead', !currNotify);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var collabEmails = this.createCollabEmailFields();\n\t      var fileFields = this.createFileFields();\n\t\n\t      var voiHelp = React.createElement(\n\t        'div',\n\t        null,\n\t        'For help finding variables of interest, consult the ',\n\t        React.createElement(\n\t          'a',\n\t          { href: loris.BaseURL + '/datadict/' },\n\t          'Data Dictionary'\n\t        )\n\t      );\n\t      var collabNames = [];\n\t      if (this.props.formData.collaborators) {\n\t        collabNames = this.props.formData.collaborators.map(function (c) {\n\t          return c.name;\n\t        });\n\t      }\n\t\n\t      var voiTypeOptions = {\n\t        All: 'All',\n\t        Behavioral: 'Behavioral',\n\t        Imaging: 'Imaging'\n\t      };\n\t\n\t      var allVOIs = this.props.allVOIs;\n\t      var voiOptions = {};\n\t      var type = this.props.formData.voiType;\n\t      if (type && type !== 'All') {\n\t        voiOptions = this.props.allVOIs[type];\n\t      } else {\n\t        // maintain behavioral VoIs by creating an object copy\n\t        var bvlCopy = Object.assign({}, allVOIs.Behavioral);\n\t        voiOptions = Object.assign(bvlCopy, allVOIs.Imaging);\n\t      }\n\t\n\t      return React.createElement(\n\t        'div',\n\t        null,\n\t        React.createElement(TextareaElement, {\n\t          name: 'description',\n\t          label: 'Description',\n\t          onUserInput: this.props.setFormData,\n\t          required: true,\n\t          value: this.props.formData.description\n\t        }),\n\t        React.createElement(TextboxElement, {\n\t          name: 'leadInvestigator',\n\t          label: 'Lead Investigator',\n\t          onUserInput: this.props.setFormData,\n\t          required: true,\n\t          value: this.props.formData.leadInvestigator\n\t        }),\n\t        React.createElement(EmailElement, {\n\t          name: 'leadInvestigatorEmail',\n\t          label: 'Lead Investigator Email',\n\t          onUserInput: this.props.setFormData,\n\t          onUserBlur: this.props.validateEmail,\n\t          toggleEmailNotify: this.toggleEmailNotify,\n\t          errorMessage: this.props.formErrors.leadInvestigatorEmail,\n\t          required: true,\n\t          value: this.props.formData.leadInvestigatorEmail,\n\t          addressee: 'leadInvestigator'\n\t        }),\n\t        React.createElement(TagsElement, {\n\t          name: 'usersWithEditPerm',\n\t          id: 'usersWithEditPerm',\n\t          label: 'LORIS Users with Edit Permission',\n\t          options: this.props.users,\n\t          useSearch: true,\n\t          strictSearch: true,\n\t          onUserInput: this.props.setFormData,\n\t          onUserAdd: this.props.addListItem,\n\t          onUserRemove: this.props.removeListItem,\n\t          value: this.props.formData.pendingUWEP,\n\t          pendingValKey: 'pendingUWEP',\n\t          items: this.props.formData.usersWithEditPerm,\n\t          btnLabel: 'Add User'\n\t        }),\n\t        React.createElement(TagsElement, {\n\t          name: 'collaborators',\n\t          id: 'collaborators',\n\t          label: 'Collaborators',\n\t          options: this.props.allCollabs,\n\t          useSearch: true,\n\t          strictSearch: false,\n\t          onUserInput: this.props.setFormData,\n\t          onUserAdd: this.addCollaborator,\n\t          onUserRemove: this.removeCollaborator,\n\t          value: this.props.formData.pendingCollab,\n\t          pendingValKey: 'pendingCollab',\n\t          items: collabNames,\n\t          btnLabel: 'Add Collaborator'\n\t        }),\n\t        collabEmails,\n\t        React.createElement(TagsElement, {\n\t          name: 'keywords',\n\t          id: 'keywords',\n\t          label: 'Keywords',\n\t          options: this.props.allKWs,\n\t          useSearch: true,\n\t          strictSearch: false,\n\t          onUserInput: this.props.setFormData,\n\t          onUserAdd: this.props.addListItem,\n\t          onUserRemove: this.props.removeListItem,\n\t          value: this.props.formData.pendingKWItem,\n\t          pendingValKey: 'pendingKWItem',\n\t          items: this.props.formData.keywords,\n\t          btnLabel: 'Add Keyword'\n\t        }),\n\t        React.createElement(SelectElement, {\n\t          name: 'voiType',\n\t          label: 'Type of Variables of Interest',\n\t          options: voiTypeOptions,\n\t          onUserInput: this.props.setFormData,\n\t          value: this.props.formData.voiType,\n\t          emptyOption: false\n\t        }),\n\t        React.createElement(TagsElement, {\n\t          name: 'voiFields',\n\t          id: 'voiFields',\n\t          label: 'Variables of Interest',\n\t          useSearch: true,\n\t          strictSearch: true,\n\t          onUserInput: this.props.setFormData,\n\t          onUserAdd: this.props.addListItem,\n\t          onUserRemove: this.props.removeListItem,\n\t          required: false,\n\t          value: this.props.formData.pendingItemVF,\n\t          options: voiOptions,\n\t          pendingValKey: 'pendingItemVF',\n\t          items: this.props.formData.voiFields,\n\t          btnLabel: 'Add Variable of Interest'\n\t        }),\n\t        React.createElement(StaticElement, {\n\t          text: voiHelp\n\t        }),\n\t        fileFields,\n\t        React.createElement(ButtonElement, { label: this.props.editMode ? \"Submit\" : \"Propose Project\" })\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return ProjectFormFields;\n\t}(React.Component);\n\t/**\n\t * Tags Component\n\t * Allows for multiple values to be entered for a single field\n\t *\n\t * Comes in 3 flavors:\n\t * 1: If options are passed and useSearch = true\n\t *    input field is rendered as a searchable dropdown\n\t * 2: If only options are passed, input is rendered as\n\t *    a normal dropdown select\n\t * 3: Without options, input is a normal, free text input\n\t */\n\t\n\tvar TagsElement = function (_React$Component3) {\n\t  _inherits(TagsElement, _React$Component3);\n\t\n\t  function TagsElement() {\n\t    _classCallCheck(this, TagsElement);\n\t\n\t    var _this4 = _possibleConstructorReturn(this, (TagsElement.__proto__ || Object.getPrototypeOf(TagsElement)).call(this));\n\t\n\t    _this4.handleChange = _this4.handleChange.bind(_this4);\n\t    _this4.handleKeyPress = _this4.handleKeyPress.bind(_this4);\n\t    _this4.handleAdd = _this4.handleAdd.bind(_this4);\n\t    _this4.handleRemove = _this4.handleRemove.bind(_this4);\n\t    _this4.getKeyFromValue = _this4.getKeyFromValue.bind(_this4);\n\t    _this4.canAddItem = _this4.canAddItem.bind(_this4);\n\t    return _this4;\n\t  }\n\t\n\t  // pendingValKey is the placeholder variable for temporarily storing\n\t  // typed or selected items before adding them to the Tags\n\t\n\t\n\t  _createClass(TagsElement, [{\n\t    key: 'handleChange',\n\t    value: function handleChange(e) {\n\t      this.props.onUserInput(this.props.pendingValKey, e.target.value);\n\t    }\n\t    // also add tags if enter key is hit within input field\n\t\n\t  }, {\n\t    key: 'handleKeyPress',\n\t    value: function handleKeyPress(e) {\n\t      if (e.keyCode === 13 || e.which === 13) {\n\t        e.preventDefault();\n\t        this.handleAdd();\n\t      }\n\t    }\n\t\n\t    // send pendingValKey as an argument in order to null out entered item\n\t\n\t  }, {\n\t    key: 'handleAdd',\n\t    value: function handleAdd() {\n\t      var options = this.props.options;\n\t      var value = this.props.value;\n\t      // if using a datalist (search), set value to be the key in options\n\t      if (this.props.useSearch && Object.values(options).indexOf(value) > -1) {\n\t        value = this.getKeyFromValue(value);\n\t      }\n\t      if (this.canAddItem(value)) {\n\t        this.props.onUserAdd(this.props.name, value, this.props.pendingValKey);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'handleRemove',\n\t    value: function handleRemove(e) {\n\t      var value = e.target.getAttribute('data-item');\n\t      this.props.onUserRemove(this.props.name, value);\n\t    }\n\t  }, {\n\t    key: 'getKeyFromValue',\n\t    value: function getKeyFromValue(value) {\n\t      var options = this.props.options;\n\t      return Object.keys(options).find(function (o) {\n\t        return options[o] === value;\n\t      });\n\t    }\n\t\n\t    // helper function to detect if item should be added to Tags\n\t\n\t  }, {\n\t    key: 'canAddItem',\n\t    value: function canAddItem(value) {\n\t      var result = true;\n\t      // reject empty values\n\t      if (!value) {\n\t        result = false;\n\t        // reject if allowDupl is false and item is already in array\n\t      } else if (!this.props.allowDupl && this.props.items.indexOf(value) > -1) {\n\t        result = false;\n\t        // reject if using a strict datalist and value is not in options\n\t      } else if (this.props.useSearch && this.props.strictSearch && Object.keys(this.props.options).indexOf(value) === -1) {\n\t        result = false;\n\t      }\n\t\n\t      return result;\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var disabled = this.props.disabled ? 'disabled' : null;\n\t      var requiredHTML = null;\n\t      var emptyOptionHTML = null;\n\t      var errorMessage = null;\n\t      var elementClass = \"row form-group\";\n\t      // Add required asterix\n\t      if (this.props.required) {\n\t        requiredHTML = React.createElement(\n\t          'span',\n\t          { className: 'text-danger' },\n\t          '*'\n\t        );\n\t      }\n\t\n\t      // Add empty option\n\t      if (this.props.emptyOption) {\n\t        emptyOptionHTML = React.createElement('option', null);\n\t      }\n\t\n\t      if (this.props.errorMessage) {\n\t        errorMessage = React.createElement(\n\t          'span',\n\t          null,\n\t          this.props.errorMessage\n\t        );\n\t        elementClass = 'row form-group has-error';\n\t      }\n\t\n\t      var input = void 0;\n\t      var options = this.props.options;\n\t      // if options are given and useSearch is specified\n\t      if (Object.keys(options).length > 0 && this.props.useSearch) {\n\t        input = React.createElement(\n\t          'div',\n\t          null,\n\t          React.createElement('input', {\n\t            type: 'text',\n\t            name: this.props.name,\n\t            id: this.props.id,\n\t            list: this.props.id + '_list',\n\t            className: 'form-control',\n\t            value: this.props.value || \"\",\n\t            disabled: disabled,\n\t            onChange: this.handleChange,\n\t            onKeyPress: this.handleKeyPress\n\t          }),\n\t          React.createElement(\n\t            'datalist',\n\t            { id: this.props.id + '_list' },\n\t            Object.keys(options).map(function (option) {\n\t              return React.createElement(\n\t                'option',\n\t                { value: options[option], key: option },\n\t                options[option]\n\t              );\n\t            })\n\t          )\n\t        );\n\t        // if options are present but useSearch is false, use normal dropdown\n\t      } else if (Object.keys(options).length > 0) {\n\t        input = React.createElement(\n\t          'select',\n\t          {\n\t            name: this.props.name,\n\t            className: 'form-control',\n\t            id: this.props.id,\n\t            value: this.props.value,\n\t            disabled: disabled,\n\t            onChange: this.handleChange,\n\t            onKeyPress: this.handleKeyPress\n\t          },\n\t          emptyOptionHTML,\n\t          Object.keys(options).map(function (option) {\n\t            return React.createElement(\n\t              'option',\n\t              { value: option, key: option },\n\t              options[option]\n\t            );\n\t          })\n\t        );\n\t        // else, use a text input by default\n\t      } else {\n\t        input = React.createElement('input', {\n\t          type: 'text',\n\t          name: this.props.name,\n\t          id: this.props.id,\n\t          className: 'form-control',\n\t          value: this.props.value || \"\",\n\t          disabled: disabled,\n\t          onChange: this.handleChange,\n\t          onKeyPress: this.handleKeyPress\n\t        });\n\t      }\n\t\n\t      // iterate through added Tags items and render them\n\t      // with deletion button\n\t      var items = this.props.items.map(function (item) {\n\t        var itmTxt = void 0;\n\t        // in event that the passed item is a key of options,\n\t        // render option value\n\t        if (Object.keys(options).length > 0 && options[item] !== undefined) {\n\t          itmTxt = options[item];\n\t          // otherwise just render item as is\n\t        } else {\n\t          itmTxt = item;\n\t        }\n\t        return React.createElement(\n\t          'button',\n\t          {\n\t            className: 'btn btn-info btn-inline',\n\t            type: 'button',\n\t            onClick: this.handleRemove,\n\t            'data-item': item\n\t          },\n\t          itmTxt,\n\t          '\\xA0',\n\t          React.createElement('span', {\n\t            className: 'glyphicon glyphicon-remove',\n\t            'data-item': item\n\t          })\n\t        );\n\t      }, this);\n\t      return React.createElement(\n\t        'div',\n\t        { className: elementClass },\n\t        React.createElement(\n\t          'label',\n\t          { className: 'col-sm-3 control-label', htmlFor: this.props.id },\n\t          this.props.label,\n\t          requiredHTML\n\t        ),\n\t        React.createElement(\n\t          'div',\n\t          { className: 'col-sm-9' },\n\t          items,\n\t          input,\n\t          errorMessage,\n\t          React.createElement(\n\t            'button',\n\t            {\n\t              className: 'btn btn-success btn-add-tag',\n\t              id: this.props.id + 'Add',\n\t              type: 'button',\n\t              onClick: this.handleAdd\n\t            },\n\t            React.createElement('span', { className: 'glyphicon glyphicon-plus' }),\n\t            this.props.btnLabel\n\t          )\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return TagsElement;\n\t}(React.Component);\n\t\n\tTagsElement.propTypes = {\n\t  name: React.PropTypes.string.isRequired,\n\t  id: React.PropTypes.string.isRequired,\n\t  pendingValKey: React.PropTypes.string.isRequired,\n\t  options: React.PropTypes.object,\n\t  items: React.PropTypes.array,\n\t  label: React.PropTypes.string,\n\t  value: React.PropTypes.string,\n\t  class: React.PropTypes.string,\n\t  multiple: React.PropTypes.bool,\n\t  required: React.PropTypes.bool,\n\t  disabled: React.PropTypes.bool,\n\t  emptyOption: React.PropTypes.bool,\n\t  errorMessage: React.PropTypes.string,\n\t  btnLabel: React.PropTypes.string,\n\t  allowDupl: React.PropTypes.bool,\n\t  useSearch: React.PropTypes.bool,\n\t  strictSearch: React.PropTypes.bool,\n\t  onUserInput: React.PropTypes.func,\n\t  onUserAdd: React.PropTypes.func,\n\t  onUserRemove: React.PropTypes.func\n\t};\n\t\n\tTagsElement.defaultProps = {\n\t  name: '',\n\t  options: {},\n\t  items: [],\n\t  label: '',\n\t  value: undefined,\n\t  id: '',\n\t  class: '',\n\t  required: false,\n\t  disabled: false,\n\t  emptyOption: true,\n\t  hasError: false,\n\t  allowDupl: false,\n\t  useSearch: false,\n\t  strictSearch: false, // only accept items specified in options\n\t  errorMessage: '',\n\t  pendingValKey: '',\n\t  btnLabel: 'Add Tag',\n\t  onUserInput: function onUserInput() {\n\t    console.warn('onUserInput() callback is not set');\n\t  },\n\t  onUserAdd: function onUserAdd() {\n\t    console.warn('onUserAdd() callback is not set');\n\t  },\n\t  onUserRemove: function onUserRemove() {\n\t    console.warn('onUserRemove() callback is not set');\n\t  }\n\t};\n\t\n\texports.default = ProjectFormFields;\n\n/***/ },\n\n/***/ 27:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Modify behaviour of specified column cells in the Data Table component\n\t * @param {string} column - column name\n\t * @param {string} cell - cell content\n\t * @param {array} rowData - array of cell contents for a specific row\n\t * @param {array} rowHeaders - array of table headers (column names)\n\t * @return {*} a formated table cell for a given column\n\t */\n\tfunction formatColumn(column, cell, rowData, rowHeaders) {\n\t  // If a column if set as hidden, don't display it\n\t  if (loris.hiddenHeaders.indexOf(column) > -1) {\n\t    return null;\n\t  }\n\t\n\t  // Create the mapping between rowHeaders and rowData in a row object.\n\t  var row = {};\n\t  rowHeaders.forEach(function (header, index) {\n\t    row[header] = rowData[index];\n\t  }, this);\n\t\n\t  var classes = [];\n\t  if (column === 'Title') {\n\t    var pubID = row['Publication ID'];\n\t    var viewURL = loris.BaseURL + '/publication/view_project?id=' + pubID;\n\t\n\t    return React.createElement(\n\t      'td',\n\t      null,\n\t      React.createElement(\n\t        'a',\n\t        { href: viewURL },\n\t        cell\n\t      )\n\t    );\n\t  }\n\t  return React.createElement(\n\t    'td',\n\t    { className: classes },\n\t    cell\n\t  );\n\t}\n\t\n\texports.default = formatColumn;\n\n/***/ }\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// modules/publication/js/publicationIndex.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b00c1a08211112abecb8","import FilterForm from 'FilterForm';\nimport {Tabs, TabPane} from 'Tabs';\nimport PublicationUploadForm from './uploadForm.js';\nimport formatColumn from './columnFormatter';\n\nclass PublicationIndex extends React.Component {\n  constructor() {\n    super();\n    loris.hiddenHeaders = ['Description', 'Keywords', 'Variables Of Interest', 'Publication ID', 'Collaborators'];\n    this.state = {\n      isLoaded: false,\n      filter: {}\n    };\n\n    // Bind component instance to custom methods\n    this.fetchData = this.fetchData.bind(this);\n    this.updateFilter = this.updateFilter.bind(this);\n    this.resetFilters = this.resetFilters.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  fetchData() {\n    $.ajax(this.props.DataURL, {\n      method: \"GET\",\n      dataType: 'json',\n      success: function(data) {\n        this.setState({\n          Data: data,\n          isLoaded: true\n        });\n      }.bind(this),\n      error: function(error) {\n        console.error(error);\n      }\n    });\n  }\n\n  updateFilter(filter) {\n    this.setState({filter});\n  }\n\n  resetFilters() {\n    this.publicationsFilter.clearFilter();\n  }\n\n  render() {\n    if (!this.state.isLoaded) {\n      return (\n        <button className=\"btn-info has-spinner\">\n          Loading\n          <span\n            className=\"glyphicon glyphicon-refresh glyphicon-refresh-animate\">\n          </span>\n        </button>\n      );\n    }\n    let tabList = [\n      {\n        id: \"browse\",\n        label: \"Browse\"\n      }\n    ];\n    let proposalTab;\n    if (loris.userHasPermission('publication_propose')) {\n      tabList.push({\n        id: \"propose\",\n        label: \"Propose a Project\"\n      });\n\n      proposalTab = (\n        <TabPane TabId={tabList[1].id}>\n          <PublicationUploadForm\n            DataURL={`${loris.BaseURL}/publication/ajax/getData.php?action=getData`}\n            action={`${loris.BaseURL}/publication/ajax/FileUpload.php?action=upload`}\n            editMode={false}\n          />\n        </TabPane>\n      );\n    }\n\n    const filterRef = function(f) {\n      this.publicationsFilter = f;\n    }.bind(this);\n\n    return (\n      <Tabs tabs={tabList} defaultTab=\"browse\" updateURL={true}>\n        <TabPane TabId={tabList[0].id}>\n          <FilterForm\n            Module=\"publication\"\n            name=\"publications_filter\"\n            id=\"publications_filter_form\"\n            ref={filterRef}\n            columns={3}\n            formElements={this.state.Data.form}\n            onUpdate={this.updateFilter}\n            filter={this.state.filter}\n          >\n            <br/>\n            <ButtonElement\n              label=\"Clear Filters\"\n              type=\"reset\"\n              onUserInput={this.resetFilters}\n            />\n          </FilterForm>\n          <StaticDataTable\n            Data={this.state.Data.Data}\n            Headers={this.state.Data.Headers}\n            Filter={this.state.filter}\n            getFormattedCell={formatColumn}\n          />\n        </TabPane>\n        {proposalTab}\n      </Tabs>\n    );\n  }\n}\n\n$(function() {\n  const publicationIndex = (\n    <div className=\"page-publications\">\n      <PublicationIndex DataURL={`${loris.BaseURL}/publication/?format=json`}/>\n    </div>\n  );\n\n  ReactDOM.render(publicationIndex, document.getElementById('lorisworkspace'));\n});\n\n\n\n// WEBPACK FOOTER //\n// ./modules/publication/jsx/publicationIndex.js","/**\n * This file contains React component for Panel\n *\n * @author Alex I.\n * @version 1.0.0\n *\n */\n\n/**\n * Panel component\n * Wraps children in a collapsible bootstrap panel\n */\nclass Panel extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      collapsed: this.props.initCollapsed\n    };\n\n    // Initialize panel class based on collapsed status\n    this.panelClass = (\n      this.props.initCollapsed ?\n        \"panel-collapse collapse\" :\n        \"panel-collapse collapse in\"\n    );\n\n    this.toggleCollapsed = this.toggleCollapsed.bind(this);\n  }\n\n  toggleCollapsed() {\n    this.setState({collapsed: !this.state.collapsed});\n  }\n\n  render() {\n    // Change arrow direction based on collapse status\n    let glyphClass = (\n      this.state.collapsed ?\n        \"glyphicon pull-right glyphicon-chevron-down\" :\n        \"glyphicon pull-right glyphicon-chevron-up\"\n    );\n\n    // Add panel header, if title is set\n    const panelHeading = this.props.title ? (\n      <div\n        className=\"panel-heading\"\n        onClick={this.toggleCollapsed}\n        data-toggle=\"collapse\"\n        data-target={'#' + this.props.id}\n        style={{cursor: 'pointer'}}\n      >\n        {this.props.title}\n        <span className={glyphClass}></span>\n      </div>\n    ) : '';\n\n    return (\n      <div className=\"panel panel-primary\">\n        {panelHeading}\n        <div id={this.props.id} className={this.panelClass} role=\"tabpanel\">\n          <div className=\"panel-body\" style={{height: this.props.height}}>\n            {this.props.children}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nPanel.propTypes = {\n  id: React.PropTypes.string,\n  height: React.PropTypes.string,\n  title: React.PropTypes.string\n};\nPanel.defaultProps = {\n  initCollapsed: false,\n  id: 'default-panel',\n  height: '100%'\n};\n\nexport default Panel;\n\n\n\n// WEBPACK FOOTER //\n// ./jsx/Panel.js","/**\n * This file contains React components for Tabs component.\n *\n * @author Loris Team\n * @version 1.1.0\n *\n */\n\n/**\n * Tabs Component.\n * React wrapper for Bootstrap tabs. Allows to dynamically render tabs\n * and corresponding tab panes.\n *\n * ================================================\n * Usage:\n *\n * 1. Define an array of tabs with IDs and labels\n *\n * `let tabList = [{id: \"tab1\", label: \"This is tab title\"}];`\n *\n * 2. Pass tabList as <Tab> property and <TabPane> as child\n *  ```\n * <Tabs tabs={tabList} defaultTab=\"tab1\">\n *   <TabPane TabId={tabList[0].id}>\n *     // Tab content goes here\n *   </TabPane>\n * </Tabs>\n * ```\n * =================================================\n *\n */\nclass Tabs extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    const hash = window.location.hash;\n    let activeTab = \"\";\n\n    /**\n     * Determine the initial active tab in this order\n     * 1. Try to infer from the URL, otherwise\n     * 2. Try to infer from the defaultTab prop, otherwise\n     * 3. Set to be the first tab of the list\n     */\n    if (this.props.updateURL && hash) {\n      activeTab = hash.substr(1);\n    } else if (this.props.defaultTab) {\n      activeTab = this.props.defaultTab;\n    } else if (this.props.tabs.length > 0) {\n      activeTab = this.props.tabs[0].id;\n    }\n\n    this.state = {\n      activeTab: activeTab\n    };\n\n    this.handleClick = this.handleClick.bind(this);\n    this.getTabs = this.getTabs.bind(this);\n    this.getTabPanes = this.getTabPanes.bind(this);\n  }\n\n  handleClick(tabId, e) {\n    this.setState({activeTab: tabId});\n    this.props.onTabChange(tabId);\n\n    // Add tab href to URL querystring and scroll the page to top\n    if (this.props.updateURL) {\n      const scrollDistance = $('body').scrollTop() || $('html').scrollTop();\n      window.location.hash = e.target.hash;\n      $('html,body').scrollTop(scrollDistance);\n    }\n  }\n\n  getTabs() {\n    let tabs = (this.props.tabs).map(function(tab) {\n      let tabClass = this.state.activeTab === tab.id ? 'active' : null;\n      let href = \"#\" + tab.id;\n      let tabID = \"tab-\" + tab.id;\n      return (\n        <li\n          role=\"presentation\"\n          className={tabClass}\n          key={tab.id}\n        >\n          <a id={tabID}\n             href={href}\n             role=\"tab\"\n             data-toggle=\"tab\"\n             onClick={this.handleClick.bind(null, tab.id)}\n          >\n            {tab.label}\n          </a>\n        </li>\n      );\n    }.bind(this));\n\n    return tabs;\n  }\n\n  getTabPanes() {\n    let tabPanes = React.Children.map(this.props.children, function(child, key) {\n      if (child) {\n        return React.cloneElement(child, {\n          activeTab: this.state.activeTab,\n          key: key\n        });\n      }\n    }.bind(this));\n\n    return tabPanes;\n  }\n\n  render() {\n    let tabs = this.getTabs();\n    let tabPanes = this.getTabPanes();\n    let tabStyle = {\n      marginLeft: 0,\n      marginBottom: '5px'\n    };\n\n    return (\n      <div>\n        <ul className=\"nav nav-tabs\" role=\"tablist\" style={tabStyle}>\n          {tabs}\n        </ul>\n        <div className=\"tab-content\">\n          {tabPanes}\n        </div>\n      </div>\n    );\n  }\n}\nTabs.propTypes = {\n  tabs: React.PropTypes.array.isRequired,\n  defaultTab: React.PropTypes.string,\n  updateURL: React.PropTypes.bool\n};\nTabs.defaultProps = {\n  onTabChange: function() {},\n  updateURL: false\n};\n\n/*\n * TabPane component.\n * Used to wrap content for every tab.\n */\nclass TabPane extends React.Component {\n  render() {\n    let classList = \"tab-pane\";\n    let title;\n\n    if (this.props.TabId === this.props.activeTab) {\n      classList += \" active\";\n    }\n    if (this.props.Title) {\n      title = <h1>{this.props.Title}</h1>;\n    }\n\n    return (\n      <div role=\"tabpanel\" className={classList} id={this.props.TabId}>\n        {title}\n        {this.props.children}\n      </div>\n    );\n  }\n}\nTabPane.propTypes = {\n  TabId: React.PropTypes.string.isRequired,\n  Title: React.PropTypes.string,\n  activeTab: React.PropTypes.string\n};\n\nexport {\n  Tabs,\n  TabPane\n};\n\n\n\n// WEBPACK FOOTER //\n// ./jsx/Tabs.js","/**\n * This file contains React component for FilterForm\n *\n * @author Loris Team\n * @version 1.1.0\n *\n */\n\nimport Panel from 'Panel';\n\n/**\n * FilterForm component.\n * A wrapper for form elements inside a selection filter.\n *\n * Adds necessary filter callbacks to all children and passes them to FormElement\n * for proper rendering.\n *\n * Keeps track of filter object and sends it to parent on every update.\n *\n * //HACK/NOTE: Loris has special behaviour for `candID` attribute in the query string,\n * making it impossible to use it for selection filters. This components renames\n * all `candID` fields to `candidateID` automatically before appending them to URL.\n *\n */\nclass FilterForm extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    // Bind component instance to custom methods\n    this.clearFilter = this.clearFilter.bind(this);\n    this.getFormChildren = this.getFormChildren.bind(this);\n    this.setFilter = this.setFilter.bind(this);\n    this.onElementUpdate = this.onElementUpdate.bind(this);\n\n    // Keeps track of querystring values\n    // Saved as class variable instead of keeping in state\n    this.queryString = QueryString.get();\n  }\n\n  componentDidMount() {\n    let filter = {};\n    let queryString = this.queryString;\n\n    // Initiaze filter using querystring value\n    Object.keys(queryString).forEach(function(key) {\n      let filterKey = (key === 'candidateID') ? 'candID' : key;\n      filter[filterKey] = {\n        value: queryString[key],\n        exactMatch: false\n      };\n    });\n\n    // Update parent component\n    this.props.onUpdate(filter);\n  }\n\n  /**\n   * Clear the filter object, querystring and input fields\n   */\n  clearFilter() {\n    this.queryString = QueryString.clear(this.props.Module);\n    this.props.onUpdate({});\n  }\n\n  /**\n   * Itterates through FilterForm children, sets necessary callback functions\n   * and initializes filterTable\n   *\n   * @return {Array} formChildren - array of children with necessary props\n   */\n  getFormChildren() {\n    let formChildren = [];\n    React.Children.forEach(this.props.children, function(child, key) {\n      // If child is a React component (i.e not a simple DOM element)\n      if (React.isValidElement(child) &&\n        typeof child.type === \"function\" &&\n        child.props.onUserInput\n      ) {\n        let callbackFunc = child.props.onUserInput;\n        let callbackName = callbackFunc.name;\n        let elementName = child.type.displayName;\n        let queryFieldName = (child.props.name === 'candID') ? 'candidateID' : child.props.name;\n        let filterValue = this.queryString[queryFieldName];\n        // If callback function was not set, set it to onElementUpdate() for form\n        // elements and to clearFilter() for <ButtonElement type='reset'/>.\n        if (callbackName === \"onUserInput\") {\n          if (elementName === \"ButtonElement\" && child.props.type === \"reset\") {\n            callbackFunc = this.clearFilter;\n          } else {\n            callbackFunc = this.onElementUpdate.bind(null, elementName);\n          }\n        }\n        // Pass onUserInput and value props to all children\n        formChildren.push(React.cloneElement(child, {\n          onUserInput: callbackFunc,\n          value: filterValue ? filterValue : '',\n          key: key\n        }));\n        // Initialize filter for StaticDataTable\n        this.setFilter(elementName, child.props.name, filterValue);\n      } else {\n        formChildren.push(React.cloneElement(child, {key: key}));\n      }\n    }.bind(this));\n\n    return formChildren;\n  }\n\n  /**\n   * Appends entry to filter object or deletes it if value is\n   * empty.\n   *\n   * Sets exactMatch to true for all SelectElements (i.e dropdowns)\n   * in order to force StaticDataTable to do exact comparaison\n   *\n   * @param {string} type - form element type (i.e component name)\n   * @param {string} key - the name of the form element\n   * @param {string} value - the value of the form element\n   *\n   * @return {{}} filter - filterData\n   */\n  setFilter(type, key, value) {\n    let filter = {};\n    if (this.props.filter) {\n      filter = JSON.parse(JSON.stringify(this.props.filter));\n    }\n\n    if (key && value) {\n      filter[key] = {};\n      filter[key].value = value;\n      filter[key].exactMatch = (type === \"SelectElement\");\n    } else if (filter && key && value === '') {\n      delete filter[key];\n    }\n\n    return filter;\n  }\n\n  /**\n   * Sets filter object and querystring to reflect values of input fields\n   *\n   * @param {string} type - form element type (i.e component name)\n   * @param {string} fieldName - the name of the form element\n   * @param {string} fieldValue - the value of the form element\n   */\n  onElementUpdate(type, fieldName, fieldValue) {\n    // Make sure both key/value are string before sending them to querystring\n    if (typeof fieldName !== \"string\" || typeof fieldValue !== \"string\") {\n      return;\n    }\n\n    // Update query string\n    let queryFieldName = (fieldName === 'candID') ? 'candidateID' : fieldName;\n    this.queryString = QueryString.set(this.queryString, queryFieldName, fieldValue);\n\n    // Update filter and get new filter object\n    let filter = this.setFilter(type, fieldName, fieldValue);\n    this.props.onUpdate(filter);\n  }\n\n  render() {\n    // Get formatted children\n    let formChildren = this.getFormChildren();\n    let formElements = this.props.formElements;\n\n    if (formElements) {\n      Object.keys(formElements).forEach(function(fieldName) {\n        let queryFieldName = (fieldName === 'candID') ? 'candidateID' : fieldName;\n        formElements[fieldName].onUserInput = this.onElementUpdate.bind(null, fieldName);\n        formElements[fieldName].value = this.queryString[queryFieldName];\n      }.bind(this));\n    }\n\n    return (\n      <Panel\n        id={this.props.id}\n        height={this.props.height}\n        title={this.props.title}\n      >\n        <FormElement {...this.props}>\n          {formChildren}\n        </FormElement>\n      </Panel>\n    );\n  }\n}\n\nFilterForm.defaultProps = {\n  id: 'selection-filter',\n  height: '100%',\n  title: 'Selection Filter',\n  onUpdate: function() {\n    console.warn('onUpdate() callback is not set!');\n  }\n};\nFilterForm.propTypes = {\n  Module: React.PropTypes.string.isRequired,\n  filter: React.PropTypes.object.isRequired,\n  id: React.PropTypes.string,\n  height: React.PropTypes.string,\n  title: React.PropTypes.string,\n  onUpdate: React.PropTypes.func\n};\n\nexport default FilterForm;\n\n\n\n// WEBPACK FOOTER //\n// ./jsx/FilterForm.js","import ProjectFormFields from './projectFields';\n\nclass PublicationUploadForm extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      Data: {},\n      formData: {},\n      numFiles: 0,\n      uploadResult: null,\n      loadError: undefined,\n      formErrors: {},\n      isLoaded: false,\n      loadedData: 0,\n      uploadProgress: -1\n    };\n\n    this.setFormData = this.setFormData.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.addListItem = this.addListItem.bind(this);\n    this.removeListItem = this.removeListItem.bind(this);\n    this.validateEmail = this.validateEmail.bind(this);\n    this.setFileData = this.setFileData.bind(this);\n    this.fetchData = this.fetchData.bind(this);\n  }\n\n  validateEmail(field, email) {\n    let formErrors = this.state.formErrors;\n\n    // don't supply error if email is blank\n    if (email === '' || email === null || email === undefined) {\n      delete formErrors[field];\n      // if email is invalid, set error, else nullify error\n    } else if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(email) === false) {\n      formErrors[field] = 'Invalid email';\n    } else {\n      delete formErrors[field];\n    }\n    this.setState({formErrors});\n  }\n\n  fetchData() {\n    let self = this;\n    $.ajax(this.props.DataURL, {\n      dataType: 'json',\n      success: function(data) {\n        self.setState({\n          Data: data,\n          isLoaded: true\n        });\n      },\n      error: function(data, errorCode, errorMsg) {\n        console.error(data, errorCode, errorMsg);\n        self.setState({\n          loadError: 'An error occurred when loading the form!'\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  setFileData(formElement, value) {\n    let numFiles = this.state.numFiles;\n    if (!this.state.formData[formElement]) {\n      numFiles += 1;\n      this.setState({numFiles: numFiles});\n    }\n    this.setFormData(formElement, value);\n  }\n\n  setFormData(formElement, value) {\n    let formData = this.state.formData;\n    formData[formElement] = value;\n    this.setState({\n      formData: formData\n    });\n  }\n\n  addListItem(formElement, value, pendingValKey) {\n    let formData = this.state.formData;\n    let listItems = formData[formElement] || [];\n    listItems.push(value);\n    formData[formElement] = listItems;\n    formData[pendingValKey] = null;\n    this.setState({\n      formData: formData\n    });\n  }\n\n  removeListItem(formElement, value) {\n    let formData = this.state.formData;\n    let listItems = formData[formElement];\n    let index = listItems.indexOf(value);\n\n    if (index > -1) {\n      listItems.splice(index, 1);\n      formData[formElement] = listItems;\n      this.setState({\n        formData: formData\n      });\n    }\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    if (Object.keys(this.state.formErrors).length > 0) {\n      swal(\n        'Please fix any remaining form errors before submission',\n        '',\n        'error'\n      );\n      return;\n    }\n    let formData = this.state.formData;\n\n    let formObj = new FormData();\n    for (let key in formData) {\n      if (formData.hasOwnProperty(key) && formData[key] !== \"\") {\n        let formVal;\n        if (Array.isArray(formData[key])) {\n          formVal = JSON.stringify(formData[key]);\n        } else {\n          formVal = formData[key];\n        }\n        formObj.append(key, formVal);\n      }\n    }\n\n    $.ajax({\n      type: 'POST',\n      url: this.props.action,\n      data: formObj,\n      cache: false,\n      contentType: false,\n      processData: false,\n      success: function() {\n        // reset form data\n        this.setState({\n          formData: {},\n          numFiles: 0\n        });\n        swal(\n          {\n            title: \"Submission Successful!\",\n            type: \"success\"\n          },\n          function() {\n            window.location.replace(loris.BaseURL + '/publication/');\n          }\n        );\n      }.bind(this),\n      error: function(jqXHR) {\n        console.error(jqXHR);\n        let resp = \"\";\n        try {\n          resp = JSON.parse(jqXHR.responseText).message;\n        } catch (e) {\n          console.error(e);\n        }\n        swal(\"Something went wrong!\", resp, \"error\");\n      }\n    });\n  }\n\n  render() {\n    // Data loading error\n    if (this.state.loadError !== undefined) {\n      return (\n        <div className=\"alert alert-danger text-center\">\n          <strong>\n            {this.state.error}\n          </strong>\n        </div>\n      );\n    }\n\n    // Waiting for data to load\n    if (!this.state.isLoaded) {\n      return (\n        <button className=\"btn-info has-spinner\">\n          Loading\n          <span\n            className=\"glyphicon glyphicon-refresh glyphicon-refresh-animate\">\n          </span>\n        </button>\n      );\n    }\n\n    let createElements;\n    let formClass = \"col-md-12 col-lg-12\";\n    if (!this.props.editMode) {\n      createElements = [\n        <h3 className=\"col-md-offset-3 col-lg-offset-3\">Propose a new project</h3>,\n        <TextboxElement\n          name=\"title\"\n          label=\"Title\"\n          onUserInput={this.setFormData}\n          required={true}\n          value={this.state.formData.title}\n        />\n      ];\n      // if not in edit mode, shrink form for consistent display\n      formClass = \"col-md-8 col-lg-7\";\n    }\n\n    return (\n      <div className=\"row\">\n        <div className={formClass}>\n          <FormElement\n            name=\"publicationUpload\"\n            onSubmit={this.handleSubmit}\n            ref=\"form\"\n            fileUpload={true}\n          >\n            {createElements}\n            <ProjectFormFields\n              formData={this.state.formData}\n              formErrors={this.state.formErrors}\n              numFiles={this.state.numFiles}\n              setFormData={this.setFormData}\n              setFileData={this.setFileData}\n              addListItem={this.addListItem}\n              removeListItem={this.removeListItem}\n              validateEmail={this.validateEmail}\n              toggleEmailNotify={this.toggleEmailNotify}\n              uploadTypes={this.state.Data.uploadTypes}\n              users={this.state.Data.users}\n              allVOIs={this.state.Data.allVOIs}\n              allKWs={this.state.Data.allKWs}\n              allCollabs={this.state.Data.allCollabs}\n              editMode={false}\n            />\n          </FormElement>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default PublicationUploadForm;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/publication/jsx/uploadForm.js","class EmailElement extends React.Component {\n  constructor() {\n    super();\n    this.handleChange = this.handleChange.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n  }\n\n  handleChange(e) {\n    this.props.onUserInput(this.props.name, e.target.value);\n  }\n\n  handleBlur(e) {\n    this.props.onUserBlur(this.props.name, e.target.value);\n  }\n\n  render() {\n    let disabled = this.props.disabled ? 'disabled' : null;\n    let required = this.props.required ? 'required' : null;\n    let errorMessage = null;\n    let requiredHTML = null;\n    let elementClass = 'row form-group';\n\n    // Add required asterix\n    if (required) {\n      requiredHTML = <span className=\"text-danger\">*</span>;\n    }\n\n    // Add error message\n    if (this.props.errorMessage) {\n      errorMessage = <span>{this.props.errorMessage}</span>;\n      elementClass = 'row form-group has-error';\n    }\n\n    return (\n      <div className={elementClass}>\n        <label className=\"col-sm-3 control-label\" htmlFor={this.props.id}>\n          {this.props.label}\n          {requiredHTML}\n        </label>\n        <div className=\"col-sm-7\">\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            name={this.props.name}\n            id={this.props.id}\n            value={this.props.value || \"\"}\n            required={required}\n            disabled={disabled}\n            onChange={this.handleChange}\n            onBlur={this.handleBlur}\n          />\n          {errorMessage}\n        </div>\n        <div className=\"col-sm-2\">\n        <span>\n          <input\n            name={this.props.name + '_notify'}\n            type=\"checkbox\"\n            onChange={this.props.toggleEmailNotify}\n            value={this.props.addressee}\n          />\n          <span>Send email notification?</span>\n        </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nEmailElement.defaultProps = {\n  name: '',\n  label: '',\n  value: '',\n  addressee: '',\n  id: null,\n  disabled: false,\n  required: false,\n  errorMessage: '',\n  onUserInput: function() {\n    console.warn('onUserInput() callback is not set');\n  },\n  onUserBlur: function() {\n  }\n};\n\n// This class combines the common form elements between\n// Edit mode and initial Project Proposal/Creation mode\nclass ProjectFormFields extends React.Component {\n  constructor() {\n    super();\n    this.createCollabEmailFields = this.createCollabEmailFields.bind(this);\n    this.deleteUpload = this.deleteUpload.bind(this);\n    this.createFileFields = this.createFileFields.bind(this);\n    this.addCollaborator = this.addCollaborator.bind(this);\n    this.removeCollaborator = this.removeCollaborator.bind(this);\n    this.setCollaboratorEmail = this.setCollaboratorEmail.bind(this);\n    this.toggleEmailNotify = this.toggleEmailNotify.bind(this);\n  }\n\n  deleteUpload(uploadID) {\n    let self = this;\n    swal({\n      title: \"Are you sure?\",\n      text: \"Are you sure you want to delete this file?\",\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: 'Yes, I am sure!',\n      cancelButtonText: \"No, cancel it!\"\n    },\n      function(willDelete) {\n        if (willDelete) {\n          let url = loris.BaseURL + '/publication/ajax/FileDelete.php?uploadID=' + uploadID;\n          $.ajax(\n            url,\n            {\n              method: 'DELETE',\n              success: function() {\n                self.props.fetchData();\n              }\n            });\n        }\n      });\n  }\n\n  createFileFields() {\n    let fileFields = [];\n    // Create download link & edit fields for existing files\n    if (this.props.files) {\n      this.props.files.forEach(function(f) {\n        let downloadURL = loris.BaseURL + '/publication/ajax/FileDownload.php?File=' + encodeURIComponent(f.URL);\n        let link = (\n          <span>\n            <a href={downloadURL}>{f.URL}</a>\n            &nbsp;&nbsp;\n            <span\n              className=\"glyphicon glyphicon-remove\"\n              style={{cursor: 'pointer'}}\n              onClick={() => this.deleteUpload(f.PublicationUploadID)}\n            />\n          </span>\n        );\n        let existFileFlag = 'existingUpload_';\n        let pubType = existFileFlag + 'publicationType_' + f.PublicationUploadID;\n        let pubCit = existFileFlag + 'publicationCitation_' + f.PublicationUploadID;\n        let pubVer = existFileFlag + 'publicationVersion_' + f.PublicationUploadID;\n        let pubTypeStr = this.props.uploadTypes[this.props.formData[pubType]];\n        fileFields.push(\n          <div>\n            <StaticElement\n              label={pubTypeStr}\n              text={link}\n            />\n            <TextboxElement\n              name={pubCit}\n              label=\"Citation\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[pubCit]}\n            />\n            <TextboxElement\n              name={pubVer}\n              label=\"Publication Version\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[pubVer]}\n            />\n          </div>\n        );\n      }, this);\n    }\n    // create fields for new files\n    for (let i = 0; i <= this.props.numFiles; i++) {\n      let fileName = \"file_\" + i;\n      fileFields.push(\n        <FileElement\n          name={fileName}\n          id={\"publicationUploadEl_\" + i}\n          onUserInput={this.props.setFileData}\n          label=\"File to upload\"\n          value={this.props.formData[fileName]}\n        />\n      );\n      if (this.props.formData[fileName]) {\n        let publicationType = \"publicationType_\" + i;\n        let publicationCitation = \"publicationCitation_\" + i;\n        let publicationVersion = \"publicationVersion_\" + i;\n        fileFields.push(\n          <div>\n            <SelectElement\n              name={publicationType}\n              label=\"Publication Type\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[publicationType]}\n              options={this.props.uploadTypes}\n              required={true}\n            />\n            <TextboxElement\n              name={publicationCitation}\n              label=\"Citation\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[publicationCitation]}\n            />\n            <TextboxElement\n              name={publicationVersion}\n              label=\"Publication Version\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[publicationVersion]}\n            />\n          </div>\n        );\n      }\n    }\n\n    return fileFields;\n  }\n\n  createCollabEmailFields() {\n    let collabEmails = [];\n    if (this.props.formData.collaborators) {\n      this.props.formData.collaborators.forEach(\n        function(c, i) {\n          let name = 'collabEmail_' + c.name;\n          collabEmails.push(\n            <EmailElement\n              name={name}\n              label={c.name + (c.name.slice(-1) === 's' ? \"'\" : \"'s\") + \" Email\"}\n              onUserInput={this.setCollaboratorEmail}\n              onUserBlur={this.props.validateEmail}\n              toggleEmailNotify={this.toggleEmailNotify}\n              errorMessage={this.props.formErrors[name]}\n              required={false}\n              value={this.props.formData.collaborators[i].email}\n              addressee={c.name}\n            />\n          );\n        }, this);\n    }\n    return collabEmails;\n  }\n\n  addCollaborator(formElement, value, pendingValKey) {\n    let collaborators = this.props.formData.collaborators || [];\n    collaborators.push(\n      {\n        name: value,\n        email: null,\n        notify: false\n      }\n    );\n\n    this.props.setFormData('collaborators', collaborators);\n    this.props.setFormData(pendingValKey, null);\n  }\n\n  removeCollaborator(formElement, value) {\n    let collaborators = this.props.formData.collaborators || [];\n    collaborators = collaborators.filter(c => c.name !== value);\n    this.props.setFormData('collaborators', collaborators);\n  }\n\n  setCollaboratorEmail(formElement, value) {\n    let collabName = formElement.split('_')[1];\n    let collaborators = this.props.formData.collaborators;\n    let i = collaborators.findIndex(c => c.name === collabName);\n    collaborators[i].email = value;\n    this.props.setFormData('collaborators', collaborators);\n  }\n\n  toggleEmailNotify(e) {\n    if (e.target.name.indexOf('collabEmail') > -1) {\n      let collaborators = this.props.formData.collaborators;\n      let collabName = e.target.value;\n      let i = collaborators.findIndex(c => c.name === collabName);\n      collaborators[i].notify = !collaborators[i].notify;\n      this.props.setFormData('collaborators', collaborators);\n    } else if (e.target.name === 'leadInvestigatorEmail_notify') {\n      let currNotify = this.props.formData.notifyLead || false;\n      this.props.setFormData('notifyLead', !currNotify);\n    }\n  }\n\n  render() {\n    let collabEmails = this.createCollabEmailFields();\n    let fileFields = this.createFileFields();\n\n    let voiHelp = (<div>For help finding variables of interest, consult\n      the <a href={loris.BaseURL + '/datadict/'}>Data Dictionary</a>\n      </div>);\n    let collabNames = [];\n    if (this.props.formData.collaborators) {\n      collabNames = this.props.formData.collaborators.map(c => c.name);\n    }\n\n    let voiTypeOptions = {\n      All: 'All',\n      Behavioral: 'Behavioral',\n      Imaging: 'Imaging'\n    };\n\n    const allVOIs = this.props.allVOIs;\n    let voiOptions = {};\n    let type = this.props.formData.voiType;\n    if (type && type !== 'All') {\n      voiOptions = this.props.allVOIs[type];\n    } else {\n      // maintain behavioral VoIs by creating an object copy\n      const bvlCopy = Object.assign({}, allVOIs.Behavioral);\n      voiOptions = Object.assign(bvlCopy, allVOIs.Imaging);\n    }\n\n    return (\n      <div>\n        <TextareaElement\n          name=\"description\"\n          label=\"Description\"\n          onUserInput={this.props.setFormData}\n          required={true}\n          value={this.props.formData.description}\n        />\n        <TextboxElement\n          name=\"leadInvestigator\"\n          label=\"Lead Investigator\"\n          onUserInput={this.props.setFormData}\n          required={true}\n          value={this.props.formData.leadInvestigator}\n        />\n        <EmailElement\n          name=\"leadInvestigatorEmail\"\n          label=\"Lead Investigator Email\"\n          onUserInput={this.props.setFormData}\n          onUserBlur={this.props.validateEmail}\n          toggleEmailNotify={this.toggleEmailNotify}\n          errorMessage={this.props.formErrors.leadInvestigatorEmail}\n          required={true}\n          value={this.props.formData.leadInvestigatorEmail}\n          addressee=\"leadInvestigator\"\n        />\n        <TagsElement\n          name=\"usersWithEditPerm\"\n          id=\"usersWithEditPerm\"\n          label=\"LORIS Users with Edit Permission\"\n          options={this.props.users}\n          useSearch={true}\n          strictSearch={true}\n          onUserInput={this.props.setFormData}\n          onUserAdd={this.props.addListItem}\n          onUserRemove={this.props.removeListItem}\n          value={this.props.formData.pendingUWEP}\n          pendingValKey=\"pendingUWEP\"\n          items={this.props.formData.usersWithEditPerm}\n          btnLabel=\"Add User\"\n        />\n        <TagsElement\n          name=\"collaborators\"\n          id=\"collaborators\"\n          label=\"Collaborators\"\n          options={this.props.allCollabs}\n          useSearch={true}\n          strictSearch={false}\n          onUserInput={this.props.setFormData}\n          onUserAdd={this.addCollaborator}\n          onUserRemove={this.removeCollaborator}\n          value={this.props.formData.pendingCollab}\n          pendingValKey=\"pendingCollab\"\n          items={collabNames}\n          btnLabel=\"Add Collaborator\"\n        />\n        {collabEmails}\n        <TagsElement\n          name=\"keywords\"\n          id=\"keywords\"\n          label=\"Keywords\"\n          options={this.props.allKWs}\n          useSearch={true}\n          strictSearch={false}\n          onUserInput={this.props.setFormData}\n          onUserAdd={this.props.addListItem}\n          onUserRemove={this.props.removeListItem}\n          value={this.props.formData.pendingKWItem}\n          pendingValKey=\"pendingKWItem\"\n          items={this.props.formData.keywords}\n          btnLabel=\"Add Keyword\"\n        />\n        <SelectElement\n          name=\"voiType\"\n          label=\"Type of Variables of Interest\"\n          options={voiTypeOptions}\n          onUserInput={this.props.setFormData}\n          value={this.props.formData.voiType}\n          emptyOption={false}\n        />\n        <TagsElement\n          name=\"voiFields\"\n          id=\"voiFields\"\n          label=\"Variables of Interest\"\n          useSearch={true}\n          strictSearch={true}\n          onUserInput={this.props.setFormData}\n          onUserAdd={this.props.addListItem}\n          onUserRemove={this.props.removeListItem}\n          required={false}\n          value={this.props.formData.pendingItemVF}\n          options={voiOptions}\n          pendingValKey=\"pendingItemVF\"\n          items={this.props.formData.voiFields}\n          btnLabel=\"Add Variable of Interest\"\n        />\n        <StaticElement\n          text={voiHelp}\n        />\n        {fileFields}\n        <ButtonElement label={this.props.editMode ? \"Submit\" : \"Propose Project\"}/>\n      </div>\n    );\n  }\n}\n/**\n * Tags Component\n * Allows for multiple values to be entered for a single field\n *\n * Comes in 3 flavors:\n * 1: If options are passed and useSearch = true\n *    input field is rendered as a searchable dropdown\n * 2: If only options are passed, input is rendered as\n *    a normal dropdown select\n * 3: Without options, input is a normal, free text input\n */\n\nclass TagsElement extends React.Component {\n    constructor() {\n        super();\n        this.handleChange = this.handleChange.bind(this);\n        this.handleKeyPress = this.handleKeyPress.bind(this);\n        this.handleAdd = this.handleAdd.bind(this);\n        this.handleRemove = this.handleRemove.bind(this);\n        this.getKeyFromValue = this.getKeyFromValue.bind(this);\n        this.canAddItem = this.canAddItem.bind(this);\n    }\n\n    // pendingValKey is the placeholder variable for temporarily storing\n    // typed or selected items before adding them to the Tags\n    handleChange(e) {\n        this.props.onUserInput(this.props.pendingValKey, e.target.value);\n    }\n    // also add tags if enter key is hit within input field\n    handleKeyPress(e) {\n        if (e.keyCode === 13 || e.which === 13) {\n            e.preventDefault();\n            this.handleAdd();\n        }\n    }\n\n    // send pendingValKey as an argument in order to null out entered item\n    handleAdd() {\n        let options = this.props.options;\n        let value = this.props.value;\n        // if using a datalist (search), set value to be the key in options\n        if (this.props.useSearch && Object.values(options).indexOf(value) > -1) {\n            value = this.getKeyFromValue(value);\n        }\n        if (this.canAddItem(value)) {\n            this.props.onUserAdd(this.props.name, value, this.props.pendingValKey);\n        }\n    }\n\n    handleRemove(e) {\n        let value = e.target.getAttribute('data-item');\n        this.props.onUserRemove(this.props.name, value);\n    }\n\n    getKeyFromValue(value) {\n        let options = this.props.options;\n        return Object.keys(options).find(function(o) {\n            return options[o] === value;\n        });\n    }\n\n    // helper function to detect if item should be added to Tags\n    canAddItem(value) {\n        let result = true;\n        // reject empty values\n        if (!value) {\n            result = false;\n            // reject if allowDupl is false and item is already in array\n        } else if (!this.props.allowDupl && this.props.items.indexOf(value) > -1) {\n            result = false;\n            // reject if using a strict datalist and value is not in options\n        } else if (this.props.useSearch &&\n            this.props.strictSearch &&\n            Object.keys(this.props.options).indexOf(value) === -1\n        ) {\n            result = false;\n        }\n\n        return result;\n    }\n\n    render() {\n        let disabled = this.props.disabled ? 'disabled' : null;\n        let requiredHTML = null;\n        let emptyOptionHTML = null;\n        let errorMessage = null;\n        let elementClass = \"row form-group\";\n        // Add required asterix\n        if (this.props.required) {\n            requiredHTML = <span className=\"text-danger\">*</span>;\n        }\n\n        // Add empty option\n        if (this.props.emptyOption) {\n            emptyOptionHTML = <option></option>;\n        }\n\n        if (this.props.errorMessage) {\n            errorMessage = <span>{this.props.errorMessage}</span>;\n            elementClass = 'row form-group has-error';\n        }\n\n        let input;\n        let options = this.props.options;\n        // if options are given and useSearch is specified\n        if (Object.keys(options).length > 0 && this.props.useSearch) {\n            input = (\n                <div>\n                    <input\n                        type=\"text\"\n                        name={this.props.name}\n                        id={this.props.id}\n                        list={this.props.id + '_list'}\n                        className=\"form-control\"\n                        value={this.props.value || \"\"}\n                        disabled={disabled}\n                        onChange={this.handleChange}\n                        onKeyPress={this.handleKeyPress}\n                    />\n                    <datalist id={this.props.id + '_list'}>\n                        {Object.keys(options).map(function(option) {\n                            return (\n                                <option value={options[option]} key={option}>{options[option]}</option>\n                            );\n                        })}\n                    </datalist>\n                </div>\n            );\n            // if options are present but useSearch is false, use normal dropdown\n        } else if (Object.keys(options).length > 0) {\n            input = <select\n                name={this.props.name}\n                className=\"form-control\"\n                id={this.props.id}\n                value={this.props.value}\n                disabled={disabled}\n                onChange={this.handleChange}\n                onKeyPress={this.handleKeyPress}\n            >\n                {emptyOptionHTML}\n                {Object.keys(options).map(function(option) {\n                    return (\n                        <option value={option} key={option}>{options[option]}</option>\n                    );\n                })}\n            </select>;\n            // else, use a text input by default\n        } else {\n            input = <input\n                type=\"text\"\n                name={this.props.name}\n                id={this.props.id}\n                className=\"form-control\"\n                value={this.props.value || \"\"}\n                disabled={disabled}\n                onChange={this.handleChange}\n                onKeyPress={this.handleKeyPress}\n            />;\n        }\n\n        // iterate through added Tags items and render them\n        // with deletion button\n        let items = this.props.items.map(function(item) {\n            let itmTxt;\n            // in event that the passed item is a key of options,\n            // render option value\n            if (Object.keys(options).length > 0 && options[item] !== undefined) {\n                itmTxt = options[item];\n                // otherwise just render item as is\n            } else {\n                itmTxt = item;\n            }\n            return (\n                <button\n                    className=\"btn btn-info btn-inline\"\n                    type=\"button\"\n                    onClick={this.handleRemove}\n                    data-item={item}\n                >\n                    {itmTxt}\n                    &nbsp;\n                    <span\n                        className=\"glyphicon glyphicon-remove\"\n                        data-item={item}\n                    />\n                </button>\n            );\n        }, this);\n        return (\n            <div className={elementClass}>\n                <label className=\"col-sm-3 control-label\" htmlFor={this.props.id}>\n                    {this.props.label}\n                    {requiredHTML}\n                </label>\n                <div className=\"col-sm-9\">\n                    {items}\n                    {input}\n                    {errorMessage}\n                    <button\n                        className=\"btn btn-success btn-add-tag\"\n                        id={this.props.id + 'Add'}\n                        type=\"button\"\n                        onClick={this.handleAdd}\n                    >\n                        <span className=\"glyphicon glyphicon-plus\"/>\n                        {this.props.btnLabel}\n                    </button>\n                </div>\n            </div>\n        );\n    }\n}\n\nTagsElement.propTypes = {\n    name: React.PropTypes.string.isRequired,\n    id: React.PropTypes.string.isRequired,\n    pendingValKey: React.PropTypes.string.isRequired,\n    options: React.PropTypes.object,\n    items: React.PropTypes.array,\n    label: React.PropTypes.string,\n    value: React.PropTypes.string,\n    class: React.PropTypes.string,\n    multiple: React.PropTypes.bool,\n    required: React.PropTypes.bool,\n    disabled: React.PropTypes.bool,\n    emptyOption: React.PropTypes.bool,\n    errorMessage: React.PropTypes.string,\n    btnLabel: React.PropTypes.string,\n    allowDupl: React.PropTypes.bool,\n    useSearch: React.PropTypes.bool,\n    strictSearch: React.PropTypes.bool,\n    onUserInput: React.PropTypes.func,\n    onUserAdd: React.PropTypes.func,\n    onUserRemove: React.PropTypes.func\n};\n\nTagsElement.defaultProps = {\n    name: '',\n    options: {},\n    items: [],\n    label: '',\n    value: undefined,\n    id: '',\n    class: '',\n    required: false,\n    disabled: false,\n    emptyOption: true,\n    hasError: false,\n    allowDupl: false,\n    useSearch: false,\n    strictSearch: false, // only accept items specified in options\n    errorMessage: '',\n    pendingValKey: '',\n    btnLabel: 'Add Tag',\n    onUserInput: function() {\n        console.warn('onUserInput() callback is not set');\n    },\n    onUserAdd: function() {\n        console.warn('onUserAdd() callback is not set');\n    },\n    onUserRemove: function() {\n        console.warn('onUserRemove() callback is not set');\n    }\n};\n\n\nexport default ProjectFormFields;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/publication/jsx/projectFields.js","/**\n * Modify behaviour of specified column cells in the Data Table component\n * @param {string} column - column name\n * @param {string} cell - cell content\n * @param {array} rowData - array of cell contents for a specific row\n * @param {array} rowHeaders - array of table headers (column names)\n * @return {*} a formated table cell for a given column\n */\nfunction formatColumn(column, cell, rowData, rowHeaders) {\n  // If a column if set as hidden, don't display it\n  if (loris.hiddenHeaders.indexOf(column) > -1) {\n    return null;\n  }\n\n  // Create the mapping between rowHeaders and rowData in a row object.\n  let row = {};\n  rowHeaders.forEach(function(header, index) {\n    row[header] = rowData[index];\n  }, this);\n\n  let classes = [];\n  if (column === 'Title') {\n    let pubID = row['Publication ID'];\n    let viewURL = loris.BaseURL + '/publication/view_project?id=' + pubID;\n\n    return (\n      <td>\n        <a href={viewURL}>\n          {cell}\n        </a>\n      </td>\n    );\n  }\n  return <td className={classes}>{cell}</td>;\n}\n\nexport default formatColumn;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/publication/jsx/columnFormatter.js"],"sourceRoot":""}