!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}({0:function(module,exports,__webpack_require__){"use strict";var _App=__webpack_require__(26);window.onload=function(){ReactDOM.render(React.createElement(_App.App,null),document.getElementById("lorisworkspace"))}},2:function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Panel=function(_React$Component){function Panel(props){_classCallCheck(this,Panel);var _this=_possibleConstructorReturn(this,(Panel.__proto__||Object.getPrototypeOf(Panel)).call(this,props));return _this.state={collapsed:_this.props.initCollapsed},_this.panelClass=_this.props.initCollapsed?"panel-collapse collapse":"panel-collapse collapse in",_this.toggleCollapsed=_this.toggleCollapsed.bind(_this),_this}return _inherits(Panel,_React$Component),_createClass(Panel,[{key:"toggleCollapsed",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){var glyphClass=this.state.collapsed?"glyphicon pull-right glyphicon-chevron-down":"glyphicon pull-right glyphicon-chevron-up",panelHeading=this.props.title?React.createElement("div",{className:"panel-heading",onClick:this.toggleCollapsed,"data-toggle":"collapse","data-target":"#"+this.props.id,style:{cursor:"pointer"}},this.props.title,React.createElement("span",{className:glyphClass})):"";return React.createElement("div",{className:"panel panel-primary"},panelHeading,React.createElement("div",{id:this.props.id,className:this.panelClass,role:"tabpanel"},React.createElement("div",{className:"panel-body",style:{height:this.props.height}},this.props.children)))}}]),Panel}(React.Component);Panel.propTypes={id:React.PropTypes.string,height:React.PropTypes.string,title:React.PropTypes.string},Panel.defaultProps={initCollapsed:!1,id:"default-panel",height:"100%"},exports.default=Panel},26:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function zeroPad(str){var length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return str.length>=length?str:"0".repeat(length-str.length)+str}function toDateString(date){var y=date.getFullYear(),m=zeroPad((date.getMonth()+1).toString()),d=zeroPad(date.getDate().toString());return y+"-"+m+"-"+d}Object.defineProperty(exports,"__esModule",{value:!0}),exports.App=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Modal=__webpack_require__(27),_Modal2=_interopRequireDefault(_Modal),_Api=__webpack_require__(28),_FilterForm=__webpack_require__(29),_EditForm=__webpack_require__(30),_debounce=__webpack_require__(31),today=new Date,yesterday=new Date(today.getTime()-864e5),next30days=new Date(today.getTime()+2592e6),tabs=[{label:"All",filters:{}},{label:"Past",filters:{StartDateMax:toDateString(yesterday)}},{label:"Next 30 Days",filters:{StartDateMin:toDateString(today),StartDateMax:toDateString(next30days)}}];exports.App=function(_React$Component){function App(){_classCallCheck(this,App);var _this=_possibleConstructorReturn(this,(App.__proto__||Object.getPrototypeOf(App)).call(this));return _this.state={candId:"",pscId:"",centerId:"",appointmentTypeId:"",startsAt:"",seen:"0",visitLabel:"",sites:[],visitLabels:[],appointmentTypes:[],open:{createAppointmentForm:!1,editAppointmentForm:!1},tabIndex:0,lockTabs:!1,sessionId:-1,sessionsOfCandidate:{candId:"",pscId:"",sessions:[]},fetchSessionsOfCandidateError:void 0,desiredItemsPerPage:"20",desiredPage:"0",page:{data:[],meta:{page:-1,itemsPerPage:-1,itemsFound:-1,pagesFound:-1}}},_this.openAppointmentForm=function(){_this.setState({open:Object.assign({},_this.state.open,{createAppointmentForm:!0})})},_this.closeAppointmentForm=function(){_this.setState({open:Object.assign({},_this.state.open,{createAppointmentForm:!1})}),_this.clearForm()},_this.closeEditForm=function(){_this.setState({open:Object.assign({},_this.state.open,{editAppointmentForm:!1})})},_this.fetchSessionsOfCandidate=function(){var candId=_this.state.candId,pscId=_this.state.pscId;_this.setState({fetchSessionsOfCandidateError:void 0}),_this.state.sessionsOfCandidate.candId==candId&&_this.state.sessionsOfCandidate.pscId==pscId||_this.setState({sessionId:-1,sessionsOfCandidate:{candId:candId,pscId:pscId,sessions:[]}}),""!=candId&&""!=pscId&&_Api.Api.fetchSessionsOfCandidate(candId,pscId).then(function(result){return console.log(result),200!=result.status?void _this.setState({fetchSessionsOfCandidateError:"string"==typeof result.json.error?result.json.error:"An unknown error occurred"}):void(_this.state.candId==candId&&_this.state.pscId==pscId&&_this.setState({sessionId:-1,sessionsOfCandidate:{candId:candId,pscId:pscId,sessions:result.json}}))}).catch(function(err){_this.setState({fetchSessionsOfCandidateError:err.message})})},_this.refreshTab=function(){_this.fetchTab(_this.state.tabIndex)},_this}return _inherits(App,_React$Component),_createClass(App,[{key:"openEditForm",value:function(){var open=this.state.open;open.editAppointmentForm=!0,this.setState({open:open})}},{key:"setCurrAppointment",value:function(a){var currAppointment=this.state.currAppointment;currAppointment=a,this.setState({currAppointment:currAppointment})}},{key:"clearForm",value:function(){this.setState({candId:"",pscId:"",centerId:"",appointmentTypeId:"",startDate:"",startTime:"",seen:"0",visitLabel:"",sessionId:-1,sessionsOfCandidate:{candId:"",pscId:"",sessions:[]},fetchSessionsOfCandidateError:void 0})}},{key:"createAppointment",value:function(){var _this2=this,body=["CandID="+encodeURIComponent(this.state.candId),"PSCID="+encodeURIComponent(this.state.pscId),"SessionID="+(this.state.sessionId>0?encodeURIComponent(this.state.sessionId):""),"AppointmentTypeID="+encodeURIComponent(this.state.appointmentTypeId),"StartsAt="+(/^\d{4,6}\-\d{2}\-\d{2}$/.test(this.state.startDate)&&/^\d{2}\:\d{2}$/.test(this.state.startTime)?encodeURIComponent(this.state.startDate+" "+this.state.startTime+":00"):"")].join("&");return fetch("/schedule_module/ajax/create_appointment.php",{credentials:"include",method:"POST",body:body,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(res){return res.json().then(function(data){return{status:res.status,data:data}})}).then(function(result){if(console.log(result),200!=result.status)throw new Error(result.data.error);_this2.setState({page:Object.assign({},_this2.state.page,{data:_this2.state.page.data.concat(result.data)})})})}},{key:"fetchPage",value:function(){var _this3=this;_Api.Api.getOrFetchSites().then(function(data){_this3.setState({sites:data})}),_Api.Api.getOrFetchVisitLabels().then(function(data){_this3.setState({visitLabels:data})}),_Api.Api.getOrFetchAppointmentTypes().then(function(data){_this3.setState({appointmentTypes:data})})}},{key:"fetchTab",value:function(tabIndex){var _this4=this;void 0==tabIndex&&(tabIndex=this.state.tabIndex),_Api.Api.fetchAppointments(Object.assign({itemsPerPage:parseInt(this.state.desiredItemsPerPage),page:parseInt(this.state.desiredPage)},tabs[tabIndex].filters)).then(function(page){_this4.setState({page:page})})}},{key:"componentDidMount",value:function(){this.fetchPage(),this.fetchTab()}},{key:"render",value:function(){var _this5=this,createAppointmentButton=void 0,editAppointmentButton=void 0;return createAppointmentButton=React.createElement("div",{className:"Create Appointment Button"},React.createElement("button",{className:"btn btn-default",onClick:this.openAppointmentForm},React.createElement("span",{className:"glyphicon glyphicon-calendar"})," Create Appointment"),React.createElement(_Modal2.default,{title:"Create Appointment",show:this.state.open.createAppointmentForm,closeModal:this.closeAppointmentForm,throwWarning:!0},React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6"},React.createElement("div",{className:"form-group"},React.createElement("label",null," DCCID: "),React.createElement("br",null),React.createElement("input",{className:"form-control",type:"text",defaultValue:this.state.candId,onChange:function(e){_this5.setState({candId:e.target.value}),(0,_debounce.debounce)(_this5.fetchSessionsOfCandidate,500)}})),React.createElement("div",{className:"form-group"},React.createElement("label",null," PSCID: "),React.createElement("br",null),React.createElement("input",{className:"form-control",type:"text",defaultValue:this.state.pscId,onChange:function(e){_this5.setState({pscId:e.target.value}),(0,_debounce.debounce)(_this5.fetchSessionsOfCandidate,500)}})),void 0==this.state.fetchSessionsOfCandidateError?void 0:React.createElement("div",{className:"alert alert-danger"},React.createElement("span",{className:"glyphicon glyphicon-exclamation-sign"}),this.state.fetchSessionsOfCandidateError)),React.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6"},React.createElement("div",{className:"form-group"},React.createElement("label",null," Appointment Date: "),React.createElement("br",null),React.createElement("input",{className:"form-control",type:"date",defaultValue:this.state.startDate,onChange:function(e){_this5.setState({startDate:e.target.value})}})),React.createElement("div",{className:"form-group"},React.createElement("label",null," Appointment Time: "),React.createElement("br",null),React.createElement("input",{className:"form-control",type:"time",defaultValue:this.state.startTime,onChange:function(e){_this5.setState({startTime:e.target.value})}})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6"},React.createElement("div",{className:"form-group"},React.createElement("label",null," Session: "),React.createElement("br",null),React.createElement("select",{className:"form-control",defaultValue:this.state.sessionId,onChange:function(e){_this5.setState({sessionId:e.target.value})}},React.createElement("option",{value:""},"- Select a Session -"),this.state.sessionsOfCandidate.sessions.map(function(s){return React.createElement("option",{key:s.SessionID,value:s.SessionID},s.SiteName," - ",s.Visit_Label)})))),React.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6"},React.createElement("div",{className:"form-group"},React.createElement("label",null," Type of Appointment: "),React.createElement("br",null),React.createElement("select",{className:"form-control",defaultValue:this.state.appointmentTypeId,onChange:function(e){_this5.setState({appointmentTypeId:e.target.value})}},React.createElement("option",{value:""},"- Select an Appointment Type -"),this.state.appointmentTypes.map(function(s){return React.createElement("option",{key:s.AppointmentTypeID,value:s.AppointmentTypeID},s.Name)})))),React.createElement("br",null)),React.createElement("br",null),React.createElement("div",{className:"buttoncent"},React.createElement("button",{className:"btn btn-primary",onClick:function(){_this5.createAppointment().then(function(){swal("Success!","Appointment created!","success"),_this5.closeAppointmentForm()}).catch(function(err){swal("Unable to create appointment",err.message,"error")})}},"Create"))))),editAppointmentButton=React.createElement("div",{className:"Edit Appointment"},React.createElement(_Modal2.default,{title:"Edit Appointment",show:this.state.open.editAppointmentForm,closeModal:this.closeEditForm,throwWarning:!1},React.createElement(_EditForm.EditForm,{appointment:this.state.currAppointment,onEdit:function(edited){var appointments=_this5.state.page.data.slice(),index=appointments.findIndex(function(item){return item.AppointmentID==edited.AppointmentID});appointments[index]=edited,_this5.setState({page:Object.assign({},_this5.state.page,{data:appointments}),toEdit:void 0}),swal("Success!","Appointment updated!","success"),_this5.closeEditForm()},onError:function(err){swal("Unable to edit appointment",err.message,"error")},onCancel:function(){_this5.setState({toEdit:void 0}),_this5.closeEditForm()}}))),React.createElement("div",null,React.createElement(_FilterForm.FilterForm,{onApply:function(filters){_this5.setState({tabIndex:0,lockTabs:!0}),_Api.Api.fetchAppointments(filters).then(function(page){_this5.setState({page:page})})},onClear:function(){_this5.setState({lockTabs:!1}),_this5.fetchTab()}}),React.createElement("h",{style:{margin:"10px"}},createAppointmentButton),React.createElement("br",null),React.createElement("ul",{className:"nav nav-tabs",style:{margin:"10px"}},tabs.map(function(tab,index){return React.createElement("li",{key:tab.label,className:[_this5.state.lockTabs||_this5.state.tabIndex!=index?"":"active",_this5.state.lockTabs?"disabled":""].join(" ")},React.createElement("a",{href:"#/",onClick:function(e){e.preventDefault(),_this5.state.lockTabs||(_this5.setState({tabIndex:index}),_this5.fetchTab(index))}},tab.label,"  ",_this5.state.lockTabs||_this5.state.tabIndex!=index?void 0:React.createElement("span",{className:"badge"},_this5.state.page.data.length)))}),this.state.lockTabs?React.createElement("li",{className:"active"},React.createElement("a",{href:"#/",onClick:function(e){e.preventDefault()}},"Search Results  ",React.createElement("span",{className:"badge"},this.state.page.data.length))):void 0),React.createElement("div",{className:"table-responsive"},React.createElement("table",{className:"table table-striped table-hover"},React.createElement("thead",{style:{backgroundColor:"#064785"}},React.createElement("tr",null,React.createElement("th",null,"DCCID"),React.createElement("th",null,"PSCID"),React.createElement("th",null,"Site"),React.createElement("th",null,"Visit Label"),React.createElement("th",null,"Subproject"),React.createElement("th",null,"Starts At"),React.createElement("th",null,"Appointment Type"),React.createElement("th",null,"Data Entry Status"),React.createElement("th",null,"Edit"),React.createElement("th",null,"Delete"))),React.createElement("tbody",null,this.state.page.data.map(function(a,index){var site=_this5.state.sites.find(function(s){return s.CenterID==a.CenterID}),appointmentType=_this5.state.appointmentTypes.find(function(at){return at.AppointmentTypeID==a.AppointmentTypeID}),dataEntryStatus="Unknown",dataEntryLabelColor="default";return"1"!=a.started?(dataEntryStatus="Upcoming",dataEntryLabelColor="default"):"1"==a.hasDataEntryComplete?"1"==a.hasDataEntryInProgress||"1"==a.hasDataEntryNotStarted?(dataEntryStatus="In Progress",dataEntryLabelColor="warning"):(dataEntryStatus="Complete",dataEntryLabelColor="success"):"1"==a.hasDataEntryInProgress?(dataEntryStatus="In Progress",dataEntryLabelColor="warning"):"1"==a.hasDataEntryNotStarted?(dataEntryStatus="Not Started",dataEntryLabelColor="warning"):(dataEntryStatus="No Data Found",dataEntryLabelColor="danger"),React.createElement("tr",{key:a.AppointmentID},React.createElement("td",null,a.CandID),React.createElement("td",null,React.createElement("a",{href:"/"+a.CandID+"/"},a.PSCID)),React.createElement("td",null,void 0==site?"Site #"+a.CenterID:site.Name),React.createElement("td",null,React.createElement("a",{href:"/instrument_list/?candID="+a.CandID+"&sessionID="+a.SessionID},a.Visit_label)),React.createElement("td",null,a.title),React.createElement("td",null,a.StartsAt),React.createElement("td",null,void 0==appointmentType?"Appointment Type #"+a.AppointmentTypeID:appointmentType.Name),React.createElement("td",null,React.createElement("span",{className:"label label-"+dataEntryLabelColor},dataEntryStatus)),React.createElement("td",null,React.createElement("button",{className:"btn btn-default",onClick:function(){_this5.openEditForm(),_this5.setCurrAppointment(a)}},React.createElement("span",{className:"glyphicon glyphicon-edit"})," Edit")),React.createElement("td",null,React.createElement("button",{className:"btn btn-default",onClick:function(){swal({title:"Are you sure you want to delete?",text:"Appointments cannot be recovered",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-danger",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep appointment!",closeOnConfirm:!1,closeOnCancel:!1},function(isConfirm){isConfirm?(fetch("/schedule_module/ajax/delete_appointment.php?AppointmentID="+a.AppointmentID,{credentials:"include",method:"DELETE"}).then(function(){var index=_this5.state.page.data.findIndex(function(item){return item.AppointmentID==a.AppointmentID});if(!(index<0)){var appointments=_this5.state.page.data.slice();appointments.splice(index,1),_this5.setState({page:Object.assign({},_this5.state.page,{data:appointments})})}}),swal.close()):swal.close()})}},React.createElement("span",{className:"glyphicon glyphicon-trash"})," Delete")))})))),React.createElement("div",{className:"form-row"},React.createElement("div",{className:"form-group col-md-2"},"Items Per Page: ",React.createElement("input",{className:"form-control",type:"number",value:this.state.desiredItemsPerPage,onChange:function(e){_this5.setState({desiredItemsPerPage:e.target.value}),(0,_debounce.debounce)(_this5.refreshTab,500)}})),React.createElement("div",{className:"form-group col-md-2"},"Page: ",React.createElement("input",{className:"form-control",type:"number",value:this.state.desiredPage,onChange:function(e){_this5.setState({desiredPage:e.target.value}),(0,_debounce.debounce)(_this5.refreshTab,500)}})),React.createElement("div",{className:"form-group col-md-6"},this.state.page.meta.pagesFound<0?"":this.state.page.meta.pagesFound+" page(s) found, ",this.state.page.meta.itemsFound<0?"":this.state.page.meta.itemsFound+" items found")),editAppointmentButton)}}]),App}(React.Component)},27:function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Modal=function(_React$Component){function Modal(){_classCallCheck(this,Modal);var _this=_possibleConstructorReturn(this,(Modal.__proto__||Object.getPrototypeOf(Modal)).call(this));return _this.closeModal=_this.closeModal.bind(_this),_this}return _inherits(Modal,_React$Component),_createClass(Modal,[{key:"closeModal",value:function(){var _this2=this;this.props.throwWarning?swal({title:"Are You Sure?",text:"Leaving the form will result in the loss of any information entered.",type:"warning",showCancelButton:!0,confirmButtonText:"Proceed",cancelButtonText:"Cancel"},function(){_this2.props.closeModal()}):this.props.closeModal()}},{key:"render",value:function(){var backdropStyle={position:"fixed",zIndex:9998,top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.1)",padding:50},modalStyle={position:"relative",maxWidth:600,maxHeight:"100%",margin:"0 auto",backgroundColor:"#fff",borderRadius:10,overflowY:"auto",zIndex:9999,top:"10%"},titleStyle={display:"flex",flexDirection:"row",alignItems:"center",background:"#093782",height:"50px",borderTopRightRadius:"10",color:"#FFFFFF",fontSize:24,padding:20},glyphStyle={marginLeft:"auto",cursor:"pointer"},bodyStyle={padding:15},modal=void 0;return this.props.show&&(modal=React.createElement("div",{style:backdropStyle,onClick:this.closeModal},React.createElement("div",{style:modalStyle,onClick:function(e){e.stopPropagation()}},React.createElement("div",{style:titleStyle},this.props.title,React.createElement("span",{style:glyphStyle,onClick:this.closeModal},"×")),React.createElement("div",{style:bodyStyle},this.props.children)))),React.createElement("div",null,modal)}}]),Modal}(React.Component);Modal.propTypes={title:React.PropTypes.string,show:React.PropTypes.bool.isRequired,closeModal:React.PropTypes.func.isRequired,throwWarning:React.PropTypes.bool.isRequired},Modal.defaultProps={throwWarning:!0},exports.default=Modal},28:function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),AppointmentApi=function(){function AppointmentApi(){_classCallCheck(this,AppointmentApi)}return _createClass(AppointmentApi,[{key:"getOrFetchSites",value:function(){var _this=this;return void 0!=this._sites?Promise.resolve(this._sites):fetch("/schedule_module/ajax/list_sites.php",{credentials:"include",method:"GET"}).then(function(res){return res.json()}).then(function(data){return console.log(data),_this._sites=data,data})}},{key:"getOrFetchVisitLabels",value:function(){var _this2=this;return void 0!=this._visitLabels?Promise.resolve(this._visitLabels):fetch("/schedule_module/ajax/list_visit_labels.php",{credentials:"include",method:"GET"}).then(function(res){return res.json()}).then(function(data){return console.log(data),_this2._visitLabels=data,data})}},{key:"getOrFetchProjects",value:function(){var _this3=this;return void 0!=this._projects?Promise.resolve(this._projects):fetch("/schedule_module/ajax/list_projects.php",{credentials:"include",method:"GET"}).then(function(res){return res.json()}).then(function(data){return console.log(data),_this3._projects=data,data})}},{key:"getOrFetchSubprojects",value:function(){var _this4=this;return void 0!=this._subprojects?Promise.resolve(this._subprojects):fetch("/schedule_module/ajax/list_subprojects.php",{credentials:"include",method:"GET"}).then(function(res){return res.json()}).then(function(data){return console.log(data),_this4._subprojects=data,data})}},{key:"getOrFetchAppointmentTypes",value:function(){var _this5=this;return void 0!=this._appointmentTypes?Promise.resolve(this._appointmentTypes):fetch("/schedule_module/ajax/list_appointment_types.php",{credentials:"include",method:"GET"}).then(function(res){return res.json()}).then(function(data){return console.log(data),_this5._appointmentTypes=data,data})}},{key:"fetchAppointments",value:function(){var filters=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},queryString=Object.keys(filters).map(function(key){return key+"="+encodeURIComponent(filters[key])}).join("&");return fetch("/schedule_module/ajax/list_appointments.php?"+queryString,{credentials:"include",method:"GET"}).then(function(res){return res.json()})}},{key:"fetchSessionsOfCandidate",value:function(candId,pscId){var query={CandID:candId,PSCID:pscId},queryString=Object.keys(query).map(function(key){return key+"="+encodeURIComponent(query[key])}).join("&");return fetch("/schedule_module/ajax/list_sessions_of_candidate.php?"+queryString,{credentials:"include",method:"GET"}).then(function(res){return res.json().then(function(json){return{status:res.status,json:json}})})}}]),AppointmentApi}();exports.Api=new AppointmentApi},29:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FilterForm=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Panel=__webpack_require__(2),_Panel2=_interopRequireDefault(_Panel),_Api=__webpack_require__(28),FilterForm=exports.FilterForm=function(_React$Component){function FilterForm(props){_classCallCheck(this,FilterForm);var _this=_possibleConstructorReturn(this,(FilterForm.__proto__||Object.getPrototypeOf(FilterForm)).call(this,props));return _this.state={sites:[],visitLabels:[],projects:[],subprojects:[],appointmentTypes:[],candId:"",pscId:"",centerId:"",visitLabel:"",projectId:"",subprojectId:"",appointmentTypeId:"",startDate:"",startTime:"",startDateMin:"",startDateMax:""},_this}return _inherits(FilterForm,_React$Component),_createClass(FilterForm,[{key:"componentDidMount",value:function(){var _this2=this;_Api.Api.getOrFetchSites().then(function(data){_this2.setState({sites:data})}),_Api.Api.getOrFetchVisitLabels().then(function(data){_this2.setState({visitLabels:data})}),_Api.Api.getOrFetchProjects().then(function(data){_this2.setState({projects:data})}),_Api.Api.getOrFetchSubprojects().then(function(data){_this2.setState({subprojects:data})}),_Api.Api.getOrFetchAppointmentTypes().then(function(data){_this2.setState({appointmentTypes:data})})}},{key:"render",value:function(){var _this3=this;return React.createElement(_Panel2.default,{id:this.props.id,height:this.props.height,title:this.props.title},React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6"},React.createElement("div",{className:"form-group"},React.createElement("label",null,"DCCID"),React.createElement("input",{type:"text",value:this.state.candId,className:"form-control",onChange:function(e){_this3.setState({candId:e.target.value})}})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Site"),React.createElement("select",{className:"form-control",value:this.state.centerId,onChange:function(e){_this3.setState({centerId:e.target.value})}},React.createElement("option",{value:""},"-Select a Site-"),this.state.sites.map(function(s){return React.createElement("option",{key:s.CenterID,value:s.CenterID},s.Name)}))),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Project"),React.createElement("select",{className:"form-control",value:this.state.projectId,onChange:function(e){_this3.setState({projectId:e.target.value})}},React.createElement("option",{value:""},"-Select a Project-"),this.state.projects.map(function(s){return React.createElement("option",{key:s.ProjectID,value:s.ProjectID},s.Name)}))),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Appointment Type"),React.createElement("select",{className:"form-control",value:this.state.appointmentTypeId,onChange:function(e){_this3.setState({appointmentTypeId:e.target.value})}},React.createElement("option",{value:""},"-Select an Appointment Type-"),this.state.appointmentTypes.map(function(s){return React.createElement("option",{key:s.AppointmentTypeID,value:s.AppointmentTypeID},s.Name)})))),React.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6"},React.createElement("div",{className:"form-group"},React.createElement("label",null,"PSCID"),React.createElement("input",{type:"text",value:this.state.pscId,className:"form-control",onChange:function(e){
_this3.setState({pscId:e.target.value})}})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Visit Label"),React.createElement("select",{className:"form-control",value:this.state.visitLabel,onChange:function(e){_this3.setState({visitLabel:e.target.value})}},React.createElement("option",{value:""},"-Select a Visit Label-"),this.state.visitLabels.map(function(s){return React.createElement("option",{key:s.Visit_label,value:s.Visit_label},s.Visit_label)}))),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Subproject"),React.createElement("select",{className:"form-control",value:this.state.subprojectId,onChange:function(e){_this3.setState({subprojectId:e.target.value})}},React.createElement("option",{value:""},"-Select a Subproject-"),this.state.subprojects.map(function(s){return React.createElement("option",{key:s.SubprojectID,value:s.SubprojectID},s.title)}))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6"},React.createElement("div",{className:"form-group"},React.createElement("label",null,"Date"),React.createElement("input",{type:"date",value:this.state.startDate,className:"form-control",onChange:function(e){_this3.setState({startDate:e.target.value})}})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Earliest Date"),React.createElement("input",{type:"date",value:this.state.startDateMin,className:"form-control",onChange:function(e){_this3.setState({startDateMin:e.target.value})}}))),React.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6"},React.createElement("div",{className:"form-group"},React.createElement("label",null,"Time"),React.createElement("input",{type:"time",value:this.state.startTime,className:"form-control",onChange:function(e){console.log(e.target.value),_this3.setState({startTime:e.target.value})}})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Latest Date"),React.createElement("input",{type:"date",value:this.state.startDateMax,className:"form-control",onChange:function(e){_this3.setState({startDateMax:e.target.value})}})))),React.createElement("div",null,React.createElement("button",{className:"btn btn-primary",onClick:function(){if(void 0!=_this3.props.onApply){var filters={};""!=_this3.state.candId&&(filters.CandID=_this3.state.candId),""!=_this3.state.pscId&&(filters.PSCID=_this3.state.pscId),""!=_this3.state.centerId&&(filters.CenterID=_this3.state.centerId),""!=_this3.state.visitLabel&&(filters.VisitLabel=_this3.state.visitLabel),""!=_this3.state.projectId&&(filters.ProjectID=_this3.state.projectId),""!=_this3.state.subprojectId&&(filters.SubprojectID=_this3.state.subprojectId),""!=_this3.state.appointmentTypeId&&(filters.AppointmentTypeID=_this3.state.appointmentTypeId),""!=_this3.state.startDate&&(filters.StartDate=_this3.state.startDate),""!=_this3.state.startTime&&(filters.StartTime=_this3.state.startTime),""!=_this3.state.startDateMin&&(filters.StartDateMin=_this3.state.startDateMin),""!=_this3.state.startDateMax&&(filters.StartDateMax=_this3.state.startDateMax),_this3.props.onApply(filters)}}},"Apply")," ",React.createElement("button",{className:"btn btn-default",onClick:function(){_this3.setState({candId:"",pscId:"",centerId:"",visitLabel:"",projectId:"",subprojectId:"",appointmentTypeId:"",startDate:"",startTime:"",startDateMin:"",startDateMax:""}),void 0!=_this3.props.onClear&&_this3.props.onClear()}},"Clear")))))}}]),FilterForm}(React.Component);FilterForm.defaultProps={id:"selection-filter",height:"100%",title:"Selection Filter",onUpdate:function(){console.warn("onUpdate() callback is not set!")}}},30:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.EditForm=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Api=__webpack_require__(28);exports.EditForm=function(_React$Component){function EditForm(props){_classCallCheck(this,EditForm);var _this=_possibleConstructorReturn(this,(EditForm.__proto__||Object.getPrototypeOf(EditForm)).call(this));if(void 0==props.appointment)throw new Error("Expected an appointment object");console.log("ctor",props.appointment);var startsAt=props.appointment.StartsAt.split(" ");return _this.state={appointmentTypeId:props.appointment.AppointmentTypeID,startDate:startsAt[0],startTime:startsAt[1].substr(0,startsAt[1].length-3),appointmentTypes:[],sessionsOfCandidate:[],fetchSessionsOfCandidateError:void 0},_this}return _inherits(EditForm,_React$Component),_createClass(EditForm,[{key:"componentDidMount",value:function(){var _this2=this;_Api.Api.getOrFetchAppointmentTypes().then(function(data){_this2.setState({appointmentTypes:data})}),_Api.Api.fetchSessionsOfCandidate(this.props.appointment.CandID,this.props.appointment.PSCID).then(function(result){return 200!=result.status?void _this2.setState({fetchSessionsOfCandidateError:"string"==typeof result.json.error?result.json.error:"An unknown error occurred"}):void _this2.setState({sessionsOfCandidate:result.json})}).catch(function(err){_this2.setState({fetchSessionsOfCandidateError:err.message})})}},{key:"editAppointment",value:function(){var _this3=this,body=["AppointmentTypeID="+encodeURIComponent(this.state.appointmentTypeId),"StartsAt="+encodeURIComponent(this.state.startDate+" "+this.state.startTime+":00")].join("&");fetch("/schedule_module/ajax/edit_appointment.php?AppointmentID="+this.props.appointment.AppointmentID,{credentials:"include",method:"PUT",body:body,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(res){if(304==res.status)throw new Error("No changes were made");return res.json().then(function(data){return{status:res.status,data:data}})}).then(function(result){if(200!=result.status)throw new Error(result.data.error);void 0!=_this3.props.onEdit&&_this3.props.onEdit(result.data)}).catch(function(err){void 0!=_this3.props.onError&&_this3.props.onError(err)})}},{key:"render",value:function(){var _this4=this;return React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6"},React.createElement("div",{className:"form-group"},React.createElement("label",null," DCCID: "),React.createElement("br",null),React.createElement("input",{className:"form-control",value:this.props.appointment.CandID,disabled:!0})),React.createElement("div",{className:"form-group"},React.createElement("label",null," PSCID: "),React.createElement("br",null),React.createElement("input",{className:"form-control",value:this.props.appointment.PSCID,disabled:!0}))),React.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6"},React.createElement("div",{className:"form-group"},React.createElement("label",null," Appointment Date: "),React.createElement("br",null),React.createElement("input",{className:"form-control",type:"date",value:this.state.startDate,onChange:function(e){_this4.setState({startDate:e.target.value})}})),React.createElement("div",{className:"form-group"},React.createElement("label",null," Appointment Time: "),React.createElement("br",null),React.createElement("input",{className:"form-control",type:"time",value:this.state.startTime,onChange:function(e){_this4.setState({startTime:e.target.value})}})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6"},React.createElement("div",{className:"form-group"},React.createElement("label",null," Session: "),React.createElement("br",null),React.createElement("select",{className:"form-control",value:this.props.appointment.SessionID,disabled:!0},this.state.sessionsOfCandidate.map(function(s){return React.createElement("option",{key:s.SessionID,value:s.SessionID},s.SiteName," - ",s.Visit_Label)})))),React.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6"},React.createElement("div",{className:"form-group"},React.createElement("label",null," Type of Appointment: "),React.createElement("br",null),React.createElement("select",{className:"form-control",value:this.state.appointmentTypeId,onChange:function(e){_this4.setState({appointmentTypeId:e.target.value})}},this.state.appointmentTypes.map(function(s){return React.createElement("option",{key:s.AppointmentTypeID,value:s.AppointmentTypeID},s.Name)})))),React.createElement("br",null)),React.createElement("br",null),React.createElement("div",{className:"buttoncent"},React.createElement("button",{className:"btn btn-primary",onClick:function(){_this4.editAppointment()}},"Save")," ",React.createElement("button",{className:"btn btn-default",onClick:function(){void 0!=_this4.props.onCancel&&_this4.props.onCancel()}},"Cancel")))}}]),EditForm}(React.Component)},31:function(module,exports){"use strict";function debounce(func,wait){void 0!=func.__timer&&clearTimeout(func.__timer),func.__timer=setTimeout(function(){func.__timer=void 0,func()},wait)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.debounce=debounce}});
//# sourceMappingURL=index.js.map