!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}({0:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_DirectEntryForm=__webpack_require__(26),_DirectEntryForm2=_interopRequireDefault(_DirectEntryForm),DirectEntry=function(_React$Component){function DirectEntry(props){_classCallCheck(this,DirectEntry);var _this=_possibleConstructorReturn(this,(DirectEntry.__proto__||Object.getPrototypeOf(DirectEntry)).call(this,props)),height=window.innerHeight/3,style={"margin-top":height},page=-1,url=window.location;return window.location.origin||(url.origin=url.protocol+"//"+url.hostname+(url.port?":"+url.port:"")),_this.nextPage=_this.nextPage.bind(_this),_this.prevPage=_this.prevPage.bind(_this),_this.updateAnswer=_this.updateAnswer.bind(_this),_this.setupPageValues=_this.setupPageValues.bind(_this),_this.submit=_this.submit.bind(_this),_this.state={style:style,page:page,values:{},errors:{},InstrumentJSON:{},completionStats:{total:0,completed:0},api_url:url.origin+"/survey_module/ajax/survey_api.php"+url.search,submitState:0},_this}return _inherits(DirectEntry,_React$Component),_createClass(DirectEntry,null,[{key:"FindSelects",value:function(root){var _ref;return(_ref=[]).concat.apply(_ref,_toConsumableArray(root)).filter(function(i){return"select"==i.Type||"ElementGroup"==i.Type}).reduce(function(memo,i){return"select"==i.Type?memo[i.Name]=i.Options.Values:Object.assign(memo,DirectEntry.FindSelects(i.Elements)),memo},{})}}]),_createClass(DirectEntry,[{key:"componentWillMount",value:function(){var _this2=this;$.ajax({url:this.state.api_url,method:"GET",dataType:"json",success:function(data){var InstrumentJSON=JSON.parse(data.InstrumentJSON),Values=JSON.parse(data.Values),page=-1;"ElementGroup"===InstrumentJSON.Elements[0].Type&&"Page"===InstrumentJSON.Elements[0].GroupType&&(page=0);var total=0,completed=0;for(var key in Values)null!=Values[key]&&""!=Values[key]&&completed++,total++;this.setState({values:Values,InstrumentJSON:InstrumentJSON,page:page,completionStats:{total:total,completed:completed}},this.setupPageValues.bind(this,page))}.bind(this)}).fail(function(responseData){console.log(responseData.status),"403"==responseData.status&&_this2.setState({submitState:2})})}},{key:"setupPageValues",value:function(page){if(!(page>=this.state.InstrumentJSON.Elements.length)){for(var pageElements=this.state.InstrumentJSON.Elements[page].Elements,pageValues={},i=0;i<pageElements.length;i++){var name=this.getElementName(pageElements[i]);if(name instanceof Array)for(var j=0;j<name.length;j++)name[j]in this.state.values&&(pageValues[name[j]]=this.state.values[name[j]]);else name in this.state.values&&(pageValues[name]=this.state.values[name])}this.setState({pageValues:pageValues})}}},{key:"getElementName",value:function(element){var name=void 0;if("ElementGroup"===element.Type){name=[];for(var i=0;i<element.Elements.length;i++)name.push(this.getElementName(element.Elements[i]))}else name=element.Name;return name}},{key:"removeHeaderTags",value:function(str){return"string"==typeof str?str.replace(/<h.>/g,"").replace(/<\/h.>/g,""):""}},{key:"nextPage",value:function(){var _this3=this,page=0,finalPage=!1;0!=this.state.page&&(page=this.state.InstrumentJSON.Elements[this.state.page].Subtest);var data={data:this.state.pageValues,page:page},that=this;this.state.page===this.state.InstrumentJSON.Elements.length-1&&(data.FinalPage=!0,finalPage=!0),$.ajax({url:this.state.api_url,data:JSON.stringify(data),type:"PUT",contentType:"application/json",success:function(result){var page=that.state.page+1,InstrumentJSON=void 0,reviewPage=void 0;if(finalPage?(InstrumentJSON=that.state.InstrumentJSON,reviewPage=JSON.parse(result)):InstrumentJSON=JSON.parse(result),void 0!=reviewPage){var selects=DirectEntry.FindSelects(InstrumentJSON.Elements.map(function(i){return i.Elements})),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=reviewPage.questions[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var i=_step.value,options=selects[i.SourceField];if(void 0!=options){var value=options[i.response];void 0!=value&&(i.response=value)}i.question=_this3.removeHeaderTags(i.question)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}that.setState({page:page,errors:{},InstrumentJSON:InstrumentJSON,ReviewData:reviewPage}),that.setupPageValues(page),window.scrollTo(0,0)}}).fail(function(responseData){if(400===responseData.status){var response=JSON.parse(responseData.responseText);_this3.setState({errors:response}),swal({title:"Error",text:"Please resolve page errors before continuing"},function(e){$("html, body").animate({scrollTop:$($(".questionError")[0]).offset().top-100},100)})}})}},{key:"prevPage",value:function(){var page=this.state.page-1;this.setState({page:page,errors:{}}),this.setupPageValues(page),window.scrollTo(0,0)}},{key:"updateAnswer",value:function(fieldName,value){var data={};data[fieldName]=value,$.ajax({url:this.state.api_url,data:JSON.stringify(data),type:"PATCH",contentType:"application/json"}),this.setState(function(state){var values=state.values,pageValues=state.pageValues,stats=state.completionStats;return null==values[fieldName]||""==values[fieldName]?stats.completed=stats.completed+1:null!=value&&""!=value||(stats.completed=stats.completed-1),values[fieldName]=value,pageValues[fieldName]=value,{values:values,pageValues:pageValues,completionStats:stats}})}},{key:"submit",value:function(){var _this4=this,that=this;$.ajax({url:this.state.api_url,type:"POST",contentType:"application/json",success:function(result){that.setState({submitState:1})}}).fail(function(responseData){console.log("FAIL"),console.log(responseData),_this4.setState({submitState:3})})}},{key:"render",value:function(){if(2===this.state.submitState)return React.createElement("div",null,"This form has already been completed");if(1===this.state.submitState)return React.createElement("div",null,"Thank you for submitting the data");if(!this.state.InstrumentJSON.Elements)return React.createElement("div",null);var DirectEntryFormElements=void 0,buttons=void 0;DirectEntryFormElements=this.state.page===this.state.InstrumentJSON.Elements.length?React.createElement(ReviewPage,{reviewData:this.state.ReviewData,submitState:this.state.submitState}):this.state.page>=0?React.createElement(_DirectEntryForm2.default,{elements:this.state.InstrumentJSON.Elements[this.state.page].Elements,values:this.state.values,updateAnswer:this.updateAnswer,errors:this.state.errors}):React.createElement(_DirectEntryForm2.default,{elements:this.state.InstrumentJSON.Elements,values:this.state.values,updateAnswer:this.updateAnswer,errors:this.state.errors}),buttons=this.state.page===this.state.InstrumentJSON.Elements.length?React.createElement("div",null,React.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.prevPage},"Prev"),React.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.submit},"Submit")):this.state.page===-1||0===this.state.page&&1===this.state.InstrumentJSON.Elements.length?React.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.nextPage},"Done"):0===this.state.page?React.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.nextPage},"Next"):this.state.page===this.state.InstrumentJSON.Elements.length-1?React.createElement("div",null,React.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.prevPage},"Prev"),React.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.nextPage},"Done")):React.createElement("div",null,React.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.prevPage},"Prev"),React.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.nextPage},"Next"));var style={width:this.state.completionStats.completed/this.state.completionStats.total*100+"%"};return React.createElement("div",null,React.createElement("nav",{className:"navbar navbar-default navbar-fixed-top"},React.createElement("span",_defineProperty({className:"h1"},"className","navbar-brand"),"LORIS")),React.createElement("div",{id:"page",className:"container-fluid"},DirectEntryFormElements,React.createElement("div",{className:"question-container col-xs-12 col-sm-10 col-sm-offset-1"},buttons)),React.createElement("div",{className:"navbar navbar-default navbar-fixed-bottom"},React.createElement("div",{className:"col-xs-5 footer-bar"},this.state.completionStats.completed," of ",this.state.completionStats.total," Answered"),React.createElement("div",{className:"col-xs-4 footer-bar"},React.createElement("div",{className:"progress"},React.createElement("div",{className:"progress-bar-info progress-bar-striped",role:"progressbar","aria-valuenow":"60","aria-valuemin":"0","aria-valuemax":"100",style:style},"Â ")))))}}]),DirectEntry}(React.Component),ReviewPage=function(_React$Component2){function ReviewPage(props){return _classCallCheck(this,ReviewPage),_possibleConstructorReturn(this,(ReviewPage.__proto__||Object.getPrototypeOf(ReviewPage)).call(this,props))}return _inherits(ReviewPage,_React$Component2),_createClass(ReviewPage,[{key:"render",value:function(){var questions=this.props.reviewData.questions.map(function(element){return React.createElement("tr",{className:"reviewPage"},React.createElement("td",null,React.createElement(Markdown,{content:element.question})),React.createElement("td",null,element.response))}),error=void 0;return 3===this.props.submitState&&(error=React.createElement("h5",{className:"has-error"},"This form has an error, please fix errors before submitting")),React.createElement("div",{className:"question-container col-xs-12 col-sm-10 col-sm-offset-1"},React.createElement("h3",null,"Review Your Submission"),error,React.createElement("table",{className:"table table-striped table-bordered"},React.createElement("tbody",null,questions)))}}]),ReviewPage}(React.Component);window.DirectEntry=DirectEntry,exports.default=DirectEntry},26:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_GroupElement=__webpack_require__(27),_GroupElement2=_interopRequireDefault(_GroupElement),NotImplement=function(_React$Component){function NotImplement(props){return _classCallCheck(this,NotImplement),_possibleConstructorReturn(this,(NotImplement.__proto__||Object.getPrototypeOf(NotImplement)).call(this,props))}return _inherits(NotImplement,_React$Component),_createClass(NotImplement,[{key:"render",value:function(){return React.createElement("div",null,this.props.element.Type," is not yet implemented")}}]),NotImplement}(React.Component),DirectEntryFormElement=(function(_React$Component2){function NotSupported(props){return _classCallCheck(this,NotSupported),_possibleConstructorReturn(this,(NotSupported.__proto__||Object.getPrototypeOf(NotSupported)).call(this,props))}return _inherits(NotSupported,_React$Component2),_createClass(NotSupported,[{key:"render",value:function(){return React.createElement("div",null,this.props.element.Type," is not supported by browser")}}]),NotSupported}(React.Component),function(_React$Component3){function DirectEntryFormElement(props){return _classCallCheck(this,DirectEntryFormElement),_possibleConstructorReturn(this,(DirectEntryFormElement.__proto__||Object.getPrototypeOf(DirectEntryFormElement)).call(this,props))}return _inherits(DirectEntryFormElement,_React$Component3),_createClass(DirectEntryFormElement,[{key:"render",value:function(){var element=void 0,errorMessage=void 0,questionClass="question-container col-xs-12 col-sm-10 col-sm-offset-1",group=void 0;switch(this.props.element.Type){case"select":element=React.createElement(SelectElement,{element:this.props.element,value:this.props.values[this.props.element.Name],updateAnswer:this.props.updateAnswer,error:this.props.errors[this.props.element.Name]});break;case"text":element=React.createElement(TextElement,{element:this.props.element,value:this.props.values[this.props.element.Name],updateAnswer:this.props.updateAnswer,error:this.props.errors[this.props.element.Name]});break;case"date":element=React.createElement(DateElement,{element:this.props.element,value:this.props.values[this.props.element.Name],updateAnswer:this.props.updateAnswer,error:this.props.errors[this.props.element.Name]});break;case"label":element=React.createElement(LabelElement,{element:this.props.element});break;case"header":element=React.createElement(HeaderElement,{element:this.props.element});break;case"ElementGroup":group="true",element=React.createElement(_GroupElement2.default,{element:this.props.element,values:this.props.values,updateAnswer:this.props.updateAnswer,errors:this.props.errors});break;default:element=React.createElement(NotImplement,{element:this.props.element})}this.props.errors[this.props.element.Name]&&(questionClass+=" questionError",errorMessage=React.createElement("h4",{className:"col-xs-12 has-error"},"* ",this.props.errors[this.props.element.Name]));var element_name=this.props.element.Name,str=element_name.toLowerCase();return"true"==group&&str.includes("score")&&(questionClass="hidden"),React.createElement("div",{className:questionClass},element,errorMessage)}}]),DirectEntryFormElement}(React.Component)),Page=function(_React$Component4){function Page(props){return _classCallCheck(this,Page),_possibleConstructorReturn(this,(Page.__proto__||Object.getPrototypeOf(Page)).call(this,props))}return _inherits(Page,_React$Component4),_createClass(Page,[{key:"render",value:function(){var _this5=this,DirectEntryFormElements=this.props.elements.map(function(element){return React.createElement(DirectEntryFormElement,{element:element,values:_this5.props.values,updateAnswer:_this5.props.updateAnswer,errors:_this5.props.errors})});return React.createElement("div",null,DirectEntryFormElements)}}]),Page}(React.Component),SelectElement=function(_React$Component5){function SelectElement(props){_classCallCheck(this,SelectElement);var _this6=_possibleConstructorReturn(this,(SelectElement.__proto__||Object.getPrototypeOf(SelectElement)).call(this,props));return _this6.state={value:""},_this6}return _inherits(SelectElement,_React$Component5),_createClass(SelectElement,[{key:"onSelect",value:function(value){this.props.value!==value?this.props.updateAnswer(this.props.element.Name,value):this.props.updateAnswer(this.props.element.Name,null)}},{key:"render",value:function(){var options=[],optionLabel=void 0;for(var key in this.props.element.Options.Values){var checked=void 0;""!==key&&(key===this.props.value&&(checked=React.createElement("i",{className:"glyphicon glyphicon-ok"})),optionLabel=String(this.props.element.Options.Values[key]),options.push(React.createElement("div",{className:"col-xs-12 col-sm-6 select-option",onClick:this.onSelect.bind(this,key)},React.createElement("div",{className:"selectBox"},React.createElement("label",{className:"btn btn-defualt btn-circle"},checked)),React.createElement("div",{className:"selectOption"},React.createElement(Markdown,{content:optionLabel})))))}var element=React.createElement("div",{className:"row field_input","data-toggle":"buttons"},options),classInfo="col-xs-12 field_question";this.props.error&&(classInfo+=" has-error");var description="";return this.props.element.Description&&(description=React.createElement("h3",{className:classInfo},React.createElement(Markdown,{content:this.props.element.Description}))),React.createElement("div",null,description,element)}}]),SelectElement}(React.Component),TextElement=function(_React$Component6){function TextElement(props){_classCallCheck(this,TextElement);var _this7=_possibleConstructorReturn(this,(TextElement.__proto__||Object.getPrototypeOf(TextElement)).call(this,props));return _this7.updateText=_this7.updateText.bind(_this7),_this7}return _inherits(TextElement,_React$Component6),_createClass(TextElement,[{key:"updateText",value:function(e){this.props.updateAnswer(this.props.element.Name,e.target.value)}},{key:"render",value:function(){var type=void 0,value="";this.props.value&&(value=this.props.value),type="small"===this.props.element.Options.Type?React.createElement("input",{name:this.props.element.Name,type:"text",className:"form-control",onChange:this.updateText,value:value}):React.createElement("textarea",{name:this.props.element.Name,className:"form-control",onChange:this.updateText,value:value});var classInfo="col-xs-12 col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4",descClass="col-xs-12 field_question";this.props.error&&(classInfo+=" has-error",descClass+=" has-error");var description="";return this.props.element.Description&&(description=React.createElement("h3",{className:descClass},React.createElement(Markdown,{content:this.props.element.Description}))),React.createElement("div",null,description,React.createElement("div",{className:classInfo},type))}}]),TextElement}(React.Component),DateElement=function(_React$Component7){function DateElement(props){_classCallCheck(this,DateElement);var _this8=_possibleConstructorReturn(this,(DateElement.__proto__||Object.getPrototypeOf(DateElement)).call(this,props));return _this8.updateDate=_this8.updateDate.bind(_this8),_this8}return _inherits(DateElement,_React$Component7),_createClass(DateElement,[{key:"updateDate",value:function(e){this.props.updateAnswer(this.props.element.Name,e.target.value)}},{key:"componentDidMount",value:function(){var that=this;checkInput(this.props.element.Type)||$("#"+this.props.element.Name).datepicker({dateFormat:"yy-mm-dd",minDate:this.props.element.Options.MinDate,maxDate:this.props.element.Options.MaxDate,changeMonth:!0,changeYear:!0,yearRange:"-100:+15"}).on("change",function(e){that.updateDate(e)})}},{key:"render",value:function(){var classInfo="col-xs-12 field_question",value="";this.props.value&&(value=this.props.value);var input=React.createElement("input",{name:this.props.element.Name,type:"date",className:"form-control",min:this.props.element.Options.MinDate,max:this.props.element.Options.MaxDate,onChange:this.updateDate,value:value});checkInput(this.props.element.Type)||(input=React.createElement("input",{name:this.props.element.Name,type:"text",className:"form-control",value:this.props.value,id:this.props.element.Name})),this.props.error&&(classInfo+=" has-error");var description="";return this.props.element.Description&&(description=React.createElement("h3",{className:"col-xs-12 field_question"},React.createElement(Markdown,{content:this.props.element.Description}))),React.createElement("div",null,description,React.createElement("div",{className:"col-xs-12 col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4"},input))}}]),DateElement}(React.Component),LabelElement=function(_React$Component8){function LabelElement(props){return _classCallCheck(this,LabelElement),_possibleConstructorReturn(this,(LabelElement.__proto__||Object.getPrototypeOf(LabelElement)).call(this,props))}return _inherits(LabelElement,_React$Component8),_createClass(LabelElement,[{key:"render",value:function(){var description="";return this.props.element.Description&&(description=React.createElement("h3",{className:"col-xs-12 field_question"},React.createElement(Markdown,{content:this.props.element.Description}))),React.createElement("div",null,description)}}]),LabelElement}(React.Component),HeaderElement=function(_React$Component9){function HeaderElement(props){return _classCallCheck(this,HeaderElement),_possibleConstructorReturn(this,(HeaderElement.__proto__||Object.getPrototypeOf(HeaderElement)).call(this,props))}return _inherits(HeaderElement,_React$Component9),_createClass(HeaderElement,[{key:"render",value:function(){var element=void 0,score_header=this.props.element.Description,str=score_header.toLowerCase();return element=str.includes("score")?React.createElement("h1",null):React.createElement("h1",null,React.createElement(Markdown,{content:this.props.element.Description})),React.createElement("div",null,element)}}]),HeaderElement}(React.Component);exports.default=Page},27:function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),GroupElement=function(_React$Component){function GroupElement(props){return _classCallCheck(this,GroupElement),_possibleConstructorReturn(this,(GroupElement.__proto__||Object.getPrototypeOf(GroupElement)).call(this,props))}return _inherits(GroupElement,_React$Component),_createClass(GroupElement,[{key:"render",value:function(){var element=void 0;switch(this.props.element.GroupType){case"Element":element=React.createElement(ElementGroup,{element:this.props.element,values:this.props.values,updateAnswer:this.props.updateAnswer,errors:this.props.errors})}return React.createElement("div",null,element)}}]),GroupElement}(React.Component),ElementGroup=function(_React$Component2){function ElementGroup(props){return _classCallCheck(this,ElementGroup),_possibleConstructorReturn(this,(ElementGroup.__proto__||Object.getPrototypeOf(ElementGroup)).call(this,props))}return _inherits(ElementGroup,_React$Component2),_createClass(ElementGroup,[{key:"render",value:function(){var labelClass=void 0,elementClass=void 0,elements=void 0,error=void 0,errorMessage=void 0;switch(this.props.element.Elements.length){case 1:labelClass="col-xs-12 col-sm-4 field_question",elementClass="col-xs-12 col-sm-8";break;case 2:labelClass="col-xs-12 col-sm-4 field_question",elementClass="col-xs-12 col-sm-4";break;case 3:labelClass="col-xs-12 col-sm-3 field_question",elementClass="col-xs-12 col-sm-3";break;case 4:labelClass="col-xs-12 col-sm-4 field_question",elementClass="col-xs-12 col-sm-2";break;case 5:labelClass="col-xs-12 col-sm-2 field_question",elementClass="col-xs-12 col-sm-2";break;case 6:labelClass="col-xs-12 col-sm-2 field_question",elementClass="col-xs-10 col-sm-custom";break;case 7:labelClass="col-xs-12 col-sm-2 field_question",elementClass="col-xs-10 col-sm-custom";break;case 8:labelClass="col-xs-12 col-sm-2 field_question",elementClass="col-xs-10 col-sm-custom"}this.props.errors[this.props.element.Name]&&(error=!0,labelClass+=" has-error"),elements=this.props.element.Elements.map(function(element){return!error&&this.props.errors[element.Name]&&(error=!0,errorMessage=this.props.errors[element.Name]),React.createElement(BaseElement,{element:element,classInfo:elementClass,value:this.props.values[element.Name],updateAnswer:this.props.updateAnswer,error:error,errorMessage:errorMessage})}.bind(this));var description="";return this.props.element.Description&&(description=React.createElement("h3",{className:labelClass},React.createElement(Markdown,{content:this.props.element.Description}))),React.createElement("div",{className:"col-xs-12"},description,elements)}}]),ElementGroup}(React.Component),GroupDateElement=function(_React$Component3){function GroupDateElement(props){_classCallCheck(this,GroupDateElement);var _this3=_possibleConstructorReturn(this,(GroupDateElement.__proto__||Object.getPrototypeOf(GroupDateElement)).call(this,props));return _this3.updateValue=_this3.updateValue.bind(_this3),_this3}return _inherits(GroupDateElement,_React$Component3),_createClass(GroupDateElement,[{key:"updateValue",value:function(e){this.props.updateAnswer(this.props.element.Name,e.target.value)}},{key:"componentDidMount",value:function(){var that=this;checkInput(this.props.element.Type)||$("#"+this.props.element.Name).datepicker({dateFormat:"yy-mm-dd",minDate:this.props.element.Options.MinDate,maxDate:this.props.element.Options.MaxDate,changeMonth:!0,changeYear:!0,yearRange:"-100:+15"}).on("change",function(e){that.updateValue(e)})}},{key:"render",value:function(){var value="";this.props.value&&(value=this.props.value);var input=React.createElement("input",{name:this.props.element.Name,type:"date",className:"form-control",min:this.props.element.Options.MinDate,max:this.props.element.Options.MaxDate,onChange:this.updateValue,value:value});return checkInput(this.props.element.Type)||(input=React.createElement("input",{name:this.props.element.Name,type:"text",className:"form-control",value:value,id:this.props.element.Name})),React.createElement("div",null,input)}}]),GroupDateElement}(React.Component),GroupTimeElement=function(_React$Component4){function GroupTimeElement(props){_classCallCheck(this,GroupTimeElement);var _this4=_possibleConstructorReturn(this,(GroupTimeElement.__proto__||Object.getPrototypeOf(GroupTimeElement)).call(this,props));if(!checkInput(_this4.props.element.Type)){var hour="",min="";if(_this4.props.value){var val=_this4.props.value.split(":");hour=val[0],min=val[1]}_this4.state={hour:hour,min:min}}return _this4.updateValue=_this4.updateValue.bind(_this4),_this4}return _inherits(GroupTimeElement,_React$Component4),_createClass(GroupTimeElement,[{key:"updateValue",value:function(e){if(checkInput(this.props.element.Type)){var val=""!=e.target.value?e.target.value:null;this.props.updateAnswer(this.props.element.Name,val)}}},{key:"updateTime",value:function(unit,e){var val=void 0;"hour"==unit?(""==e.target.value?val=null:""!=this.state.min&&(val=e.target.value+":"+this.state.min+":00"),this.props.updateAnswer(this.props.element.Name,val),this.setState({hour:e.target.value})):"min"==unit&&(""==e.target.value?val=null:""!=this.state.hour&&(val=this.state.hour+":"+e.target.value+":00"),this.props.updateAnswer(this.props.element.Name,val),this.setState({min:e.target.value}))}},{key:"render",value:function(){var input=React.createElement("input",{type:"time",name:this.props.element.Name,className:"form-control",onChange:this.updateValue,value:this.props.value});if(!checkInput(this.props.element.Type)){var hourOptions=[],minOptions=[],val=void 0,i=void 0;for(hourOptions.push(React.createElement("option",{value:""})),minOptions.push(React.createElement("option",{value:""})),i=0;i<24;i++)val=i<10?"0"+i:String(i),hourOptions.push(React.createElement("option",{value:val},val));for(i=0;i<60;i++)val=i<10?"0"+i:String(i),minOptions.push(React.createElement("option",{value:val},val));input=React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-4"},React.createElement("select",{className:"form-control",onChange:this.updateTime.bind(this,"hour"),value:this.state.hour},hourOptions)),React.createElement("div",{className:"col-xs-4"},React.createElement("select",{className:"form-control",onChange:this.updateTime.bind(this,"min"),value:this.state.min},minOptions)))}return React.createElement("div",null,input)}}]),GroupTimeElement}(React.Component),BaseElement=function(_React$Component5){function BaseElement(props){_classCallCheck(this,BaseElement);var _this5=_possibleConstructorReturn(this,(BaseElement.__proto__||Object.getPrototypeOf(BaseElement)).call(this,props));return _this5.updateValue=_this5.updateValue.bind(_this5),_this5}return _inherits(BaseElement,_React$Component5),_createClass(BaseElement,[{key:"updateValue",value:function(e){this.props.updateAnswer(this.props.element.Name,e.target.value)}},{key:"render",value:function(){var element=void 0,classInfo=this.props.classInfo,value=void 0,errorMessage=void 0;
switch(this.props.error&&(classInfo+=" has-error"),this.props.errorMessage&&(classInfo+=" questionError",errorMessage=React.createElement("div",null,this.props.errorMessage)),this.props.element.Type){case"text":value=null!=this.props.value?this.props.value:"",element=React.createElement("input",{type:"text",name:this.props.element.Name,className:"form-control",onChange:this.updateValue,value:value});break;case"select":var options=[];value=null!=this.props.value?this.props.value:"";for(var key in this.props.element.Options.Values)options.push(React.createElement("option",{value:key},this.props.element.Options.Values[key]));element=React.createElement("select",{className:"form-control",onChange:this.updateValue,value:value},options);break;case"label":var content="";this.props.value?content=this.props.value:this.props.element.Description&&(content=this.props.element.Description),element=React.createElement(Markdown,{content:content});break;case"date":element=React.createElement(GroupDateElement,{element:this.props.element,value:this.props.value,updateAnswer:this.props.updateAnswer});break;case"time":value=null!=this.props.value?this.props.value:"",element=React.createElement(GroupTimeElement,{element:this.props.element,value:this.props.value,updateAnswer:this.props.updateAnswer});break;default:element=React.createElement("div",null,this.props.element.Type," is not yet implemented group")}return React.createElement("div",{className:classInfo},element,errorMessage)}}]),BaseElement}(React.Component);exports.default=GroupElement}});
//# sourceMappingURL=DirectEntry.js.map